;/*FB_PKG_DELIM*/

__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8977526925596517"}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometIXTFacebookProactiveWarningFlowTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookProactiveWarningFlowTriggerRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint",["CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;h||c("react");a={getPreloadProps:function(a){return{queries:{reference:{parameters:c("CometIXTFacebookProactiveWarningFlowTriggerRootQuery$Parameters"),variables:{input:babelHelpers["extends"]({},a,{nt_context:null,trigger_session_id:c("uuidv4")()}),scale:d("WebPixelRatio").get()}}}}},root:c("JSResourceForInteraction")("CometIXTFacebookProactiveWarningFlowTriggerRoot.react").__setRef("CometIXTFacebookProactiveWarningFlowTriggerEntryPoint.entrypoint")};b=a;g["default"]=b}),98);
__d("ComponentMountUnmountSubspanLogger.react",["InteractionTracingMetrics","hero-tracing-placeholder","performanceNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect;function a(a){var b=a.description,e=j(d("hero-tracing-placeholder").HeroInteractionIDContext);k(function(){var a=(h||(h=c("performanceNow")))();return function(){if(e!=null){var d=(h||(h=c("performanceNow")))();c("InteractionTracingMetrics").addSubspan(e,b,"AppTiming",a,d,{})}}},[b,e])}g["default"]=a}),98);
__d("IEBAPI",["MAWBridge"],(function(a,b,c,d,e,f,g){"use strict";b=1;function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWBridge").getBridge().sendAndReceive("backend","ebapi",{args:c,type:a})}}g.version=b;g.makeBridgedApi=a}),98);
__d("EBBridgedAPI",["IEBAPI"],(function(a,b,c,d,e,f,g){"use strict";a={messagePointQuery:d("IEBAPI").makeBridgedApi("messagePointQuery"),messageRangeQuery:d("IEBAPI").makeBridgedApi("messageRangeQuery")};b=a;g["default"]=b}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.value=a;return c}var c=a.prototype;c.next=function(a){this.value=a,b.prototype.next.call(this,a)};return a}(d("ReplayLastSubject").ReplayLastSubject),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];e.forEach(function(a){c.subscribe({complete:function(){return a.complete()},error:function(b){return a.error(b)},next:function(b){return a.next(b)}})});c.next(a);return c}return a}(i);a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.$2=function(a){for(var b=this.$1,c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f.value;if((h||(h=d("I64"))).le(g.minTimestampMs,a)&&((h||(h=d("I64"))).ge(g.maxTimestampMs,a)||!g.hasMoreAfter))return f}return null};b.getRangeForTimestamp=function(a){return this.$2(a)};b.upsertRange=function(a){var b=Array.from(this.$1.values()).filter(function(b){return l(b.value,a)});if(b.length===0){var c=new i(a);this.$1.add(c);return c}c=k.apply(void 0,b.map(function(a){return a.value}).concat([a]));if(b.length===1){var d=b[0];d.next(c);return d}for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$1["delete"](g)}g=babelHelpers.construct(j,[c].concat(b));this.$1.add(g);return g};return a}();function k(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];if(b.length===0)throw c("err")("Cannot merge 0 ranges");var f=b[0].threadKey,g=b[0].minTimestampMs,i=b[0].hasMoreAfter,j=b[0].hasMoreBefore,k=b[0].maxMessageId,l=b[0].minMessageId,m=b[0].maxTimestampMs;for(var n=1;n<b.length;n++){var o=b[n];(h||(h=d("I64"))).le(o.minTimestampMs,g)&&((h||(h=d("I64"))).equal(o.minTimestampMs,g)?j=j&&o.hasMoreBefore:j=o.hasMoreBefore,g=o.minTimestampMs,l=o.minMessageId);(h||(h=d("I64"))).ge(o.maxTimestampMs,m)&&((h||(h=d("I64"))).equal(o.maxTimestampMs,m)?i=i&&o.hasMoreAfter:i=o.hasMoreAfter,m=o.maxTimestampMs,k=o.maxMessageId)}return{hasMoreAfter:i,hasMoreBefore:j,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:k,maxTimestampMs:m,minMessageId:l,minTimestampMs:g,threadKey:f}}function l(a,b){var c=(h||(h=d("I64"))).le(b.minTimestampMs,a.minTimestampMs),e=c?b:a;c=c?a:b;return m(e,c.minTimestampMs)?!0:!1}function m(a,b){return(h||(h=d("I64"))).ge(b,a.minTimestampMs)&&(h||(h=d("I64"))).le(b,a.maxTimestampMs)}g["default"]=a}),98);
__d("XFBLSEncryptedBackupsMessagesRangeQueryDirection.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["AFTER","BEFORE"]);c=a;f["default"]=c}),66);
__d("findMsgsWithMinAndMaxTimestamp",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.filter(function(a){return a.sortOrderMs!=null});var b=null,c=null;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;if(g.sortOrderMs==null)continue;(((f=b)==null?void 0:f.sortOrderMs)==null||b.sortOrderMs<g.sortOrderMs)&&(b=g);(((f=c)==null?void 0:f.sortOrderMs)==null||c.sortOrderMs>g.sortOrderMs)&&(c=g)}return[c,b]}f["default"]=a}),66);
__d("switchMap",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("relay-runtime").Observable.create(function(c){var d,e=a.subscribe({complete:c.complete,error:c.error,next:function(a){var e;(e=d)==null?void 0:e.unsubscribe();d=b(a).subscribe(c)}});return function(){var a;(a=d)==null?void 0:a.unsubscribe();e.unsubscribe()}})}g["default"]=a}),98);
__d("EBMessageRangeDataSource",["$InternalEnum","DateConsts","EBBridgedAPI","FBLogger","I64","LSDatabaseSingleton","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEBDeanonFetch","MAWEBFetch","MAWEncryptedBackupUtils","MAWMessageIntegrityChecker","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureLocalDBFetch","MAWTraceUtils","MLV2DataSourceLogger","MessageRangeSet","Promise","ReQL","ReQLObservable","ReplayLastSubject","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","findMsgsWithMinAndMaxTimestamp","gkx","nullthrows","recoverableViolation","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBMessageRangeDataSource: Failed to fetch messages from EB. Message: "," TraceId: "," Request: ",""]);l=function(){return a};return a}var m=20,n=100,o="timeout",p=10*d("DateConsts").MS_PER_SEC,q=c("gkx")("5390")?15*d("DateConsts").MS_PER_SEC:10*d("DateConsts").MS_PER_SEC,r=b("$InternalEnum").Mirrored(["Consistent","Inconsistent","NoOverlapOfDeanonMsgs","PartialOverlapOfDeanonMsgs","DeanonMsgsExhausted"]),s=function(){function a(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.$3=null;this.getOrCreateMessageRangeCoveringCursor=function(a,b){var c=e.$2.getRangeForTimestamp(a.timestampMs);b==null?void 0:b.annotateMessageRangesDataSource("EBMessageRangeDataSource");if(c!=null)return c;b=(k||(k=d("I64"))).equal(a.timestampMs,k.max_int);c={hasMoreAfter:!b,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(b=a.messageId)!=null?b:"",minTimestampMs:a.timestampMs,threadKey:e.$1};b=e.$2.upsertRange(c);return b};this.extendRange=function(a,f){var g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,f);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){c("recoverableViolation")("EBDataSource: Requested to extend a nonexisting range","maw_message_core");g==null?void 0:g.markQPLPoint("extend_range_invalid");return(h||(h=b("Promise"))).resolve()}var i=a.value;if(f==="asc"&&(!i.hasMoreAfter||i.isLoadingAfter)){g==null?void 0:g.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}if(f==="desc"&&(!i.hasMoreBefore||i.isLoadingBefore)){g==null?void 0:g.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},i,{isLoadingAfter:i.isLoadingAfter||f==="asc",isLoadingBefore:i.isLoadingBefore||f==="desc"}));return e.$4(a.value,f)};this.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var f=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b),g=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);f==null?void 0:f.markQPLPoint("eb_wait_act_thread_start");var h=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(g.tables,e.$1,"MAWMessageRangeDataSourceForThread"));h=h.chatJid;f==null?void 0:f.markQPLPoint("eb_wait_act_thread_end");if(c("gkx")("5390")){var j=(yield e.$12({chatJid:h,db:g,direction:b,logger:f,range:a}));if(j)return}j=(yield e.$7({chatJid:h,db:g,direction:b,logger:f,range:a}));if(j.success===!1){e.$2.upsertRange(e.$6());return}h=(yield e.$9({chatJid:h,direction:b,logger:f,range:a}));f==null?void 0:f.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(g,h);f==null?void 0:f.markQPLPoint("insert_msgs_to_lsdb_end");e.$10({direction:b,ebFetchResult:j.value,logger:f,mawFetchResult:h,range:a})});return function(b,c){return a.apply(this,arguments)}}();this.$1=a}var e=a.prototype;e.$5=function(a){var b=a.direction,e=a.fetchResult,f=a.range;a=b==="asc"?e.messages.filter(function(a){return a.sortOrderMs!=null&&(k||(k=d("I64"))).ge((k||(k=d("I64"))).of_float(a.sortOrderMs),f.maxTimestampMs)}):e.messages.filter(function(a){return a.sortOrderMs!=null&&(k||(k=d("I64"))).le((k||(k=d("I64"))).of_float(a.sortOrderMs),f.minTimestampMs)});var g=babelHelpers["extends"]({},e,{messages:a});a.length!==e.messages.length&&c("recoverableViolation")("EBMessageRangeDataSource: EB fetch API returned invalid messages outside requested timerange","messenger_web_product");a.length===0&&(b==="asc"&&e.hasMoreAfter&&(g.hasMoreAfter=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages after","messenger_web_product")),b==="desc"&&e.hasMoreBefore&&(g.hasMoreBefore=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages before","messenger_web_product")));return g};e.$6=function(){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(k||(k=d("I64"))).max_int,minMessageId:"",minTimestampMs:k.min_int,threadKey:this.$1}};e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,i=a.logger;a=a.range;i==null?void 0:i.markQPLPoint("wait_eb_fetch_start");var j=w(a,g),n=e+":"+(k||(k=d("I64"))).to_string(j)+":"+g+":"+m,p=d("MAWTraceUtils").createTraceId();e=(yield (h||(h=b("Promise"))).race([c("gkx")("5444")?c("EBBridgedAPI").messageRangeQuery({chatJid:e,direction:u(g),timestampMs:j,traceId:p}):c("MAWEBFetch")({chatJid:e,count:m,db:f,direction:u(g),timestampMs:j,traceId:p}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(o))},q)})]));if(e.success===!1){d("WATagsLogger").TAGS(["maw_message_core","EBMessageRangeDataSource",p]).ERROR(l(),e.error,p,n);i==null?void 0:i.markQPLPoint("eb_fetch_response_fail");i==null?void 0:i.addQPLAnnotations({string:{eb_failure_reason:e.error}});return e}f=this.$5({direction:g,fetchResult:e.value,range:a});i==null?void 0:i.markQPLPoint("wait_eb_fetch_end");return d("WAResultOrError").makeResult({raw:e.value,recovered:f})});function e(b){return a.apply(this,arguments)}return e}();e.$8=function(a){var c=a.chatJid,e=a.direction,f=a.logger;f==null?void 0:f.markQPLPoint("eb_fetch_deanon_start");return(h||(h=b("Promise"))).race([d("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:c,count:n,direction:v(e),fetchPolicy:"store-or-network",timestampMs:null}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(o))},p)})]).then(function(a){f==null?void 0:f.markQPLPoint("eb_fetch_deanon_end");return a})};e.$9=function(a){var b=a.chatJid,d=a.direction,e=a.logger;a=a.range;e==null?void 0:e.markQPLPoint("wait_secure_local_db_fetch_start");return c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:b,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:m,direction:u(d),offsetMsg:{includeOriginalMsg:!1,messageId:d==="asc"?a.maxMessageId:a.minMessageId},timestampMs:d==="asc"?a.maxTimestampMs:a.minTimestampMs}).then(function(a){e==null?void 0:e.markQPLPoint("wait_secure_local_db_fetch_end");return a})};e.$10=function(a){var b=a.direction,e=a.ebFetchResult,f=a.logger,g=a.mawFetchResult,h=a.range;f==null?void 0:f.markQPLPoint("maw_upsert_range_start");a=e.raw;var i=e.recovered.messages,j=i.map(function(a){return a.sortOrderMs}).filter(Boolean);j=[Math.min.apply(Math,j),Math.max.apply(Math,j)];var l=j[0];j=j[1];var m=w(h,b),n=b==="desc"?[(k||(k=d("I64"))).of_float(l),m]:[m,(k||(k=d("I64"))).of_float(j)];l=g.msgs.filter(function(a){return(k||(k=d("I64"))).ge((k||(k=d("I64"))).of_float(a.sortOrderMs),n[0])&&(k||(k=d("I64"))).le((k||(k=d("I64"))).of_float(a.sortOrderMs),n[1])});var o,p;if(l.length===0){m=c("gkx")("842")||c("gkx")("4767");if(!m){c("recoverableViolation")("EBMessageRangeDataSource: No local messages found within EB response range","messenger_web_product");f==null?void 0:f.markQPLPoint("eb_fetch_has_no_local_msg_overlap");this.$2.upsertRange(this.$6());return}c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: No local messages found within EB response range for protobuf. Filtered EB payload size: %s, original EB payload size: %s, original EB hasMoreBefore: %s, original EB hasMoreAfter: %s",i.length,a.messages.length,a.hasMoreBefore,a.hasMoreAfter);i.sort(function(a,b){return((a=a.sortOrderMs)!=null?a:0)-((a=b.sortOrderMs)!=null?a:0)});o=i.length>0?i[0]:void 0;p=i.length>0?i[i.length-1]:void 0}else{j=c("findMsgsWithMinAndMaxTimestamp")(l);o=j[0];p=j[1]}g=babelHelpers["extends"]({},h,function(){var a;switch(b){case"asc":return{hasMoreAfter:e.recovered.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(a=(a=p)==null?void 0:a.msgId)!=null?a:h.maxMessageId,maxTimestampMs:(k||(k=d("I64"))).max(h.maxTimestampMs,((a=p)==null?void 0:a.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((a=p)==null?void 0:a.sortOrderMs):h.maxTimestampMs)};case"desc":return{hasMoreBefore:e.recovered.hasMoreBefore,isLoadingBefore:!1,minMessageId:(a=(a=o)==null?void 0:a.msgId)!=null?a:h.minMessageId,minTimestampMs:(k||(k=d("I64"))).min(h.minTimestampMs,((a=o)==null?void 0:a.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((a=o)==null?void 0:a.sortOrderMs):h.minTimestampMs)}}}());this.$2.upsertRange(g);f==null?void 0:f.markQPLPoint("maw_upsert_range_end")};e.$11=function(a){var b=a.direction,c=a.logger,e=a.mawFetchResult,f=a.range;c==null?void 0:c.markQPLPoint("maw_upsert_range_start");a=[].concat(e.msgs).sort(function(a,b){return a.sortOrderMs-b.sortOrderMs});var g=a.length>0?a[0]:void 0,h=a.length>0?a[a.length-1]:void 0;a=babelHelpers["extends"]({},f,function(){var a;switch(b){case"asc":return{hasMoreAfter:e.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(a=h==null?void 0:h.msgId)!=null?a:f.maxMessageId,maxTimestampMs:(k||(k=d("I64"))).max(f.maxTimestampMs,(h==null?void 0:h.sortOrderMs)!=null?(k||(k=d("I64"))).of_float(h==null?void 0:h.sortOrderMs):f.maxTimestampMs)};case"desc":return{hasMoreBefore:e.hasMoreBefore,isLoadingBefore:!1,minMessageId:(a=g==null?void 0:g.msgId)!=null?a:f.minMessageId,minTimestampMs:(k||(k=d("I64"))).min(f.minTimestampMs,(g==null?void 0:g.sortOrderMs)!=null?(k||(k=d("I64"))).of_float(g==null?void 0:g.sortOrderMs):f.minTimestampMs)}}}());this.$2.upsertRange(a);c==null?void 0:c.markQPLPoint("maw_upsert_range_end")};e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,i=a.logger;a=a.range;if(this.$13(a)){c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Deanon messages metadata exhausted");i==null?void 0:i.addQPLAnnotations({string:{optimistic_range_extension_integrity_check_result:r.getName(r.DeanonMsgsExhausted)}});return(h||(h=b("Promise"))).resolve(!1)}e=(yield (h||(h=b("Promise"))).all([this.$8({chatJid:e,direction:g,logger:i}),this.$9({chatJid:e,direction:g,logger:i,range:a})]));var j=e[0];e=e[1];if(j.success===!1){if(j.error===o){c("FBLogger")("messenger_web_product").warn("EBMessageRangeDataSource: Deanon messages metadata fetch timed out, marking the entire data source as unusable");this.$2.upsertRange(this.$6());return(h||(h=b("Promise"))).resolve(!0)}c("FBLogger")("messenger_web_product").warn("EBMessageRangeDataSource: Deanon messages metadata fetch failed, try to fetch messages from EB");return(h||(h=b("Promise"))).resolve(!1)}j=this.$14({deanonMsgsMetadata:j.value,logger:i,mawMessages:e.msgs});i==null?void 0:i.addQPLAnnotations({string:{optimistic_range_extension_integrity_check_result:r.getName(j)}});c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Optimisting range extension, integrity check result: %s",r.getName(j));if(j!==r.Consistent)return(h||(h=b("Promise"))).resolve(!1);i==null?void 0:i.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(f,e);i==null?void 0:i.markQPLPoint("insert_msgs_to_lsdb_end");this.$11({direction:g,logger:i,mawFetchResult:e,range:a});return h.resolve(!0)});function e(b){return a.apply(this,arguments)}return e}();e.$15=function(a){var b=a.deanonMsgsMetadata;a=a.mawMessages;var e=[].concat(a).filter(function(a){return!a.isAdminMessage}).map(function(a){return{externalId:a.externalId,msgType:a.type_,sortOrderMs:a.sortOrderMs}}).sort(d("MAWMessageIntegrityChecker").compareMessageMetadataForDescOrder);a=[].concat(b).sort(d("MAWMessageIntegrityChecker").compareMessageMetadataForDescOrder);b=a.findIndex(function(a){return a.externalId===e[0].externalId});var f=a.findIndex(function(a){return a.externalId===e[e.length-1].externalId});if(b===-1&&f===-1)return{rangeCheckResult:r.NoOverlapOfDeanonMsgs};else if(b===-1||f===-1)return{rangeCheckResult:r.PartialOverlapOfDeanonMsgs};if(b>f){c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: Order of messages in MAW db and deanon EB is different, range start index: %s, range end index: %s",b,f);return{rangeCheckResult:r.NoOverlapOfDeanonMsgs}}return{deanonMsgsMetadata:a.slice(b,f+1),mawDbMsgsMetadata:e,rangeCheckResult:r.Consistent}};e.$14=function(a){var b=a.deanonMsgsMetadata,c=a.logger;a=a.mawMessages;c==null?void 0:c.markQPLPoint("ui_vs_eb_deanon_integrity_check_start");if(a.length===0)return b.length===0?r.Consistent:r.Inconsistent;b=this.$15({deanonMsgsMetadata:b,mawMessages:a});if(b.rangeCheckResult!==r.Consistent)return b.rangeCheckResult;b.deanonMsgsMetadata&&this.$16(b.deanonMsgsMetadata);a=d("MAWMessageIntegrityChecker").checkIntegrityforMessageList((a=b.mawDbMsgsMetadata)!=null?a:[],(a=b.deanonMsgsMetadata)!=null?a:[],(b=(a=b.mawDbMsgsMetadata)==null?void 0:a.length)!=null?b:0,"maw","eb");c==null?void 0:c.markQPLPoint("ui_vs_eb_deanon_integrity_check_end");return a.result==="missing_in_target"?r.Inconsistent:r.Consistent};e.$13=function(a){var b;b=!(k||(k=d("I64"))).equal(a.minTimestampMs,(k||(k=d("I64"))).max_int)&&(k||(k=d("I64"))).lt(a.minTimestampMs,(b=(b=this.$3)==null?void 0:b.minTimestampMs)!=null?b:(k||(k=d("I64"))).min_int);a=!(k||(k=d("I64"))).equal(a.maxTimestampMs,(k||(k=d("I64"))).max_int)&&(k||(k=d("I64"))).gt(a.maxTimestampMs,(a=(a=this.$3)==null?void 0:a.maxTimestampMs)!=null?a:(k||(k=d("I64"))).max_int);return b||a};e.$16=function(a){if(a.length===0){this.$3={maxTimestampMs:(k||(k=d("I64"))).min_int,minTimestampMs:k.max_int};return}this.$3={maxTimestampMs:(k||(k=d("I64"))).of_float(a[0].sortOrderMs),minTimestampMs:k.of_float(a[a.length-1].sortOrderMs)}};return a}(),t=function(){function a(a){var e=this;this.$1=new Map();this.$3=!1;this.getOrCreateMessageRangeCoveringCursor=function(a,b){var f=a.threadKey;return c("switchMap")(e.$2,function(c){return!c?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(k||(k=d("I64"))).max_int,minMessageId:"",minTimestampMs:k.min_int,threadKey:f})):d("relay-runtime").Observable.from(e.$4(f).getOrCreateMessageRangeCoveringCursor(a,b))})};this.extendRange=function(a,c){var f=a.threadKey,g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(f,c);if(!e.$3){g==null?void 0:g.markQPLPoint("eb_extend_range_skipped_due_to_disabled");return(h||(h=b("Promise"))).resolve()}return e.$4(f).extendRange(a,c)};this.$2=d("ReQLObservable").create(a,function(){return d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).map(function(a){var b=d("MAWEncryptedBackupUtils").getBackupTenancyFromClientStateRow(a);b!=null&&a.backupTenancy==null&&c("FBLogger")("messenger_web_product").warn("Previously broken state of invalid backup tenancy is caught");return b!=null&&(k||(k=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}).map(function(a){return Boolean(a==null?void 0:(a=a[0])==null?void 0:a[1])})["do"]({next:function(a){e.$3=a}})}var e=a.prototype;e.$4=function(a){var b=(k||(k=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new s(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}();function u(a){switch(a){case"asc":return"after";case"desc":return"before";case"point":return"point";default:return"point"}}function v(a){switch(a){case"asc":return"AFTER";case"desc":return"BEFORE"}}function w(a,b){return b==="asc"?a.maxTimestampMs:a.minTimestampMs}var x,y;function a(a){(x==null||y!==a)&&(y=a,x=new t(a));return x}g["default"]=a}),98);
__d("FaceHappyFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M458.508 1078.5a1 1 0 1 1-.015-2.002 1 1 0 0 1 .015 2.002m-.037 1.668c-.324.91-1.273 1.832-2.46 1.832h-.002c-1.2 0-2.157-.922-2.48-1.832a.5.5 0 1 1 .942-.335c.204.573.835 1.167 1.538 1.167h.001c.692 0 1.315-.593 1.519-1.168a.5.5 0 0 1 .942.335m-5.971-2.667a1 1 0 1 1 2 0 1 1 0 0 1-2 0m3.5-3.5a5.506 5.506 0 0 0-5.5 5.5c0 3.033 2.467 5.5 5.5 5.5s5.5-2.467 5.5-5.5-2.467-5.5-5.5-5.5"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("useIXTProactiveWarningFlowTriggerDialog",["cr:2998","cr:3116"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("cr:3116")(b("cr:2998"),a,void 0,void 0,{baseModalProps:c})}g["default"]=a}),98);
__d("IXTProactiveWarningFollowUpActionsCell.react",["FDSButton.react","react","useIXTProactiveWarningFlowTriggerDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.context,d=a.label,e=a.onClose,f=a.onPress,g=a.setPWDismissTime;a=c("useIXTProactiveWarningFlowTriggerDialog")({proactive_warning_request_context:b,trigger_event_type:"OPEN_PROACTIVE_WARNING_FLOW"});var h=a[0],j=function(){e()};return i.jsx(c("FDSButton.react"),{label:d,onPress:function(){g(),f(),h({flowCallbacks:{onClose:j}})},reduceEmphasis:!1,type:"secondary"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSCommunityPublicGroupParticipationApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_PARTICIPATE:1,PARTICIPATION_REQUEST_REQUIRED:2,PARTICIPATION_REQUEST_PENDING:3});f["default"]=a}),66);
__d("LSContactCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:0,REPLY_MESSAGE:1,JOIN_GROUP:2,BLOCK:3,SEE:4,SEE_FACEBOOK_PROFILE:5,PAYMENT:6,CAMERA:7,MEDIA_PICKER:8,STICKER:9,GIF:10,AUDIO_CLIPS:11,SHARED_MEDIA:12,REACTIONS:13,SEEN_HEADS:14,THREAD_DETAILS:15,RTC_VIDEO_CALL:16,RTC_VOICE_CALL:17,THREAD_FEEDBACK_AND_REPORT:18,GO_TO_SECRET_CONVERSATION:19,MAKE_ADMIN:20,REMOVE_FROM_GROUP:21,REMOVE_AS_ADMIN:22,VERIFIED:23,DISAPPEARING_MODE:24,SEE_MESSAGE:25,PSEUDO_BLOCK:26,PUSHABLE:27,MESSAGE_BLOCK_PLACED:28,FACEBOOK_BLOCK_PLACED:29,VIEWER_IS_UNCONNECTED:64,PAGE_PLATFORM_BOT:65,RESTRICT_PLACED:66,IS_XAC_ELIGIBLE:67,IS_GROUPS_XAC_ELIGIBLE:68,IS_GROUPS_XAC_CALLING_ELIGIBLE:69,IS_E2EE_ONLY:70,IS_ELIGIBLE_FOR_SAFETY_NOTICE:71,NOVI:72,IS_CONTACT_SHAREABLE:73,IS_HIDDEN:74,IS_THREAD_CUTOVER_USER:75,HAS_CUTOVER_THREAD:76,IS_COMMUNITY_BOT_PAGE:77,IS_NOT_SEARCHABLE:78,CAN_UPSELL_VOICEMAIL:79,DEFAULT_E2EE_THREADS:80,INCALL_CAPTIONS:81,IS_INTERNAL:82,DEFAULT_E2EE_THREAD_ONE_TO_ONE:83,IS_GROUP_UPDATES_BOT:84,LINK_TO_IG_PROFILE:85,IS_MARKETPLACE_NOT_CONSENTED:86,IS_GAMING_NOT_CONSENTED:87,DISABLE_MP_DMA_THREAD_COMPOSER:88,IS_GAMING_CONSENT_UNDECIDED:89,IS_GAMING_CONSENTED:90,IS_MSPLIT_NOT_CONSENTED:91,IS_MSPLIT_CONSENT_UNDECIDED:92,WORK_CHAT_GOVERNANCE_BLOCKED:93,HAS_P2P_DISAPPEARING_MESSAGES_THREAD:94,HAS_INSTAMADILLO_CUTOVER_THREAD:95,HAS_TTLC_CLIP_ENABLED:96,HAS_TTLC_GENERIC_XMA_SHARE_ENABLED:97,HAS_TTLC_MEDIA_SHARE_ENABLED:98,HAS_TTLC_STORY_SHARE_ENABLED:99,ELIGIBLE_FOR_META_VERIFIED_LABEL:100,HAS_JENGA_WORKCHAT_DEFLECTION_ENABLED:101,RESTRICT_CREATING_GROUP_THREAD:102,IS_USER_GENERATED_CHARACTER_BOT:103,IS_FRIENDING_RESTRICTED:104});f["default"]=a}),66);
__d("LS_Contact",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.phoneNumber}function d(a){return a.value.normalizedNameForSearch}function e(a){return a.value.profilePictureFallbackUrl}function g(a){return a.value.profilePictureUrlExpirationTimestampMs}function h(a){return a.value.profilePictureLargeUrl}function i(a){return a.value.profilePictureLargeFallbackUrl}function j(a){return a.value.profilePictureLargeUrlExpirationTimestampMs}function k(a){return a.value.contactReachabilityStatusType}function l(a){return a.value.capabilities2}function m(a){return a.value.id}function n(a){return a.value.profilePictureUrl}function o(a){return a.value.name}function p(a){return a.value.normalizedSearchTerms}function q(a){return a.value.isMessengerUser}function r(a){return a.value.isMemorialized}function s(a){return a.value.isManagedByViewer}function t(a){return a.value.blockedByViewerStatus}function u(a){return a.value.optimisticBlockedByViewerStatus}function v(a){return a.value.optimisticBlockedByViewerStatusTimestampMs}function w(a){return a.value.pendingMnUserBlockAction}function x(a){return a.value.pendingMnUserBlockActionTimestampMs}function y(a){return a.value.pendingFbUserBlockAction}function z(a){return a.value.pendingFbUserBlockActionTimestampMs}function A(a){return a.value.rank}function B(a){return a.value.firstName}function C(a){return a.value.contactType}function D(a){return a.value.pendingMessengerRestrictAction}function E(a){return a.value.contactTypeExact}function F(a){return a.value.messengerCallLogThirdPartyId}function G(a){return a.value.profileRingColor}function H(a){return a.value.requiresMultiway}function I(a){return a.value.blockedSinceTimestampMs}function J(a){return a.value.fbUnblockedSinceTimestampMs}function K(a){return a.value.canViewerMessage}function L(a){return a.value.emailAddress}function M(a){return a.value.profileRingColorExpirationTimestampMs}function N(a){return a.value.workCompanyId}function O(a){return a.value.workCompanyName}function P(a){return a.value.workJobTitle}function Q(a){return a.value.profileRingState}function R(a){return a.value.deviceContactId}function S(a){return a.value.workForeignEntityType}function T(a){return a.value.capabilities}function U(a){return a.value.contactViewerRelationship}function V(a){return a.value.gender}function W(a){return a.value.secondaryName}function X(a){return a.value.restrictionType}function Y(a){return a.value.waConnectStatus}function Z(a){return a.value.isEmployee}function $(a){return a.value.pageType}function aa(a){return a.value.authorityLevel}f.__context=a;f.__lightspeed_table_row=b;f.phone_number=c;f.normalized_name_for_search=d;f.profile_picture_fallback_url=e;f.profile_picture_url_expiration_timestamp_ms=g;f.profile_picture_large_url=h;f.profile_picture_large_fallback_url=i;f.profile_picture_large_url_expiration_timestamp_ms=j;f.contact_reachability_status_type=k;f.capabilities_2=l;f.id_=m;f.profile_picture_url=n;f.name=o;f.normalized_search_terms=p;f.is_messenger_user=q;f.is_memorialized=r;f.is_managed_by_viewer=s;f.blocked_by_viewer_status=t;f.optimistic_blocked_by_viewer_status=u;f.optimistic_blocked_by_viewer_status_timestamp_ms=v;f.pending_mn_user_block_action=w;f.pending_mn_user_block_action_timestamp_ms=x;f.pending_fb_user_block_action=y;f.pending_fb_user_block_action_timestamp_ms=z;f.rank=A;f.first_name=B;f.contact_type=C;f.pending_messenger_restrict_action=D;f.contact_type_exact=E;f.messenger_call_log_third_party_id=F;f.profile_ring_color=G;f.requires_multiway=H;f.blocked_since_timestamp_ms=I;f.fb_unblocked_since_timestamp_ms=J;f.can_viewer_message=K;f.email_address=L;f.profile_ring_color_expiration_timestamp_ms=M;f.work_company_id=N;f.work_company_name=O;f.work_job_title=P;f.profile_ring_state=Q;f.device_contact_id=R;f.work_foreign_entity_type=S;f.capabilities=T;f.contact_viewer_relationship=U;f.gender=V;f.secondary_name=W;f.restriction_type=X;f.wa_connect_status=Y;f.is_employee=Z;f.page_type=$;f.authority_level=aa}),66);
__d("LSContactHasCapability__has_capability$normalization.graphql",["LS_Contact","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSContactHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities_2,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSContactHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSContactHasCapability__has_capability",selections:[{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null}],type:"LS_Contact",abstractKey:null};e.exports=a}),null);
__d("LSEditMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(c,d){var e=c.done;c=c.value;return e?0:(d=c.item,(b.i64.eq(a[1],b.i64.cast([0,20]))||b.i64.le(d.authorityLevel,a[1]))&&b.i64.le(a[3],b.i64.cast([0,5]))?b.forEach(b.filter(b.db.table(12).fetch([[[d.threadKey,d.timestampMs,a[0]]]]),function(c){return b.i64.eq(c.threadKey,d.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,d.timestampMs)&&c.messageId===a[0]}),function(c){var d=c.update;c.item;return d({authorityLevel:a[1],editCount:a[3],text:a[2],sendStatus:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2]),sendStatusV2:b.i64.eq(a[1],b.i64.cast([0,20]))?b.i64.cast([0,1]):b.i64.cast([0,2])})}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxEditMessageStoredProcedure";e.exports=a}),null);
__d("LSFetchAdditionalThreadData",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["fetch_additional_thread_data","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,733]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchAdditionalThreadDataStoredProcedure";e.exports=a}),null);
__d("LSFetchAdditionalThreadDataStoredProcedure",["LSFetchAdditionalThreadData","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchAdditionalThreadData").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchProactiveWarningsIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return c.db.table(183).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=c.i64.cast([0,1])}]):(f=e.item,c.sequence([function(e){return d[5]=f.nextCheckTimestampMs,d[4]=c.i64.of_float(Date.now()),c.i64.neq(d[5],void 0)&&c.i64.ge(d[4],d[5])?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[7]=new c.Map(),d[7].set("thread_key",a[0]),d[7].set("sync_group",d[0]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[6]=c.i64.cast([0,1])}]):c.resolve((c.i64.neq(d[5],void 0)&&f.tag!==void 0?d[7]=c.i64.cast([0,2]):d[7]=c.i64.cast([0,3]),d[6]=d[7]))},function(a){return d[2]=d[6]}]))})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSProactiveWarningsFetchProactiveWarningsIfNeededStoredProcedure";e.exports=a}),null);
__d("LSFetchProactiveWarningsIfNeededStoredProcedure",["LSFetchProactiveWarningsIfNeeded","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchProactiveWarningsIfNeeded").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOnSendMessageFailure.nop",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e){return(g||(g=b("Promise"))).resolve()}f["default"]=a}),66);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[];return c.sequence([function(d){return c.sequence([function(d){return c.nativeOperation(b("LSOnSendMessageFailure.nop"),a[0],a[1])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({sendStatus:c.i64.cast([0,4]),sendStatusV2:c.i64.cast([0,4])})})}])},function(a){return c.resolve(d)}])}a.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure";e.exports=a}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.optimisticMid;d[1]=b.errorMessage;return c("LSMarkOptimisticMessageFailed").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticEditMessage",["LSEditMessage","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(12).fetch([[[a[0]]],"messageId"]).next().then(function(e,f){var g=e.done;e=e.value;return g?0:(f=e.item,d[2]=f.editCount,d[1]=c.i64.of_float(Date.now()),c.i64.lt(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,5]))&&c.i64.le(d[1],c.i64.add(f.timestampMs,c.i64.cast([0,9e5])))?c.sequence([function(e){return c.storedProcedure(b("LSEditMessage"),f.messageId,c.i64.cast([0,20]),a[1],c.i64.add(d[2]==null?c.i64.cast([0,0]):d[2],c.i64.cast([0,1])))},function(e){return d[3]=new c.Map(),d[3].set("message_id",a[0]),d[3].set("text",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[4]=c.i64.add(d[7],c.i64.cast([0,0]))):d[4]=c.i64.cast([0,0]),d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"edit_message",c.i64.cast([0,742]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[4],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return void 0!==void 0?(d[7]=c.i64.of_float(Date.now()),c.forEach(c.db.table(2).fetch([[[d[6]]]]),function(a){var b=a.update;a.item;return b({dataTraceId:void 0,initTraceTimestampMs:d[7]})})):c.resolve()}]):c.resolve(void 0!==void 0?0:0))})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticEditMessageStoredProcedure";e.exports=a}),null);
__d("LSOptimisticEditMessageStoredProcedure",["LSOptimisticEditMessage","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.messageId;d[1]=b.text;return c("LSOptimisticEditMessage").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("getOrRequestMWChatPresenceStatusForContactId",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MessengerMQTTPresence").__setRef("getOrRequestMWChatPresenceStatusForContactId");function a(a,b){var c=a.getStatus(b);a=a.getChatVisibility();if(c!=null||!a)return c;h.onReady(function(a){return a.sendAdditionalBuddyRequest(b)})}g["default"]=a}),98);
__d("useMWChatHasActiveContact",["I64","PresenceStatusContext","getOrRequestMWChatPresenceStatusForContactId","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useContext,l=b.useEffect,m=b.useState;function a(a){var b=k(c("PresenceStatusContext")),e=j(function(a){return a.map((i||(i=d("I64"))).to_string).some(function(a){a=c("getOrRequestMWChatPresenceStatusForContactId")(b,a);return(a==null?void 0:a.status)===2})},[b]),f=m(e(a)),g=f[0],h=f[1];l(function(){return b.addListener(function(){return h(e(a))})},[a,e,b]);return g}g.useMWChatHasActiveContact=a}),98);
__d("useMWChatPresenceStatus",["I64","PresenceStatusContext","getOrRequestMWChatPresenceStatusForContactId","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useContext,k=b.useEffect,l=b.useState;function a(a){var b=j(c("PresenceStatusContext")),e=(i||(i=d("I64"))).to_string(a);a=l(c("getOrRequestMWChatPresenceStatusForContactId")(b,e));var f=a[0],g=a[1];k(function(){return b.addListener(function(){return g(function(){return c("getOrRequestMWChatPresenceStatusForContactId")(b,e)})})},[b,e]);return f}g["default"]=a}),98);
__d("LSPresenceStatusText.react",["fbt","FDSRelativeTimestamp.react","I64","LSContactTypeExact","LSIntEnum","MessengerMSplitFlag","isArmadillo","react","useMWChatHasActiveContact","useMWChatPresenceStatus","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react"),m=h._("__JHASH__KJ9BpmLEozf__JHASH__"),n=function(){return null},o=function(a){return a};function p(a){var b=a.contactId,e=a.contactTypeExact,f=a.renderNullState;a=a.renderWrapper;b=c("useMWChatPresenceStatus")(b);var g=c("useServerTime")();e=e!=null&&(j||(j=d("I64"))).equal(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));if(c("MessengerMSplitFlag").is_msplit_account||e)return f();e=(b==null?void 0:b.status)===2;b=(b==null?void 0:b.last_active_time)!=null&&b.last_active_time!==0?b.last_active_time*1e3:void 0;if(e)return a(m);return b!=null?a(h._("__JHASH___H_8HkZmS8j__JHASH__",[h._param("time",c("FDSRelativeTimestamp.react").getRelativeTimestamp(g,new Date(b),"minimized"))])):f()}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.participants,c=a.renderNullState;a=a.renderWrapper;if(b.length!==1)return c();b=b[0];var d=b.contactID;b=b.contactTypeExact;return l.jsx(p,{contactId:d,contactTypeExact:b,renderNullState:c,renderWrapper:a})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.participants,c=a.renderNullState;a=a.renderWrapper;b=b.map(function(a){return a.contactID});b=d("useMWChatHasActiveContact").useMWChatHasActiveContact(b);if(b)return a(m);else return c()}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.participants,e=a.renderNullState;e=e===void 0?n:e;var f=a.renderWrapper;f=f===void 0?o:f;a=a.threadType;if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(1))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(15))&&c("isArmadillo")())return l.jsx(q,{participants:b,renderNullState:e,renderWrapper:f});else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(2))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(16))&&c("isArmadillo")())return l.jsx(r,{participants:b,renderNullState:e,renderWrapper:f});return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("LSRelayConnections",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.end_cursor}function b(a){return a.has_next_page}function d(a){return a.has_previous_page}function e(a){return(a=a.is_loading_next)!=null?a:!1}function f(a){return(a=a.is_loading_previous)!=null?a:!1}function h(a){return a.start_cursor}function i(a){return JSON.stringify(a)}function j(a){return JSON.parse(a)}function k(a,b){if(a.length>b.first+1)throw c("FBLogger")("meteora").mustfixThrow("Got more edges (%s) than expected given the limit (%s).",a.length,b.first);var d=a[0],e=a.length>=b.first+1;b=e?b.first-1:a.length-1;a=a.length>0?a[b]:null;return{end_cursor:a!=null?i(a.value[0]):null,has_next_page:e,has_previous_page:!1,start_cursor:d!=null?i(d.value[0]):null}}function l(a){var b;if(((b=a.first)!=null?b:0)<=0)throw c("FBLogger")("meteora").mustfixThrow("Invalid `first` argument passed to connection: expected > 0 but got %s",String(a.first))}function m(a,b){a=a;b.after!=null&&(a=a.bounds({gt:j(b.after)}));b.before!=null&&(a=a.bounds({lt:j(b.before)}));a=a.take(b.first+1);return a}g.end_cursor=a;g.has_next_page=b;g.has_previous_page=d;g.is_loading_next=e;g.is_loading_previous=f;g.start_cursor=h;g.keyToCursor=i;g.cursorToKey=j;g.pageInfoFromEdges=k;g.validateArgsOrThrow=l;g.applyConnectionArgs=m}),98);
__d("LSRelayContextDB",["LSDatabaseSingleton","cr:8556","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case"PROD":return(h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();case"EXAMPLE":if(b("cr:8556")==null)throw c("err")("Loading test data on prod");return b("cr:8556").getExampleLSDatabasePromise();default:throw c("unrecoverableViolation")("Unsupported dbType: "+a,"lightspeed_resolvers")}}g.getLSDbStoragePromise=a}),98);
__d("LSRelayContext",["LSRelayContextDB","Promise","RelayAPIConfig","isPromise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.dbType;a=k(a);return a instanceof(i||(i=b("Promise")))?a.then(function(a){return{actorID:c("RelayAPIConfig").actorID,db:a}}):{actorID:c("RelayAPIConfig").actorID,db:a}}var j={};function k(a){if(j[a]==null){var b=d("LSRelayContextDB").getLSDbStoragePromise(a);j[a]=b;(h||(h=c("isPromise")))(b)&&c("promiseDone")(b,function(b){j[a]=b})}return j[a]}g.getContext=a}),98);
__d("LSRelayLiveResolvers",["LSRelayConnections","ReQLObservable","areEqual","emptyFunction","relay-runtime","relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel","transformObservableToLiveState"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return j(k(a,b),function(b){return b.map(function(b){b[0];b=b[1];return{context:a,value:b}})})}function b(a,b,c){d("LSRelayConnections").validateArgsOrThrow(c);return j(k(a,function(a){return d("LSRelayConnections").applyConnectionArgs(b(a),c)}),function(b){b=b.map(function(b){return{context:a,value:b}});return{context:a,value:{edges:b.slice(0,c.first),page_info:d("LSRelayConnections").pageInfoFromEdges(b,c)}}})}function e(a,b){return j(k(a,function(a){return b(a).take(1)}),function(b){return b.length>0?{context:a,value:b[0][1]}:null})}function f(a,b,c){return j(k(a,function(a){return b(a).take(1)}),function(b){return{context:a,value:c(b==null?void 0:(b=b[0])==null?void 0:b[1])}})}var i={read:function(){return null},subscribe:function(){return c("emptyFunction")}};function j(a,b){var c=a.read;a=a.subscribe;return{read:function(){var a=c();if(d("relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel").isSuspenseSentinel(a))return d("relay-runtime").suspenseSentinel();else return b(a)},subscribe:a}}function k(a,b){return c("transformObservableToLiveState")(d("relay-runtime").Observable.create(function(e){var f,g=d("ReQLObservable").create(a.db,b).subscribe({complete:e.complete,error:e.error,next:function(a){if((h||(h=c("areEqual")))(a,f))return;f=a;e.next(a)}});return g}))}g.iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING=a;g.iterableToConnectionLiveResolver=b;g.iterableToFirstValueLiveResolver=e;g.iterableToMappedValueLiveResolver=f;g.nullValueLiveState=i;g.mapLiveState=j;g.makeLiveState=k}),98);
__d("LSRoot__thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.threadKey).take(1)})}g.thread=a}),98);
__d("LSRoot__viewer",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.context;return{context:a,value:{}}}f.viewer=a}),66);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(b){return d[4]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[4]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("is_group_thread",a[1]),d[2].set("is_typing",a[2]),d[2].set("attribution",c.i64.cast([0,0])),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[4],c.i64.cast([0,3]),d[3])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSTypingSendTypingIndicatorStoredProcedure";e.exports=a}),null);
__d("LSSendTypingIndicatorStoredProcedure",["LSSendTypingIndicator","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.isGroupThread;d[2]=b.isTyping;return c("LSSendTypingIndicator").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSSetProactiveWarningDismissTime",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[8]=b.syncGroup,c.i64.neq(d[8],void 0)?d[7]=d[8]:d[7]=c.i64.cast([0,1]),d[0]=d[7])})},function(e){return d[2]=c.i64.of_float(Date.now()),d[6]=c.i64.div(d[2],c.i64.cast([0,1e3])),d[3]=new c.Map(),d[3].set("thread_key",a[0]),d[3].set("timestamp",d[6]),d[3].set("sync_group",d[0]),d[4]=d[3].get("thread_key"),d[3],d[5]=c.toJSON(d[3]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[4]),c.i64.cast([0,438]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({proactiveWarningDismissTime:d[6]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSetProactiveWarningDismissTimeStoredProcedure";e.exports=a}),null);
__d("LSSetProactiveWarningDismissTimeStoredProcedure",["LSSetProactiveWarningDismissTime","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSSetProactiveWarningDismissTime").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSThreadCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({PAYMENT:0,CAMERA:1,MEDIA_PICKER:2,STICKER:3,GIF:4,GO_TO_SECRET_CONVERSATION:5,COLOR_CUSTOMIZATION:6,EMOJI_CUSTOMIZATION:7,THREAD_DETAILS_PROFILE_BUTTON:8,NICKNAMES:9,BLOCK:10,CALIBRA:12,MESSENGER_KIDS_MANAGE_KID_ACCOUNT:13,AUDIO_CLIPS:14,SHARED_MEDIA:15,BLOCK_GROUP_MEMBER:16,FEEDBACK_AND_REPORT:17,REACTIONS:18,MUTE_THREAD:19,SEEN_HEADS:20,MESSAGE_REQUEST_COMPOSER_BANNER:21,IN_THREAD_PROFILE_BUTTON:22,THREAD_DETAILS:23,RTC_VIDEO_CALL:24,RTC_VOICE_CALL:25,MEMBER_LIST:26,ADD_MEMBER:27,LEAVE_THREAD:28,BLOCKED_USER_INTERSTITIAL:29,OPTIMISTIC_THREAD_FEEDBACK_AND_REPORT:30,LOCATION_SHARING:31,IGNORE_MESSAGES:32,FOCUS_MODE:33,SEARCH_IN_CONVERSATION:34,CREATE_GROUP:35,POLL_CREATION:36,DISPLAY_ACTOR_TYPE_IN_THREAD_VIEW_HEADER:37,DISAPPEARING_MODE:38,FORCE_ONE_PHASE_SEND:39,SPLIT_MULTI_SEND_PHOTO:40,THREAD_DETAILS_IG_PROFILE_BUTTON:41,MESSAGE_REPLY:42,MENTIONS:43,GAMES_BOT_THREAD:44,DISABLE_LINKS:45,BLUR_MEDIA:46,DISABLE_CONTEXT_BANNER:47,TOP_LEVEL_SELF_REMEDIATION:48,DISABLE_USER_CONTROL:49,THREAD_DETAILS_SHOW_USER_NAME:50,DISABLE_MESSAGE_BUBBLE_SWIPE:51,IGNORED_THREAD:52,PAGE_BAN:53,CUSTOM_THREAD_NOTIFICATION_SOUNDS:54,ROOM_CREATION:55,FILE_PICKER:56,JOIN_ROOM:57,SELFIE_STICKER:58,POWER_UP:59,THREAD_NAME_CUSTOMIZATION:60,THREAD_PHOTO_CUSTOMIZATION:61,STRUCTURED_INPUT:62,SUPPRESS_NULLSTATE_HEADER:63,ARCHIVE_THREAD:64,UNARCHIVE_THREAD:65,MEMBER_REQUEST:66,BUSINESS_INBOX_BAN:67,CTM_AD_THREAD_WITH_AD_WARNING:68,BUSINESS_INBOX_SAVED_REPLIES:69,GARDEN_THREAD_SETTINGS:70,MARKETPLACE_SAVED_REPLIES:71,CARRIER_MESSAGING_ADD_MEMBER:72,PHONE_CALL:73,THREAD_DETAILS_DELETE_THREAD:74,EPHEMERAL_MESSAGE_TIMER:75,MESSAGE_EXPIRATION:76,MESSAGE_SOUND_SETTINGS:77,RINGTONE_SOUND_SETTINGS:78,HIDE_FROM_ACTIVE_NOW:79,MAGIC_WORDS:80,THREAD_DESCRIPTION_CUSTOMIZATION:81,BUSINESS_INBOX_CATALOG:82,ADMIN_RECALL_MESSAGE:83,SHARE_CONTACT:84,RESTRICT_CONTACT:85,SOUND_BITE:86,MOST_LIKELY_TO_POLL_CREATION:87,REPORT_CHAT_TO_ADMIN:88,CAN_MARK_READ_OR_UNREAD:89,BUSINESS_TOOLS:90,REMOVE_MEMBER:91,GROUP_GO_TO_SECRET_CONVERSATION:92,REPORT_MESSAGE_TO_ADMIN:93,MANAGE_MEMBER:94,SHARED_LINKS:95,SHARED_CONTENT:96,ADD_XAC_USERS:97,BUSINESS_ORDER_MANAGEMENT:98,RTC_MARKETPLACE_COMPOSER_BANNER:99,IS_SELLER_RTC_ELIGIBLE:100,IS_BUYER_RTC_ELIGIBLE:101,MESSAGE_LOCAL_DELETE:102,MESSAGE_FORWARD:103,IS_NFB_ELIGIBLE:104,MESSAGE_REQUEST_GROUP_INVITE:105,VIEW_PINNED_MESSAGES_V2:106,BUSINESS_APPOINTMENT_BOOKING:107,THREAD_DETAILS_SHOW_CHAT_INVITE_LINK:108,HOTLIKE_STICKER:109,IS_LEARNING_SPACE_CHAT:110,AUDIO_CAPTIONS:111,COMMAND_SILENT:112,MARKETPLACE_THREAD_COMMERCE_PROFILE_BUTTON:113,EPHEMERAL_MEDIA:114,COMMAND_EVERYONE:115,COMMAND_GIF:116,MARKETPLACE_THREAD_COMMERCE_PRODUCT_BUTTON:117,CAMERA_BACKUP:118,BLOCK_MARKETPLACE_USER:119,COMMUNITY_MESSAGING_CHANNEL_INVITE:120,COMMAND_TEXT_REPLACEMENT:121,MESSAGE_UNSEND:122,IMMERSIVE_MODES_SPACES:123,COMMUNITY_MESSAGING_LINK_SHARING_V2:124,COMMUNITY_MESSAGING_AUDIO_ROOMS:125,BUMP_MESSAGE_ACTION:126,CUTOVER_BLOCK_COMPOSER:128,FAVORITE_THREAD:129,BUMP_THREAD:131,IS_BUSINESS_APPOINTMENT_THREAD_INTENT_ENABLED:132,COMMUNITY_MESSAGING_ICEBREAKERS:133,COMMUNITY_MESSAGING_CHANNEL_EMOJI_CUSTOMIZATION:134,COMMUNITY_MESSAGING_CHANNEL_DESCRIPTION_CUSTOMIZATION:135,IS_MESSENGER_CHAT_ENTITY_THREAD:136,RESHARE_HUB:138,REACTIONS_V2:139,SEEN_COUNTS_V2:140,IS_LARGE_THREAD:141,PUBLIC_CHAT_BAN_USER:143,CONTENT_EXPLORER:144,PRO_MODE:145,CUSTOMER_APPOINTMENT_REQUEST:146,IS_MESSENGER_GUIDE_CHAT_ENTITY_THREAD:147,COMMUNITY_MESSAGING_THREAD_LEAVE_UPSELL:148,GENERATED_STICKERS:149,ROLLCALL:152,BUSINESS_CHAT_PRIVACY_DISCLOSURE:153,PAUSE_CHAT:154,GAMES_DISCOVERY:155,MULTI_REACT:156,STICKER_TRAY_SEARCH:157,POLL_V1_UI:158,POLL_V2_UI:159,DEIDENTIFIED_STICKER_SEARCH:160,PIN_CHANNEL_ON_PROFILE:161,ARMADILLO_TLC_CONTROL_OPEN_THREAD:162,SUGGESTED_TAB:163,GROUP_CHAT_UPGRADE_ELIGIBILITY:164,HAS_GROUP_UPDATES_BOT_ATTACHED:165,HAS_GROUP_UPDATES_SETTING_ENABLED:166,SUB_THREAD_CREATION_ENABLED:167,COMMUNITY_MESSAGING_FIRST_MESSAGE_UPSELL_WITH_ICE_BREAKERS:168,REACTIONS_V2_WRITE:169,POLL_VOTING:170,AUTO_ENDED_CHANNEL_COMPOSER:171,MODIFY_PINNED_MESSAGES_V2:172,CUSTOM_GHOST_TEXT:173,AVATAR_DETAILS:174,COLLAPSIBLE_XMAT:175,ADD_YOURS:176,PAUSE_CHAT_ON_BLUE:177,UPGRADED_COMMUNITY_JOINED:178,IS_UPGRADED_COMMUNITY_OWNER:179,AI_BOT_DATA_USAGE_IN_THREAD_DETAILS:180,AI_BOT_FEEDBACK_IN_THREAD_DETAILS:181,AI_BOT_TIPS_IN_THREAD_DETAILS:182,AI_BOT_SUMMONING:183,VIEW_REACTION_DETAILS:184,BUSINESS_PROFILE_BADGE:185,HINT_CARD_IN_CHANNEL_UPGRADED_FROM_GROUP_CHAT:186,AI_BOT_EMBODIMENT:187,BMOP_IN_THREAD_CATALOG_ENTRY_POINT:188,OPTIMISTIC_THREAD_APPOINTMENT_REQUEST:189,IS_GAME_RECOMMENDATIONS_CHAT_ENTITY_THREAD:190,IS_XAC_READ_ONLY:192,WILL_XAC_BE_READ_ONLY:193,IS_EDIT_MESSAGE_ENABLED:194,SUB_THREAD_LIST:195,TRANSLATE_MESSAGE:196,MANAGE_CHAT_THREAD_DETAILS:197,CUSTOMER_LEAD_FORM_APPOINTMENT_REQUEST:198,ADMOD_ONBOARDING_ACTIONS_V2:199,RTC_OPTIN_REQUEST:200,CUSTOMER_LEAD_FORM_GET_QUOTE:201,PAUSED_BY_SOFT_ACTION_COMPOSER_BLOCK:202,DISABLE_MARKETPLACE_DMA_THREAD_COMPOSER:203,CUSTOMIZE_WELCOME_PROMPT_THREAD_DETAILS:204,IS_COMMUNITY_MESSAGING_FIRST_THREAD_JOIN_PER_COMMUNITY_FOR_MEMBER_ONBOARDING:205,SUB_THREAD_OPTIMISTIC_CREATE_ENABLED:206,ONE_CLICK_MUTE_ENABLED:207,GEOCHATS_CAN_SET_LOCATION:208,GEOCHATS_CAN_VIEW_LOCATION:209,WORK_CHAT_GOVERNANCE_BLOCK:210,INSTAMADILLO_TRANSPORT_ENABLED:211,INSTAMADILLO_DISAPPEARING_MESSAGES_TOGGLE_ENABLED:212,IS_BSG_THREAD:213,IS_INSTAMADILLO_CUTOVER:214,WRITE_WITH_AI_ENABLED:215,SHOW_FOLLOW_PAGE_CTA:216,CAN_VIEWING_PAGE_BE_LIKED:217,DELETE_FROM_THREAD_LIST_VIEW:218,INVITE_MODEL_TEXT_ONLY:219,COMMAND_SUMMARY:220,COMMUNITY_AI:221,BUSINESS_INBOX_FILE_SHARING:222,MESSAGE_AS_PAGE:223,COMPOSER_INLINE_MEDIA:224,INSTAMADILLO_TTLC_TEXT:225,INSTAMADILLO_TTLC_CLIP:226,INSTAMADILLO_TTLC_REEL_SHARE:227,INSTAMADILLO_TTLC_MEDIA_SHARE:228,INSTAMADILLO_TTLC_STORY_SHARE:229,INSTAMADILLO_TTLC_LINK:230,INSTAMADILLO_TTLC_GENERIC_XMA:231,INSTAMADILLO_TTLC_IMAGE:232,INSTAMADILLO_TTLC_VIDEO:233,INSTAMADILLO_TTLC_AUDIO:234,INSTAMADILLO_TTLC_CALLING:235,INSTAMADILLO_TTLC_PROFILE:236,AI_BOT_MEMU_ONBOARDING_IN_THREAD_DETAILS:237,CHANNELS_VOICE_SWITCHING_ENABLED:238,AI_BOT_CREATOR_INFO:239,AI_BOT_HALLUCINATION_DISCLAIMER_IN_THREAD_DETAILS:240,BUSINESS_FORM_MANAGEMENT:241,AI_STUDIO_IN_THREAD:242,AI_UGC_BOT:243,AI_BOT_FBGROUP_INFO:244,MAGIC_MESSENGER:245,AI_BOT_MANAGE_AI_MEMORY_IN_THREAD_DETAILS:246,GROUP_CHAT_AI_IMAGE_ENABLED:247,GROUP_UGC_EDIT_ENABLED:248});f["default"]=a}),66);
__d("LS_Participant",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.readWatermarkTimestampMs}function e(a){return a.value.deliveredWatermarkTimestampMs}function f(a){return a.value.nickname}function h(a){return a.value.authorityLevel}function i(a){return a.value.threadKey}function j(a){return a.value.contactId}function k(a){return a.value.readActionTimestampMs}function l(a){return a.value.isAdmin}function m(a){return a.value.subscribeSource}function n(a){return a.value.normalizedSearchTerms}function o(a){return a.value.participantCapabilities}function p(a){return a.value.groupParticipantJoinState}function q(a){return a.value.isModerator}function r(a){return a.value.isSuperAdmin}function s(a){return a.value.threadRoles}function t(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a.value.contactId)})}g.__context=a;g.__lightspeed_table_row=b;g.read_watermark_timestamp_ms=c;g.delivered_watermark_timestamp_ms=e;g.nickname=f;g.authority_level=h;g.thread_key=i;g.contact_id=j;g.read_action_timestamp_ms=k;g.is_admin=l;g.subscribe_source=m;g.normalized_search_terms=n;g.participant_capabilities=o;g.group_participant_join_state=p;g.is_moderator=q;g.is_super_admin=r;g.thread_roles=s;g.contact=t}),98);
__d("LS_Participant_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.lastActivityTimestampMs}function e(a){return a.value.lastReadWatermarkTimestampMs}function f(a){return a.value.snippet}function h(a){return a.value.threadName}function i(a){return a.value.threadPictureUrl}function j(a){return a.value.needsAdminApprovalForNewParticipant}function k(a){return a.value.authorityLevel}function l(a){return a.value.threadKey}function m(a){return a.value.mailboxType}function n(a){return a.value.threadType}function o(a){return a.value.folderName}function p(a){return a.value.threadPictureUrlFallback}function q(a){return a.value.threadPictureUrlExpirationTimestampMs}function r(a){return a.value.removeWatermarkTimestampMs}function s(a){return a.value.muteExpireTimeMs}function t(a){return a.value.muteMentionExpireTimeMs}function u(a){return a.value.muteCallsExpireTimeMs}function v(a){return a.value.groupNotificationSettings}function w(a){return a.value.isAdminSnippet}function x(a){return a.value.snippetSenderContactId}function y(a){return a.value.snippetText}function z(a){return a.value.snippetStringHash}function A(a){return a.value.snippetStringArgument1}function B(a){return a.value.snippetAttribution}function C(a){return a.value.snippetAttributionStringHash}function D(a){return a.value.disappearingSettingTtl}function E(a){return a.value.disappearingSettingUpdatedTs}function F(a){return a.value.disappearingSettingUpdatedBy}function G(a){return a.value.ongoingCallState}function H(a){return a.value.cannotReplyReason}function I(a){return a.value.customEmoji}function J(a){return a.value.customEmojiImageUrl}function K(a){return a.value.avatarStickerInstructionKeyId}function L(a){return a.value.avatarStickerId}function M(a){return a.value.avatarStickerThumbnailImageUrl}function N(a){return a.value.avatarStickerThumbnailImageMimeType}function O(a){return a.value.avatarStickerOriginalImageUrl}function P(a){return a.value.avatarStickerOriginalImageMimeType}function Q(a){return a.value.outgoingBubbleColor}function R(a){return a.value.themeFbid}function S(a){return a.value.parentThreadKey}function T(a){return a.value.nullstateDescriptionText1}function U(a){return a.value.nullstateDescriptionType1}function V(a){return a.value.nullstateDescriptionText2}function W(a){return a.value.nullstateDescriptionType2}function X(a){return a.value.nullstateDescriptionText3}function Y(a){return a.value.nullstateDescriptionType3}function Z(a){return a.value.snippetHasEmoji}function $(a){return a.value.hasPersistentMenu}function aa(a){return a.value.disableComposerInput}function ba(a){return a.value.cannotUnsendReason}function ca(a){return a.value.viewedPluginKey}function da(a){return a.value.viewedPluginContext}function ea(a){return a.value.clientThreadKey}function fa(a){return a.value.capabilities}function ga(a){return a.value.shouldRoundThreadPicture}function ha(a){return a.value.proactiveWarningDismissTime}function ia(a){return a.value.isCustomThreadPicture}function ja(a){return a.value.otidOfFirstMessage}function ka(a){return a.value.normalizedSearchTerms}function la(a){return a.value.additionalThreadContext}function ma(a){return a.value.disappearingThreadKey}function na(a){return a.value.isDisappearingMode}function oa(a){return a.value.disappearingModeInitiator}function pa(a){return a.value.unreadDisappearingMessageCount}function qa(a){return a.value.lastMessageCtaId}function ra(a){return a.value.lastMessageCtaType}function sa(a){return a.value.lastMessageCtaTimestampMs}function ta(a){return a.value.consistentThreadFbid}function ua(a){return a.value.threadDescription}function va(a){return a.value.unsendLimitMs}function wa(a){return a.value.capabilities2}function xa(a){return a.value.capabilities3}function ya(a){return a.value.syncGroup}function za(a){return a.value.threadInvitesEnabled}function Aa(a){return a.value.threadInviteLink}function Ba(a){return a.value.isAllUnreadMessageMissedCallXma}function Ca(a){return a.value.numUnreadSubthreads}function Da(a){return a.value.subthreadCount}function Ea(a){return a.value.lastNonMissedCallXmaMessageTimestampMs}function Fa(a){return a.value.isHidden}function Ga(a){return a.value.threadInvitesEnabledV2}function Ha(a){return a.value.joinRequestApprovalSetting}function Ia(a){return a.value.hasPendingJoinRequest}function Ja(a){return a.value.pendingJoinRequestsCount}function Ka(a){return a.value.hasPendingInvitation}function La(a){return a.value.eventStartTimestampMs}function Ma(a){return a.value.eventEndTimestampMs}function Na(a){return a.value.takedownState}function Oa(a){return a.value.memberCount}function Pa(a){return a.value.admodCount}function Qa(a){return a.value.secondaryParentThreadKey}function Ra(a){return a.value.igFolder}function Sa(a){return a.value.inviterId}function Ta(a){return a.value.threadTags}function Ua(a){return a.value.isReadReceiptsDisabled}function Va(a){return a.value.readReceiptsDisabledV2}function Wa(a){return a.value.threadStatus}function Xa(a){return a.value.ctmAdId}function Ya(a){return a.value.ctmAdgroupId}function Za(a){return a.value.ctmAdCampaignId}function $a(a){return a.value.ctmAdCampaignGroupId}function ab(a){return a.value.ctmAdAccountId}function bb(a){return a.value.threadSubtype}function cb(a){return a.value.pauseThreadTimestamp}function db(a){return a.value.metadata}function eb(a){return a.value.capabilities4}function fb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.value.threadKey)},b)}function gb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.messages.index("messageDisplayOrder")).getKeyRange(a.value.threadKey)},b)}function hb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_nullstate).getKeyRange(a.value.threadKey)})}function ib(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(a.value.parentThreadKey)})}function jb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a.value.threadKey)},b)}function kb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.rtc_ongoing_calls_on_threads_v2).getKeyRange(a.value.threadKey)})}function lb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_proactive_warning_settings).getKeyRange(a.value.threadKey)})}function mb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.in_thread_banner).getKeyRange(a.value.threadKey)},b)}function nb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.cutover_threads).getKeyRange(a.value.threadKey)})}function ob(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.custom_thread_commands).getKeyRange(a.value.threadKey)},b)}function pb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.discoverable_chat_participants).getKeyRange(a.value.threadKey)},b)}function qb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.persistent_menu_items).getKeyRange(a.value.threadKey)},b)}function rb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.thread_limits).getKeyRange(a.value.threadKey)})}g.__context=a;g.__lightspeed_table_row=b;g.last_activity_timestamp_ms=c;g.last_read_watermark_timestamp_ms=e;g.snippet=f;g.thread_name=h;g.thread_picture_url=i;g.needs_admin_approval_for_new_participant=j;g.authority_level=k;g.thread_key=l;g.mailbox_type=m;g.thread_type=n;g.folder_name=o;g.thread_picture_url_fallback=p;g.thread_picture_url_expiration_timestamp_ms=q;g.remove_watermark_timestamp_ms=r;g.mute_expire_time_ms=s;g.mute_mention_expire_time_ms=t;g.mute_calls_expire_time_ms=u;g.group_notification_settings=v;g.is_admin_snippet=w;g.snippet_sender_contact_id=x;g.snippet_text=y;g.snippet_string_hash=z;g.snippet_string_argument1=A;g.snippet_attribution=B;g.snippet_attribution_string_hash=C;g.disappearing_setting_ttl=D;g.disappearing_setting_updated_ts=E;g.disappearing_setting_updated_by=F;g.ongoing_call_state=G;g.cannot_reply_reason=H;g.custom_emoji=I;g.custom_emoji_image_url=J;g.avatar_sticker_instruction_key_id=K;g.avatar_sticker_id=L;g.avatar_sticker_thumbnail_image_url=M;g.avatar_sticker_thumbnail_image_mime_type=N;g.avatar_sticker_original_image_url=O;g.avatar_sticker_original_image_mime_type=P;g.outgoing_bubble_color=Q;g.theme_fbid=R;g.parent_thread_key=S;g.nullstate_description_text1=T;g.nullstate_description_type1=U;g.nullstate_description_text2=V;g.nullstate_description_type2=W;g.nullstate_description_text3=X;g.nullstate_description_type3=Y;g.snippet_has_emoji=Z;g.has_persistent_menu=$;g.disable_composer_input=aa;g.cannot_unsend_reason=ba;g.viewed_plugin_key=ca;g.viewed_plugin_context=da;g.client_thread_key=ea;g.capabilities=fa;g.should_round_thread_picture=ga;g.proactive_warning_dismiss_time=ha;g.is_custom_thread_picture=ia;g.otid_of_first_message=ja;g.normalized_search_terms=ka;g.additional_thread_context=la;g.disappearing_thread_key=ma;g.is_disappearing_mode=na;g.disappearing_mode_initiator=oa;g.unread_disappearing_message_count=pa;g.last_message_cta_id=qa;g.last_message_cta_type=ra;g.last_message_cta_timestamp_ms=sa;g.consistent_thread_fbid=ta;g.thread_description=ua;g.unsend_limit_ms=va;g.capabilities_2=wa;g.capabilities_3=xa;g.sync_group=ya;g.thread_invites_enabled=za;g.thread_invite_link=Aa;g.is_all_unread_message_missed_call_xma=Ba;g.num_unread_subthreads=Ca;g.subthread_count=Da;g.last_non_missed_call_xma_message_timestamp_ms=Ea;g.is_hidden=Fa;g.thread_invites_enabled_v2=Ga;g.join_request_approval_setting=Ha;g.has_pending_join_request=Ia;g.pending_join_requests_count=Ja;g.has_pending_invitation=Ka;g.event_start_timestamp_ms=La;g.event_end_timestamp_ms=Ma;g.takedown_state=Na;g.member_count=Oa;g.admod_count=Pa;g.secondary_parent_thread_key=Qa;g.ig_folder=Ra;g.inviter_id=Sa;g.thread_tags=Ta;g.is_read_receipts_disabled=Ua;g.read_receipts_disabled_v2=Va;g.thread_status=Wa;g.ctm_ad_id=Xa;g.ctm_adgroup_id=Ya;g.ctm_ad_campaign_id=Za;g.ctm_ad_campaign_group_id=$a;g.ctm_ad_account_id=ab;g.thread_subtype=bb;g.pause_thread_timestamp=cb;g.metadata=db;g.capabilities_4=eb;g.participants=fb;g.messages=gb;g.nullstate=hb;g.community_folder=ib;g.mi_act_mapping=jb;g.rtc_ongoing_calls=kb;g.thread_proactive_warning_settings=lb;g.in_thread_banner=mb;g.cutover_thread=nb;g.custom_thread_commands=ob;g.discoverable_chat_participants=pb;g.persistent_menu_items=qb;g.thread_limit=rb}),98);
__d("LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Participant_Connection","LS_Participant","LS_Participant","LS_Participant","LS_Contact","LS_Contact","LS_Contact","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:8}];return{kind:"SplitOperation",metadata:{},name:"LSThreadComputedThreadTitle__computed_thread_title$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:8)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"node",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").node,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{name:"contact_id",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact_id,rootFragment:null}},{name:"nickname",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").nickname,rootFragment:null}},{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"first_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").first_name,rootFragment:null}},{name:"name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").name,rootFragment:null}},{name:"rank",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").rank,rootFragment:null}}],storageKey:null}}],storageKey:null}}],storageKey:null}}],storageKey:"participants(first:8)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_name,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadComputedThreadTitle__computed_thread_title.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadComputedThreadTitle__computed_thread_title",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:8}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},action:"THROW",path:"participants.edges.node.contact_id"},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"participants.edges.node.contact.name"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"rank",storageKey:null},action:"THROW",path:"participants.edges.node.contact.rank"}],storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges.node"}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:8)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability$normalization.graphql",["LS_Thread","LS_Thread","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_2,rootFragment:null}},{name:"capabilities_3",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_3,rootFragment:null}},{name:"capabilities_4",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_4,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadHasCapability__has_capability",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},action:"THROW",path:"capabilities"},{kind:"RequiredField",field:{alias:"capabilities2",args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null},action:"THROW",path:"capabilities2"},{kind:"RequiredField",field:{alias:"capabilities3",args:null,kind:"ScalarField",name:"capabilities_3",storageKey:null},action:"THROW",path:"capabilities3"},{kind:"RequiredField",field:{alias:"capabilities4",args:null,kind:"ScalarField",name:"capabilities_4",storageKey:null},action:"THROW",path:"capabilities4"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__other_participant",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context;a=a.value;var c=a.threadKey;a=a.threadType;return!d("LSMessagingThreadTypeUtil").isOneToOne(a)?d("LSRelayLiveResolvers").nullValueLiveState:d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).take(2).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participant=a}),98);
__d("LSThreadIsPage__is_page$normalization.graphql",["LS_Thread__other_participant","LS_Participant","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsPage__is_page$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"other_participant",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__other_participant").other_participant,rootFragment:null}},linkedField:{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"contact_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").contact_type,rootFragment:null}}],storageKey:null}}],storageKey:null}}]};e.exports=a}),null);
__d("LSThreadIsPage__is_page.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadIsPage__is_page",selections:[{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:"contactType",args:null,kind:"ScalarField",name:"contact_type",storageKey:null}],storageKey:null}],storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread$normalization.graphql",["LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsSecureThread__is_secure_thread$normalization",selections:[{kind:"ClientExtension",selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadIsSecureThread__is_secure_thread",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:2}];return{kind:"SplitOperation",metadata:{},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:2)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}}],storageKey:"participants(first:2)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_key",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_key,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:2)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_CommunityFolder",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.folderId}function d(a){return a.value.fbGroupId}function e(a){return a.value.name}function g(a){return a.value.description}function h(a){return a.value.memberCount}function i(a){return a.value.pictureUrl}function j(a){return a.value.pictureUrlFallback}function k(a){return a.value.pictureUrlExpirationTimestampMs}function l(a){return a.value.joiningChannelTaskId}function m(a){return a.value.afterJoiningOpenChannelId}function n(a){return a.value.capabilities}function o(a){return a.value.capabilities2}function p(a){return a.value.capabilities3}function q(a){return a.value.notificationSetting}function r(a){return a.value.notificationMutedUntil}function s(a){return a.value.sendsBlockedUntil}function t(a){return a.value.isHidden}function u(a){return a.value.hasSeenDisablingAlert}function v(a){return a.value.inviteLink}function w(a){return a.value.communityType}function x(a){return a.value.directInviteLink}function y(a){return a.value.enableState}function z(a){return a.value.takedownState}function A(a){return a.value.fbGroupType}function B(a){return a.value.threadCount}function C(a){return a.value.disableTimestamp}function D(a){return a.value.readTimestampMs}function E(a){return a.value.inviteStatus}function F(a){return a.value.blockedFromCommunityMemberCount}function G(a){return a.value.categoryCount}function H(a){return a.value.snippetText}function I(a){return a.value.coverPicUrl}function J(a){return a.value.coverPicUrlFallback}function K(a){return a.value.coverPicUrlExpirationTimestampMs}function L(a){return a.value.invitedThreadId}function M(a){return a.value.fbGroupUserParticipationApprovalStatus}function N(a){return a.value.ccAdminAssistRegistrationStatus}function O(a){return a.value.pauseStatus}function P(a){return a.value.isMember}f.__context=a;f.__lightspeed_table_row=b;f.folder_id=c;f.fb_group_id=d;f.name=e;f.description=g;f.member_count=h;f.picture_url=i;f.picture_url_fallback=j;f.picture_url_expiration_timestamp_ms=k;f.joining_channel_task_id=l;f.after_joining_open_channel_id=m;f.capabilities=n;f.capabilities_2=o;f.capabilities_3=p;f.notification_setting=q;f.notification_muted_until=r;f.sends_blocked_until=s;f.is_hidden=t;f.has_seen_disabling_alert=u;f.invite_link=v;f.community_type=w;f.direct_invite_link=x;f.enable_state=y;f.takedown_state=z;f.fb_group_type=A;f.thread_count=B;f.disable_timestamp=C;f.read_timestamp_ms=D;f.invite_status=E;f.blocked_from_community_member_count=F;f.category_count=G;f.snippet_text=H;f.cover_pic_url=I;f.cover_pic_url_fallback=J;f.cover_pic_url_expiration_timestamp_ms=K;f.invited_thread_id=L;f.fb_group_user_participation_approval_status=M;f.cc_admin_assist_registration_status=N;f.pause_status=O;f.is_member=P}),66);
__d("LS_Contact__has_capability",["LSContactBitOffset","LSContactCapabilityBitOffset","LSContactHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSContactHasCapability__has_capability.graphql"),a);var f=a.capabilities;a=a.capabilities_2;return e!=="%future added value"&&d("LSContactBitOffset").has(c("LSContactCapabilityBitOffset")[e],{capabilities:(e=f)!=null?e:void 0,capabilities2:(f=a)!=null?f:void 0})}g.has_capability=a}),98);
__d("LS_MiActMappingTable",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.serverThreadKey}function d(a){return a.value.clientThreadPk}function e(a){return a.value.jid}f.__context=a;f.__lightspeed_table_row=b;f.server_thread_key=c;f.client_thread_pk=d;f.jid=e}),66);
__d("LS_MiActMappingTable_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread__computed_thread_title",["fbt","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","LSThreadComputedThreadTitle__computed_thread_title.graphql","MWCMIsAnyCMThread","ReactiveExecutorResolverFragments","intlList","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadComputedThreadTitle__computed_thread_title.graphql"),a);var c=a.__context,e=a.participants,f=a.thread_name;a=a.thread_type;return f!=null?f:l(a,e.edges.map(function(a){return a.node}),c.actorID)}function k(a,b){return a.filter(function(a){return(j||(j=d("I64"))).to_string(a.contact_id)!==b}).map(function(a){return a.contact==null?null:{first_name:a.contact.first_name,name:a.contact.name,nickname:a.nickname,rank:a.contact.rank}}).filter(Boolean).sort(function(a,b){return b.rank-a.rank})}function l(a,b,e){if(c("MWCMIsAnyCMThread")(a)){c("recoverableViolation")("community message should not use computed thread title","messenger_comet");return n}if(b.length===0){c("recoverableViolation")("No participants in thread","lightspeed_resolvers");return d("LSMessagingThreadTypeUtil").isGroup(a)?n:m}if(b.length===1){return(a=(a=b[0].contact)==null?void 0:a.name)!=null?a:m}a=k(b,e);var f=a.length>2;b=a.map(function(a){return o(a,f)});a.length>7&&b.push(String(h._("__JHASH__p-5gRHawKL0__JHASH__")));return c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA).toString()}var m=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__WW0S3bu0Fvp__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__PghB4SzSbNm__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__I44_DhMSYWP__JHASH__"):h._("__JHASH__AaE4hJExM0x__JHASH__")).toString(),n=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__2SG6KMU4AFK__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__wXDLgcJTU51__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__Kz0QpoJHutZ__JHASH__"):h._("__JHASH__CGopUYR1PJW__JHASH__")).toString();function o(a,b){var c=a.first_name,d=a.name;a=a.nickname;b===void 0&&(b=!1);if(a!=null)return a;if(c!=null&&b)return c;return d!=null?d:m}g.computed_thread_title=a}),226);
__d("LS_Thread__has_capability",["LSThreadBitOffset","LSThreadCapabilityBitOffset","LSThreadHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadHasCapability__has_capability.graphql"),a);var f=a.capabilities,g=a.capabilities2,i=a.capabilities3,j=a.capabilities4;a=a.threadType;return e!=="%future added value"&&d("LSThreadBitOffset").has(c("LSThreadCapabilityBitOffset")[e],{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,threadType:a})}g.has_capability=a}),98);
__d("LS_Thread__has_messages_ranges_v2",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableDescending(a.tables.messages_ranges_v2__generated).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.computed_has_messages_ranges_v2=a}),98);
__d("LS_Thread__is_cutover_thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.is_cutover_thread=a}),98);
__d("LS_Thread__is_page",["I64","LSContactType","LSIntEnum","LSThreadIsPage__is_page.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsPage__is_page.graphql"),a);a=a.otherParticipant;a=a==null?void 0:(a=a.contact)==null?void 0:a.contactType;return a!=null&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}g.computed_is_page=a}),98);
__d("LS_Thread__is_secure_thread",["LSMessagingThreadTypeUtil","LSThreadIsSecureThread__is_secure_thread.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsSecureThread__is_secure_thread.graphql"),a);a=a.thread_type;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}g.is_secure_thread=a}),98);
__d("LS_Thread__other_participant_or_self",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql","ReQL","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql"),a);var c=a.__context,e=a.participants.edges,f=a.threadKey;a=a.threadType;if(!d("LSMessagingThreadTypeUtil").isOneToOne(a))return d("LSRelayLiveResolvers").nullValueLiveState;var g=c.actorID;return e.length===1?d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f)}):d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f).filter(function(a){a=a.contactId;return(i||(i=d("I64"))).to_string(a)!==g})})}g.other_participant_or_self=a}),98);
__d("LS_Thread__other_participants_MAY_CAUSE_OVERFETCHING",["I64","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context,c=a.value.threadKey;return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participants_MAY_CAUSE_OVERFETCHING=a}),98);
__d("LS_Viewer",["I64","LSFeatureLimitsType","LSIntEnum","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.context.actorID}function b(a){a=a.context;var b=(h||(h=d("I64"))).of_float(Date.now()/1e3);return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.feature_limits).filter(function(a){return k(a)&&(h||(h=d("I64"))).gt(a.expirationTimestampSeconds,b)}).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}var j=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)],k=function(a){return j.some(function(b){return(h||(h=d("I64"))).equal(b,a.type_)})};function e(a){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.user_visible_errors).filter(function(a){return a.presentationStyle==="banner"})})}g.actor_id=a;g.is_read_only_feature_limited=b;g.user_visible_error_banner=e}),98);
__d("LinkFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"m101.888 922.704-.336.336-.058.42a3.218 3.218 0 0 0 2.745 1.527 3.22 3.22 0 0 0 2.284-.943l1.952-1.952c1.16-1.16 1.363-3.026.361-4.325a3.233 3.233 0 0 0-4.848-.321l-1.842 1.843c.204-.032.41-.052.62-.052.46 0 .904.081 1.324.228l.923-.923c.584-.584 1.51-.72 2.198-.266a1.731 1.731 0 0 1 .283 2.676l-1.997 1.997c-.416.415-1.012.636-1.587.516a1.765 1.765 0 0 1-1.172-.846.956.956 0 0 0-.85.085",transform:"translate(352.5 157)"}),i.jsx("path",{d:"m105.09 922.294.346-.346.058-.433a3.257 3.257 0 0 0-.45-.56 3.23 3.23 0 0 0-2.59-.939c-.792.07-1.522.462-2.084 1.024l-1.82 1.819c-1.293 1.292-1.367 3.482-.044 4.744a3.235 3.235 0 0 0 2.24.895c.831 0 1.662-.316 2.295-.949l1.848-1.848c-.223.038-.448.06-.673.06a4 4 0 0 1-1.29-.218l-.91.91c-.589.589-1.523.727-2.218.269a1.75 1.75 0 0 1-.287-2.703l2.002-2.002a1.754 1.754 0 0 1 2.466-.007c.12.12.17.18.25.323.245.146.57.147.862-.039",transform:"translate(352.5 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2898");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_primary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2899");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_secondary_action_tapped",a);e=b;g["default"]=e}),98);
__d("LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("2900");b=d("FalcoLoggerInternal").create("ls_frx_messenger_feedback_proactive_warning_banner_shown",a);e=b;g["default"]=e}),98);
__d("LsReplyRenderedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743878");b=d("FalcoLoggerInternal").create("ls_reply_rendered",a);e=b;g["default"]=e}),98);
__d("MAWCreateGroupThread",["fbt","I64","LSFactory","LSIssueNewErrorStoredProcedure","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","WAJobOrchestratorTypes","asyncToGeneratorRuntime","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,e=a.deduplicationKey,g=a.isDualSend;g=g===void 0?!1:g;var j=a.offlineThreadingId,k=a.participantIds;a=a.threadName;j=j!=null?(i||(i=d("I64"))).to_string(j):void 0;var l="msgr";e=(yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("createGroup",{extras:{clientThreadKey:j,deduplicationKey:e,isDualSend:g,platform:l},key:j,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},subject:a,uniqKey:j,users:k})));a=e.error;j=e.value;if(a==null&&j!=null&&j.type===l)return{created:!0,jid:j.chatJid};if(!g){var m=h._("__JHASH__Q8EKHlLB3en__JHASH__").toString();c("promiseDone")(b.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:m,errorTitleText:m})},"readwrite",void 0,void 0,f.id+":78"))}throw c("unrecoverableViolation")("Unable to create group","maw_threads")});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deduplicationKey;if(b==null)return j(a);b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByDeduplicationKey",{deduplicationKey:b}));return b!=null?{created:!1,jid:b.jid}:j(a)});return l.apply(this,arguments)}g["default"]=a}),226);
__d("MAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWMsgReplySnippet","MessagingAttachmentType","QPLUserFlow","ReQL","asyncToGeneratorRuntime","gkx","isMWBumpMessage","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(e==null)return[void 0,void 0];var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,e.timestampMs,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:f});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:f});return[g,a]});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b)));return a==null?void 0:a.firstName});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null)return;var f=c("isMWBumpMessage")(b)&&b.replyToUserId!=null?b.replyToUserId:b.senderId;a=(yield l(a,f));return(b=d("MAWMsgReplySnippet").buildLocalizedReplySnippet({isAuthorMe:!0,isDeletedMsg:b.replyStatus===c("LSReplyMessageStatus").DELETED,recipientName:a,replySenderIsMe:(h||(h=d("I64"))).equal(f,e)}))==null?void 0:b.toString()});return o.apply(this,arguments)}function p(a){if(a==null)return;var b=a.attachmentType;return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?a.previewUrl:void 0}function q(a){if(a!=null){if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);return(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER)}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,o,r,s,t){var u=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_get_reply",l,function(){return j(b,h,f,l)})),v=u[0];u=u[1];g=d("MAWBridgeBuildMsg").buildOptimisticMessage(g,v,m);m=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_reply_snippet",l,function(){return n(a,v,e)}));g=babelHelpers["extends"]({},g,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(s),hasQuickReplies:!1,hotEmojiSize:k,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:o,offlineThreadingId:c("gkx")("23990")&&t!=null?t:o,primarySortKey:r,quickReplyType:i.ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:q(u),replyMediaPreviewHeight:u==null?void 0:u.previewHeight,replyMediaPreviewWidth:u==null?void 0:u.previewWidth,replyMediaUrl:p(u),replyMediaUrlMimeType:u==null?void 0:u.playableUrlMimeType,replySnippet:m,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:i.ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:r,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)});return g});return r.apply(this,arguments)}g.buildOptimisticLsMessage=a}),98);
__d("MAWOptimisticMessageUtils",["I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","MAWAckLevel","MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWBumpThread","MAWLocalizationType","MAWMsgType","MessagingAttachmentType","WAJids","WATimeUtils","asyncToGeneratorRuntime","cr:2472","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("WATimeUtils").millisTime()}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.hotEmojiSize,g=e.mentionedJids,j=e.messageText,l=e.senderId,m=e.threadKey;e=e.ts;j=b("cr:2472")==null?j:b("cr:2472").unvault(j);f=f!=null&&(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&j==="\ud83d\udc4d";f=f?"(Y)":k(j,g);j=d("MAWAdminMsg").buildLocalizedString([f],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWOptimisticMessageUtils",lastActivityTs:e,lastReadTs:e,snippet:j,snippetSenderContactId:l,threadKey:m,txn:a})});return j.apply(this,arguments)}function k(a,b){b=d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(a,b,[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);var c=b[0];b[1];return(b=c)!=null?b:a}function f(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.optimisticMediaAttachment,e=b.senderId,f=b.threadKey;b=b.timestampMsI64;c=p(c.type);c!=null&&(yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWCreateOptimisticSecureMessageWithAttachment",lastActivityTs:b,lastReadTs:b,snippet:c,snippetSenderContactId:e,threadKey:f,txn:a}))});return l.apply(this,arguments)}function m(a){var b=a.ephemeralSettings,c=a.externalId,e=a.threadJid;a=a.ts;return{ack:d("MAWAckLevel").ACK.partialOptimistic,altIndex:void 0,author:d("WAJids").AUTHOR_ME,ephemeralSetting:(b=b)!=null?b:void 0,externalId:c,isForwarded:!1,specialTextSize:void 0,threadJid:e,ts:d("WATimeUtils").castMilliSecondsToUnixTime(a)}}function n(a){var b=a.content,c=a.initiatingSource,d=a.isFirstMsg,e=a.optimisticMsg,f=a.quote,g=a.specialTextSize;a=a.threadSource;return{content:b,initiatingSource:c,isFirstMsg:d,isForwarded:!1,openMessageOtid:void 0,openMessageParticipantCount:void 0,optimisticMsg:e,participantCount:void 0,quote:f,source:a,specialTextSize:g}}function o(a){var b,e=a.optimisticMediaAttachment,f=a.threadKey,g=a.timestampMsI64;b={attachmentFbid:a.offlineAttachmentId,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(b=a.attachmentType)!=null?b:void 0,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),filename:e.filename,filesize:c("gkx")("4798")?(h||(h=d("I64"))).of_float(e.file.size):void 0,hasMedia:!0,hasXma:!1,isSharable:!1,messageId:a.messageExternalId,offlineAttachmentId:a.offlineAttachmentId,previewUrl:e.url,threadKey:f,timestampMs:g,transportKey:"WhatsApp"};if(e.type==="image"||e.type==="animated_image"||e.type==="video"||e.type==="sticker"){b=babelHelpers["extends"]({},b,{previewHeight:((a=e.thumbnailSpec)==null?void 0:a.height)?(h||(h=d("I64"))).of_float((f=e.thumbnailSpec)==null?void 0:f.height):void 0,previewWidth:((g=e.thumbnailSpec)==null?void 0:g.width)?(h||(h=d("I64"))).of_float((a=e.thumbnailSpec)==null?void 0:a.width):void 0})}return b}function p(a){switch(a){case"animated_image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_GIF);case"image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);case"sticker":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_STICKER);default:return null}}function q(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER):return d("MAWMsgType").MSG_TYPE.STICKER;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):return d("MAWMsgType").MSG_TYPE.IMAGE;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE):return d("MAWMsgType").MSG_TYPE.GIF;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):return d("MAWMsgType").MSG_TYPE.VIDEO;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):return d("MAWMsgType").MSG_TYPE.PTT;default:return d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}}function r(a){if(a==null)return;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}g.getOptimisticMessageTimestamp=a;g.optimisticBumpThread=e;g.optimisticBumpThreadMedia=f;g.buildMAWOptimisticBaseMsg=m;g.buildMAWBaseSendMsgArgs=n;g.buildOptimisticAttachment=o;g.lsAttachmentTypeToMsgType=q;g.getSpecialTextSize=r}),98);
__d("MAWCreateOptimisticSecureMessageWithAttachment",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","QPLUserFlow","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l,m){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,k,l,m,n,o,p){m(o);m=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp();var q=(h||(h=d("I64"))).of_float(m);a=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,f,"",g,void 0,l,void 0,o,q,j(k.type)));f=p==null?void 0:p.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i));f!=null&&(a=babelHelpers["extends"]({},a,{groupId:f.groupId,groupIndex:(h||(h=d("I64"))).of_float(f.groupIndex),groupSize:h.of_float(f.groupSize)}));yield b.messages.add(a);p=d("MAWOptimisticMessageUtils").buildOptimisticAttachment({attachmentType:n,messageExternalId:o,offlineAttachmentId:i,optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});yield b.attachments.add(p);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:l});yield d("MAWOptimisticMessageUtils").optimisticBumpThreadMedia(b,{optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});return{messageExternalId:o,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i),offlineMsgTimestamp:m}});return i.apply(this,arguments)}function j(a){switch(a){case"animated_image":return 16384;case"image":return 2;case"video":return 2;case"audio":return 4;case"document":return 64;case"sticker":return 4096;default:return 1}}g.createOptimisticMessageWithAttachment=a}),98);
__d("MAWDeferredUserVisibleErrorsNuxWrapper.react",["deferredLoadComponent","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||c("react"),j=c("deferredLoadComponent")(c("requireDeferred")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MAWDeferredUserVisibleErrorsNuxWrapper.react"));function a(a){var b=a.children;a=a.hasNoMargin;return i.jsx(j,{children:b,hasNoMargin:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageRangeDataSource",["I64","LSDatabaseSingleton","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureLocalDBFetch","MLV2DataSourceLogger","MessageRangeSet","Promise","asyncToGeneratorRuntime","findMsgsWithMinAndMaxTimestamp","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=function(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.getOrCreateMessageRangeCoveringCursor=function(a,b){b==null?void 0:b.annotateMessageRangesDataSource("MAWMessageRangeDataSource");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_start");var c=e.$2.getRangeForTimestamp(a.timestampMs);if(c!=null){b==null?void 0:b.markQPLPoint("maw_preexisting_range");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return c}c=(j||(j=d("I64"))).equal(a.timestampMs,j.max_int);c={hasMoreAfter:!c,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(c=a.messageId)!=null?c:"",minTimestampMs:a.timestampMs,threadKey:e.$1};a=e.$2.upsertRange(c);b==null?void 0:b.markQPLPoint("maw_range_created");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return a};this.extendRange=function(a,c){var f=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,c);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){f==null?void 0:f.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}var g=a.value;if(c==="asc"&&(!g.hasMoreAfter||g.isLoadingAfter)){f==null?void 0:f.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}if(c==="desc"&&(!g.hasMoreBefore||g.isLoadingBefore)){f==null?void 0:f.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},g,{isLoadingAfter:g.isLoadingAfter||c==="asc",isLoadingBefore:g.isLoadingBefore||c==="desc"}));return e.$3(a.value,c)};this.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var f=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b);f==null?void 0:f.markQPLPoint("maw_wait_act_thread_start");var g=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady((yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton).tables,e.$1,"MAWMessageRangeDataSourceForThread"));g=g.chatJid;f==null?void 0:f.markQPLPoint("maw_wait_act_thread_end");f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_start");var h=(yield c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:g,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:20,direction:l(b),offsetMsg:{includeOriginalMsg:!0,messageId:b==="asc"?a.maxMessageId:a.minMessageId},timestampMs:b==="asc"?a.maxTimestampMs:a.minTimestampMs}));f==null?void 0:f.markQPLPoint("insert_msgs_to_lsdb_start");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(yield i.LSDatabaseSingleton,h);f==null?void 0:f.markQPLPoint("insert_msgs_to_lsdb_end");f==null?void 0:f.markQPLPoint("maw_upsert_range_start");g=c("findMsgsWithMinAndMaxTimestamp")(h.msgs);var k=g[0],m=g[1];g=babelHelpers["extends"]({},a,function(){var c;switch(b){case"asc":return{hasMoreAfter:h.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(c=m==null?void 0:m.msgId)!=null?c:a.maxMessageId,maxTimestampMs:(j||(j=d("I64"))).max(a.maxTimestampMs,(m==null?void 0:m.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(m==null?void 0:m.sortOrderMs):a.maxTimestampMs)};case"desc":return{hasMoreBefore:h.hasMoreBefore,isLoadingBefore:!1,minMessageId:(c=k==null?void 0:k.msgId)!=null?c:a.minMessageId,minTimestampMs:(j||(j=d("I64"))).min(a.minTimestampMs,(k==null?void 0:k.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(k==null?void 0:k.sortOrderMs):a.minTimestampMs)}}}());e.$2.upsertRange(g);f==null?void 0:f.markQPLPoint("maw_upsert_range_end")});return function(b,c){return a.apply(this,arguments)}}();this.$1=a};a=function(){function a(){var a=this;this.$1=new Map();this.getOrCreateMessageRangeCoveringCursor=function(b,c){var d=b.threadKey;return a.$2(d).getOrCreateMessageRangeCoveringCursor(b,c)};this.extendRange=function(b,c){var d=b.threadKey;return a.$2(d).extendRange(b,c)}}var b=a.prototype;b.$2=function(a){var b=(j||(j=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new k(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}();function l(a){switch(a){case"asc":return"after";case"desc":return"before";case"point":return"point";default:return"point"}}e=new a();g["default"]=e}),98);
__d("combineLatestWith",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("relay-runtime").Observable.create(function(a){var c=new Set(b),d=new Set(b),e=b.map(function(){return void 0}),f=b.map(function(b,f){return b.subscribe({complete:function(){d["delete"](b),d.size===0&&a.complete()},error:a.error,next:function(d){e[f]=d,c["delete"](b),c.size===0&&a.next(e)}})});return function(){f.forEach(function(a){return a.unsubscribe()})}})}g["default"]=a}),98);
__d("MAWEBCombinedRangeDataSource",["EBMessageRangeDataSource","I64","MAWMessageRangeDataSource","Promise","asyncToGeneratorRuntime","combineLatestWith","err","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(a==null&&b==null)throw c("err")("Expected non-null minrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}e=(i||(i=d("I64"))).ge((e=a==null?void 0:a.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int,(e=b==null?void 0:b.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int)?a:b;return e.hasMoreBefore===!1?{minMessageId:(i||(i=d("I64"))).le(a.minTimestampMs,b.minTimestampMs)?a.minMessageId:b.minMessageId,minTimestampMs:(i||(i=d("I64"))).min(a.minTimestampMs,b.minTimestampMs)}:{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}function k(a,b){if(a==null&&b==null)throw c("err")("Expected non-null maxrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}e=(i||(i=d("I64"))).le(a.maxTimestampMs,b.maxTimestampMs)?a:b;return e.hasMoreAfter===!1?{maxMessageId:(i||(i=d("I64"))).ge(a.maxTimestampMs,b.maxTimestampMs)?a.maxMessageId:b.maxMessageId,maxTimestampMs:(i||(i=d("I64"))).max(a.maxTimestampMs,b.maxTimestampMs)}:{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}var l=function(a){var d=this;this.getOrCreateMessageRangeCoveringCursor=function(a,b){b==null?void 0:b.annotateMessageRangesDataSource("MAWEBCombinedRangeDataSource");var e=c("MAWMessageRangeDataSource").getOrCreateMessageRangeCoveringCursor(a,b);b=c("EBMessageRangeDataSource")(d.$1).getOrCreateMessageRangeCoveringCursor(a,b);return c("combineLatestWith")(e,b).map(function(b){var c=b[0];b=b[1];var d=k(c,b),e=j(c,b);return{hasMoreAfter:Boolean((c==null?void 0:c.hasMoreAfter)||(b==null?void 0:b.hasMoreAfter)),hasMoreBefore:Boolean((c==null?void 0:c.hasMoreBefore)||(b==null?void 0:b.hasMoreBefore)),isLoadingAfter:Boolean((c==null?void 0:c.isLoadingAfter)||(b==null?void 0:b.isLoadingAfter)),isLoadingBefore:Boolean((c==null?void 0:c.isLoadingBefore)||(b==null?void 0:b.isLoadingBefore)),maxMessageId:d.maxMessageId,maxTimestampMs:d.maxTimestampMs,minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs,threadKey:a.threadKey}})};this.extendRange=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (h||(h=b("Promise"))).all([c("EBMessageRangeDataSource")(d.$1).extendRange(a,e),c("MAWMessageRangeDataSource").extendRange(a,e)])});return function(b,c){return a.apply(this,arguments)}}();this.$1=a},m,n;function a(a){(m==null||n!==a)&&(n=a,m=new l(a));return m}g["default"]=a}),98);
__d("MAWFetchExternalAttachmentBlob",["asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield window.fetch(a,{}).then(function(a){return a.blob()})["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_external_attachment_failed");throw a}));return a});return h.apply(this,arguments)}g.fetchExternalAttachmentBlob=a}),98);
__d("MAWLinkPreviewDataStatusUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.linkPreviewDataStatusIsOfType=a}),98);
__d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){var c=b.offlineQueueCount,e=b.offlineQueueSyncState;b=b.offlineQueueThreadStatus;return a!=null&&Object.keys(b).length>0?b[a]!=null&&b[a].chatStatus!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:c>0&&e!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}};g.outstandingUIReadyOfflineQueueSelector=a}),98);
__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WAJids","WATagsLogger","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicated thread creation for ",""]);j=function(){return a};return a}function k(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite",void 0,void 0,f.id+":45")}function l(a,b,e,f){var g=e.actorId;e=e.participantIds;var j=e.filter(function(a){return a!==(i||(i=d("I64"))).to_string(g)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)){var k=j.length===1?j:e;return d("MAWCreateOneToOneThread").call(a,(i||(i=d("I64"))).of_string(k[0]),i.to_string(b.threadKey),f)}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&j.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",(i||(i=d("I64"))).to_string(b.threadKey),e.length,(h||(h=d("LSIntEnum"))).toNumber(b.threadType))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData({description:b,fbid:a.serverThreadKey,isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType),jid:a.jidInt64,lastActivityTimestampMs:a.thread.lastActivityTimestampMs,lastReadWatermarkTimestampMs:a.thread.lastReadWatermarkTimestampMs}));return{created:b.isCreated,jid:b.chatJid}});return n.apply(this,arguments)}function o(a,b){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.thread.threadType))return null;var c=b.actorId;b=b.participantIds;b=b.filter(function(a){return a!==(i||(i=d("I64"))).to_string(c)});if(b.length!==1)return null;b=b[0];return{jid:d("WAJids").unsafeCoerceToChatJid(b+"@msgr"),jidInt64:(i||(i=d("I64"))).of_string(b),serverThreadKey:a.thread.threadKey,thread:a.thread,type:"AUTHORITATIVE_THREAD_ONLY"}}var p=new Map(),q=new Set();function a(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,g));f!=null&&d("sendToSentQPLLogger").addSendToSentAnnotations(f,{string:{miActThreadState:h.type.toString()}});switch(h.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.ACT_THREAD_ONLY:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield k(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",(i||(i=d("I64"))).to_string(b),h.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:f=o(h,e);if(f!=null){q.has(f.jid)&&d("WATagsLogger").TAGS(["occamadillo","retry_create_thread"]).LOG(j(),f.jid);q.add(f.jid);return m(f,g)}else throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",(i||(i=d("I64"))).to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:f=(i||(i=d("I64"))).to_string(b);var n=p.get(f);if(n!=null)return n;n=l(a,h.thread,e,g);p.set(f,n);return n;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:yield k(a,b);return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return m(h,g);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state %s for threadKey:\n        %s",h.type,(i||(i=d("I64"))).to_string(b));default:h.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",h.type)}});return r.apply(this,arguments)}g["default"]=a}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","MWPIsUserContact","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;f=(f=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,g)}))))!=null?f:[void 0,void 0];f[0];f=f[1];if(f==null)return;if(d("MWPIsUserContact").isUserContact(f)&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&c("gkx")("4812"))return;var i=babelHelpers["extends"]({},f,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([f.id],i);d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:f.id}))});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":41"))}g.call=a}),98);
__d("MAWParseLinkPreviewXMAData",["E2EELinkPreviewXMADataStatus","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a==null?void 0:a.status,e=a==null?void 0:a.data;if(a==null||b==null||e==null)return null;a=(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("E2EELinkPreviewXMADataStatus").DISABLED));b=JSON.parse(e);return Object.keys(b).length===0||b.url==null||a?null:b}g.parseLinkPreviewXMAData=a}),98);
__d("MAWPrepareAttachmentsFromMediaManager",["MAWExternalId","MAWSendFileMsgTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=b.hasFile,g=b.hasImage;b=b.hasVideo;var h=null;if(b||g||f){b=a[a.length-1];h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)}else h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId());c(h);g=a.reduce(function(a,b){var c=e.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId));c!=null&&a.push([c,d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)]);return a},[]);return{attachmentOfflineId:h,attachments:g}}g.prepareAttachmentsFromMediaManagerImpl=a}),98);
__d("MAWSecureThreadNonAddressableContactBannerCloseButton.react",["MWXPressable.react","fbs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.onPress;return i.jsx("div",{className:"x1923su1 x10l6tqk xfr5jun x1vjfegm",children:i.jsx(c("MWXPressable.react"),{"aria-label":c("fbs")._("__JHASH__cwU_O5_fD5E__JHASH__"),onPress:a,overlayRadius:"50%",children:i.jsxs("svg",{height:"18px",viewBox:"0 0 24 24",width:"18px",children:[i.jsx("title",{children:c("fbs")._("__JHASH__lJTlDYURTnq__JHASH__")}),i.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"6",y2:"18"}),i.jsx("line",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",x1:"6",x2:"18",y1:"18",y2:"6"})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useHasNonAddressableParticipantWAI",["CurrentMessengerUser","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","ODS","ReQL","ReQLSuspense","TemporaryLoggingUtilsForS406998Only","WAJids","WALogger","asyncToGeneratorRuntime","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_reachable_with_no_wai_devices in "," (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_not_reachable_with_wai_devices in "," (",")"]);n=function(){return a};return a}var o=(l||d("react")).useState;function a(a){var e=a.isComposerBlocked,g=a.isGroup,l=a.threadKey,p=(h||(h=c("useReStore")))();a=o(null);var q=a[0],r=a[1],s=d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(p.tables.participants,["contactId"]).getKeyRange(l),d("ReQL").fromTableAscending(p.tables.contacts)).map(function(a){var b=a[0].contactId;a=a[1];return(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))?d("WAJids").toMsgrUserJid((i||(i=d("I64"))).to_string(b)):null}).filter(Boolean)},[p,l],f.id+":48");d("Int64Hooks").useEffectInt64(function(){c("gkx")("483")&&(s.forEach(function(a){var e=a.split("@")[0];d("TemporaryLoggingUtilsForS406998Only").isStanzaIdForS406998Only(e)&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(i||(i=d("I64"))).of_string(e),f=(yield p.tables.threads.get(l)),h=(yield p.tables.contacts.get(b));b=(yield p.tables.participants.index("contactIdThreadKey").get(b,l));f=f==null?void 0:f.authorityLevel;h=h==null?void 0:h.authorityLevel;b=b==null?void 0:b.authorityLevel;c("FBLogger")("messenger_e2ee_web","invalid_participant_id").mustfix("[S406998] invalid participant %s. threadKey: %s. isGroup: %s. count: %s. threadAuthLevel: %s. contactAuthLevel: %s. participantAuthLevel: %s",a,i.to_string(l),g,s.length,f?(i||(i=d("I64"))).to_string(f):"",h?(i||(i=d("I64"))).to_string(h):"",b?(i||(i=d("I64"))).to_string(b):"")})())}),c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWAIDevices",{users:s}).then(function(a){var b=!1;for(var c of s){var f;if(!a.has(c)){b=!0;break}else if(((f=a.get(c))==null?void 0:f.length)===0){b=!0;break}}f=g?"group":"1:1";a=d("CurrentMessengerUser").isTestUser()?"test user":"prod user";e&&!b?((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_not_reachable_with_wai_devices in "+f+" ("+a+")"),d("WALogger").DEV(n(),f,a)):!e&&b&&((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_reachable_with_no_wai_devices in "+f+" ("+a+")"),d("WALogger").DEV(m(),f,a));r(b)})))},[p.tables.contacts,p.tables.participants,p.tables.threads,e,g,l,s]);return q}g.useHasNonAddressableParticipantWAI=a}),98);
__d("useMAWNonAddressableParticipant",["I64","LSAuthorityLevel","LSIntEnum","LSWhatsAppConnectStatus","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b,e,g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("ReQLSuspense").useFirst(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(g.tables.contacts,["waConnectStatus","authorityLevel","id","name","firstName"])).filter(function(a){a[0];a=a[1];if((h||(h=d("I64"))).equal(a.waConnectStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))&&(h||(h=d("I64"))).ge(a.authorityLevel,(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT)))return!(h||(h=d("I64"))).equal(a.id,k);else return!1}).map(function(a){a[0];a=a[1];return a})},[g,a,k],f.id+":29");b=((b=l==null?void 0:l.firstName)!=null?b:"")===""?null:l==null?void 0:l.firstName;e=((e=l==null?void 0:l.name)!=null?e:"")===""?null:l==null?void 0:l.name;e=(b=(b=b)!=null?b:e)!=null?b:"recipient";return[l!=null,e]}g["default"]=a}),98);
__d("MAWSecureThreadNonAddressableContactBanner.react",["fbt","IntlVariations","LSMessagingThreadTypeUtil","MAWSecureThreadNonAddressableContactBannerCloseButton.react","MWXRow.react","MWXRowItem.react","MWXText.react","fbs","react","useHasNonAddressableParticipantWAI","useMAWNonAddressableParticipant"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useState;function a(a){var b=a.setHideComposerEditor;a=a.thread;var e=c("useMAWNonAddressableParticipant")(a.threadKey),f=e[0];e=e[1];d("useHasNonAddressableParticipantWAI").useHasNonAddressableParticipantWAI({isComposerBlocked:f,isGroup:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),threadKey:a.threadKey});f=f;var g=l(!1),i=g[0],m=g[1];g=k(function(){return m(!0)},[m]);var n=d("LSMessagingThreadTypeUtil").isGroup(a.threadType);i=n?!i:!0;var o=f&&i;b(function(){if(o)return!n;else return!1});f=c("IntlVariations").GENDER_UNKNOWN;i=h._("__JHASH__9vfr7-Uns9r__JHASH__",[h._name("message recipient name",e,f)]);b=h._("__JHASH__J_HXGmiXLis__JHASH__",[h._name("message recipient name",e,f)]);if(o)return j.jsxs("div",{className:"x1exxf4d x13fuv20 x178xt8z x1n2onr6 x1ja2u2z",children:[n?j.jsx(c("MAWSecureThreadNonAddressableContactBannerCloseButton.react"),{onPress:g}):null,j.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingVertical:12,spacingVertical:0,testid:void 0,children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"primary",type:"headlineEmphasized4",children:d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?c("fbs")._("__JHASH___yUMmqEez-U__JHASH__"):i})})}),j.jsx(c("MWXRow.react"),{align:"center",expanding:!0,paddingTop:4,paddingVertical:16,spacingVertical:4,testid:void 0,children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:d("LSMessagingThreadTypeUtil").isGroup(a.threadType)?c("fbs")._("__JHASH__ixaC9ybh3Q8__JHASH__"):b})})})]});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","WABridgedAPI","WAChatState","WAJids","asyncToGeneratorRuntime","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!(j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(15)))return(i||(i=b("Promise"))).resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e).filter(function(a){return!(j||(j=d("I64"))).equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(f.contactId)));return e==null?!1:(j||(j=d("I64"))).equal(e.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return m.apply(this,arguments)}var n=[];function a(a,e,g){var m=(h||(h=c("useReStore")))(),o=d("MWPActor.react").useActor(),p=(j||(j=d("I64"))).to_string(e),q=c("MessengerWebUXLogger").useInteractionLogger(),r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(m.tables.participants,["contactId"]).getKeyRange(e).map(function(a){return d("WAJids").toMsgrUserJid((j||(j=d("I64"))).to_string(a.contactId))})},[m,e],f.id+":87");return d("Int64Hooks").useCallbackInt64(function(f){(j||(j=d("I64"))).ge(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&(c("gkx")("24137")&&d("LSMessagingThreadTypeUtil").isGroup(g)&&!n.includes(p)&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,b){n.push(p);return c("WABridgedAPI").preEstablishSession({groupJid:d("WAJids").toGroupJid(b),userJids:r}).then(function(){})})),c("promiseDone")(l(m,e,g,o).then(function(a){return!a?(i||(i=b("Promise"))).resolve():d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,c){q==null?void 0:q({eventName:"send_typing_indicators",threadKey:e,threadType:g});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{chatJid:c,state:f?d("WAChatState").TYPING:d("WAChatState").IDLE});return(i||(i=b("Promise"))).resolve()})})))},[m,r,a,e,g,o,p,q])}g.useOnTypingStateChanged=a}),98);
__d("MAWSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";a=["*/*"];f.supportedFileTypes=a}),66);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:9249","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9249")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","MWXVideoStatusListener.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i,l=k.useEffect,m=k.useRef,n={cancelButton:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginEnd:"xq8finb",position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{start:"xtzzx4i",left:null,right:null,marginStart:"x16hk5td",marginTop:"x7wgvq7",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function o(a){var b=a.hasError;b=b===void 0?!1:b;a=a.progress;if(a===1||a==null)return null;var c=4;b=b?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=(c/2).toString();d="M 0,"+d+" L 100,"+d;return j.jsxs("svg",{"aria-hidden":!0,className:"x168nmei x13lgxp2 x30kzoy x9jhf4c x1ey2m1c x17qophe x10l6tqk xh8yej3",preserveAspectRatio:"none",style:{height:c.toString()},viewBox:"0 0 100 "+c.toString(),children:[j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:c.toString()}),j.jsx("path",{d:d,stroke:b,strokeLinecap:"round",strokeWidth:(a===0?0:c).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-a).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.children,e=a.hasError;e=e===void 0?!1:e;var f=a.onCancel,g=a.progress;a=a.testid;return j.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,style:n.card,children:[j.jsxs(d("react-strict-dom").html.div,{style:n.contentWrapper,children:[b,j.jsx(o,{hasError:e,progress:g})]}),f!=null&&j.jsx(d("react-strict-dom").html.div,{style:n.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__a2BigkmhfXY__JHASH__"),onPress:f,size:24,type:"overlay"})})]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.hasError;b=b===void 0?!1:b;var d=a.onCancel,e=a.onError,f=a.onLoad,g=a.progress;a=a.src;return j.jsx(p,{hasError:b,onCancel:d,progress:g,testid:void 0,children:j.jsx(c("MWXImage.react"),{objectFit:"contain",onError:e,onLoad:f,src:a,xstyle:n.imagePreview})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onError,g=a.onLoad,h=a.progress;a=a.src;var i=m(null);return j.jsxs(p,{hasError:b,onCancel:e,progress:h,testid:void 0,children:[j.jsx(c("MWXVideoStatusListener.react"),{onError:f,onLoad:g,videoRef:i}),j.jsx("video",{className:"xl1xv1r",height:"48",ref:i,src:a,width:"48"}),j.jsx(d("react-strict-dom").html.div,{style:n.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onLoad,g=a.progress;a=a.title;l(function(){f==null?void 0:f()},[f]);return j.jsx(p,{hasError:b,onCancel:e,progress:g,testid:void 0,children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:j.jsxs(d("react-strict-dom").html.div,{style:n.filePreview,children:[j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),size:20}),j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]})})})}e.displayName=e.name+" [from "+f.id+"]";function q(a){var b=a.isDisabled;a=a.onPress;var d=h._("__JHASH__07aSX1Sv-Xl__JHASH__");return j.jsx(p,{children:j.jsx(c("MWXPressable.react"),{"aria-label":d,disabled:b,onPress:a,testid:void 0,xstyle:n.imagePreview,children:j.jsx(c("MWXIconStrict.react"),{color:b?"disabled":"primary",icon:c("MWXIconPhotoPlus"),size:24})})})}q.displayName=q.name+" [from "+f.id+"]";g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=q}),226);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=a.children,c=a["data-testid"];c=a.padding;c=c===void 0?0:c;var e=a.scrollable;a=a.xStyle;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.row,c===12&&j.padding12,c===4&&j.padding4,c===6&&j.padding6,e===!0&&j.scrollable,a],children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={body:{alignItems:"x6s0dn4",paddingBottom:"x1120s5i",paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,paddingEnd:"xmns6w2",paddingTop:"xz9dl7a",$$css:!0},border:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},rightAddon:{marginStart:"x1gryazu",$$css:!0}},k={color:"secondary",size:24};function a(a){var b=a.bodyText,e=a.bodyTextType,f=a["data-testid"];f=a.hasTopBorder;f=f===void 0?!1:f;var g=a.headlineText,h=a.headlineTextType,l=a.leftAddon,m=a.level;m=m===void 0?3:m;var n=a.loadingIndicator,o=a.rightAddon;a=a.subtext;return n!=null?i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body],children:n}):i.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body,f&&j.border],children:[l!=null&&l,(b!=null||a!=null||g!=null)&&i.jsx(c("MWXTextPairing.react"),{body:b!=null&&e!=null?i.jsx(c("MWXText.react"),{type:e,children:b}):b!=null?i.jsx(c("MWXText.react"),{type:"body4",children:b}):void 0,headline:g!=null&&h!=null?i.jsx(c("MWXText.react"),{type:h,children:g}):g!=null?i.jsx(c("MWXText.react"),{type:"headline4",children:g}):void 0,level:m,meta:a}),o!=null&&i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{style:j.rightAddon,children:o})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={horizontalPaddingSmall:{paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,paddingEnd:"xg83lxy",$$css:!0},layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0}};b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.size,g=a.type;g=g===void 0?"deemphasized":g;var h=a.wrapperStyle,l=a.wrapperXStyle,m=babelHelpers.objectWithoutPropertiesLoose(a,["color","size","type","wrapperStyle","wrapperXStyle"]),n=j(c("MWXComposerButtonContext.react")),o=n.color,p=n.iconRatio;p=p===void 0?"medium":p;var q=n.paddingHorizontal;q=q===void 0?"none":q;n=n.size;n=n===void 0?36:n;return i.jsx(d("react-strict-dom").html.div,{style:[q==="small"&&k.horizontalPaddingSmall,k.layoutWrapper,[l,h]],children:i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a.label,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},m,{color:(l=(q=e)!=null?q:o)!=null?l:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),iconRatio:p,ref:b,size:(h=f)!=null?h:n,type:g}))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={colors:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},k={iconRatio:"large",paddingHorizontal:"none",size:28};function a(a){var b=a.children;a=a.header;return i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsxs(d("react-strict-dom").html.div,{style:[j.colors,j.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{padding:4,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding:{marginBottom:"x12nagc",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.children,e=a.contentEditableProps,f=a.placeholderText;a=a.testid;f=f==null?{}:{"aria-placeholder":f,placeholder:i.jsx(c("CometLexicalPlaceholder.react"),{children:f})};a=i.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({tabIndex:0,webDriverTestID:a},f,e));return i.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:j.padding,children:[i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:a}),b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerTextEditor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,paddingEnd:"x150jy0e",$$css:!0}};function a(a){var b=a.children,e=a.editor,f=a.header;a=a.testid;var g=d("LexicalComposerContext").createLexicalComposerContext();a=j(function(){return[e,g]},[e,g]);return i.jsx(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:a,children:i.jsxs(d("react-strict-dom").html.div,{style:[k.composer,k.flexLayout],children:[f,i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:k.padding,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";b={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};g.Composer=a;g.Button=c("MWXComposerIconButton.react");g.TextEditor=c("MWXComposerTextEditor.react");g.InputArea=c("MWXComposerInputArea.react");g.Header=c("MWXComposerHeader.react");g.Row=c("MWXComposerRow.react");g.Attachments=b}),98);
__d("MWXComposerButtonGroupContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isMenu:!1});g["default"]=b}),98);
__d("MWXComposerButtonGroupButton.react",["MWXComposerButtonGroupContext.react","MWXComposerIconButton.react","MWXMenuItem.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.icon,g=a.label,h=a.onPress,k=a.preventClosingMenuOnSelect,l=a.testid;l=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","label","onPress","preventClosingMenuOnSelect","testid"]);a=j(c("MWXComposerButtonGroupContext.react"));var m=a.isMenu,n=a.styleForButton;a=a.xstyleForButton;if(m){return i.jsx(c("MWXMenuItem.react"),babelHelpers["extends"]({"aria-label":g,icon:f.asMenuItemIcon_ESCAPE_HATCH(),iconColor:(m=e)!=null?m:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),onClick:h,preventClosingMenuOnSelect:k,primaryText:g,ref:b,testid:void 0},l))}return i.jsx(c("MWXComposerIconButton.react"),babelHelpers["extends"]({icon:f,label:g,onPress:h,ref:b,testid:void 0,wrapperStyle:n,wrapperXStyle:a},e!=null?{color:e}:{},l))}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("withMWXPopover",["BaseMenuContext","BaseMultiPageViewContext","BasePopoverTrigger.react","MWXPopover.react","MWXPopoverLoadingState.react","lazyLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useMemo;function a(a){function b(b){var e=b.onHoverIn,f=b.onHoverOut,g=b.popover,h=b.popoverPresentationProps,l=b.popoverProps,m=b.preloadTrigger,n=babelHelpers.objectWithoutPropertiesLoose(b,["onHoverIn","onHoverOut","popover","popoverPresentationProps","popoverProps","preloadTrigger"]);b=(b=j(c("BaseMenuContext")))!=null?b:{};var o=b.onClose;b=(b=j(c("BaseMultiPageViewContext")))!=null?b:{};var p=b.pushPage,q=k(function(){return d("withCometPlaceholder").withCometPlaceholder(c("lazyLoadComponent")(g),i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1}))},[g]);b=c("useCometPopoverInteractionTracing")(c("tracePolicyFromResource")("comet.popover",g),"lazy");h=(h=h)!=null?h:{};var r=h.align;r=r===void 0?"middle":r;var s=h.position;s=s===void 0?"above":s;h=babelHelpers.objectWithoutPropertiesLoose(h,["align","position"]);var t=k(function(){return function(a){return i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx(q,babelHelpers["extends"]({},a))})}},[q]),u=k(function(){return function(a){return function(b){var c;b=b.onReturn;return i.jsx(q,babelHelpers["extends"]({},a,{onClose:(c=o)!=null?c:b}))}}},[q,o]);return i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({align:r,position:s},h,{interactionTracker:b,popover:t,popoverPreloadResource:g,popoverProps:l,preloadTrigger:m,children:function(b,c,d,g,h){return i.jsx(a,babelHelpers["extends"]({onHoverIn:function(a){g(a),e==null?void 0:e(a)},onHoverOut:function(a){h(),f==null?void 0:f(a)}},n,{onPress:function(){p!=null&&o!=null?p(u(l)):c();for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];n.onPress==null?void 0:n.onPress.apply(n,b)},preventClosingMenuOnSelect:!0,ref:b}))}}))}b.displayName=b.name+" [from "+f.id+"]";return b}g["default"]=a}),98);
__d("MWXComposerButtonGroupPopoverButton.react",["MWXComposerButtonGroupButton.react","react","withMWXPopover"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("withMWXPopover")(c("MWXComposerButtonGroupButton.react"));b=a;g["default"]=b}),98);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:9135","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9135")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerEmojiButton.react",["fbt","JSResourceForInteraction","LexicalComposerContext","MWXComposerButtonGroupPopoverButton.react","MWXIconFaceHappy","Promise","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWXComposerEmojiButton.react");function a(){var a=d("LexicalComposerContext").useLexicalComposerContext(),e=a[0];return k.jsx(c("MWXComposerButtonGroupPopoverButton.react"),{icon:c("MWXIconFaceHappy"),label:h._("__JHASH__450DFbxuM_0__JHASH__"),onPress:function(){l.preload()},popover:c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWXComposerEmojiButton.react"),popoverProps:{onSelect:function(a){return c("promiseDone")(l.load(),function(c){c(a,e,16);return(i||(i=b("Promise"))).resolve()})},withArrow:!1},preloadTrigger:"button",testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMAWGetSendEditActionForSecure",["FBLogger","LSMessagingThreadAttributionType","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWJobDefinitions","MAWLoggerUtils","MAWMiActOnActThreadReady","MAWTimedJob","QPLUserFlow","ReQL","ReQLSuspense","WAJobOrchestratorTypes","promiseDone","qpl","react","sendToSentQPLLogger","sendToSentQPLUtils","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(a){var b=d("MAWLoggerUtils").getInstanceKey(),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":44");return j(function(f,h){if(a==null||f==null)return;var i=d("MAWDbMsg").toMsgId(f);if(i==null)return;c("QPLUserFlow").start(c("qpl")._(1056849558,"2236"),{instanceKey:b});c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(e.tables,a,"MWV2ComposerEditContainer.react",function(a,e){return d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:i}).then(function(a){if(a!=null){var b=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(g,{},c("LSMessagingThreadAttributionType").UNKNOWN);d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a.externalId,b);return d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").jobSerializers.sendEditMsg({editMsgContent:{content:h,mentionedJids:[]},originalProtocolMsgId:a,s2sInstanceKey:b},d("MAWExternalId").generateExternalId(),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}))["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(b,"edit_job_fail",a)})}}).then(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(1056849558,"2236"),{instanceKey:b})})["catch"](function(a){c("FBLogger")("messenger_web_messaging").catching(a).mustfix("Failed to edit message: %s.",a),c("QPLUserFlow").endFailure(c("qpl")._(1056849558,"2236"),"failure",{instanceKey:b})})}))},[e,b,g,a])}g["default"]=a}),98);
__d("useMAWGetSendEditActionforOpen",["LSFactory","LSOptimisticEditMessageStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticEditMessageStoredProcedure")(c("LSFactory")(a),{messageId:b,text:d})},"readwrite",void 0,void 0,f.id+":27"))},[a])}g["default"]=a}),98);
__d("useMWComposerEmojiTransform",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useEffect,j=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("useMWComposerEmojiTransform");function a(a){var b=c("useDeferredModuleOnReady")(j);i(function(){return b==null?void 0:b(a,16)},[a,b])}g["default"]=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useInsertionEffect,k=b.useLayoutEffect,l=b.useRef;function a(a,b){var e=a.clearReplyState,f=a.editor,g=a.onSend,h=l(b);j(function(){h.current=b},[b]);var m=i(function(){var a=g(h.current);e==null?void 0:e();(a||!c("justknobx")._("2597"))&&f.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},[g,e,f]);k(function(){return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();m();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[f,m]);return{onSend:m}}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,e==null?void 0:e.MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=c("useStable")(function(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:h.filter(Boolean),onError:function(){},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})});c("useMWPLexicalClearEditor")(a);c("useLexicalInitializeEditor__DEPRECATED")(a);return{editor:a}}g.useMWXLexicalEditor=a}),98);
__d("MWV2ComposerEditContainer.react",["fbt","LSMessagingThreadTypeUtil","Lexical","LexicalText","MAWEditMessageContext.react","MAWVault","MWLSThreadDisplayContext","MWPActor.react","MWXComposer.react","MWXComposerEmojiButton.react","MWXIconCheckmarkCircle","MWXIconCross","ReQL","ReQLSuspense","isStringNullOrEmpty","react","useLogMAWEditMessage","useMAWGetSendEditActionForSecure","useMAWGetSendEditActionforOpen","useMWComposerEmojiTransform","useMWXComposerClearAndSendOnEnter","useMWXLexicalEditor","usePrepopulateLexicalEditor","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useContext,m=b.useEffect,n=b.useMemo,o=b.useState;function a(a){var b=a.confirmationText;b=b===void 0?null:b;var e=a.contentEditableProps,g=a.editMessageData,j=a.headerText;j=j===void 0?null:j;var q=a.onEditCancelCallback,r=q===void 0?null:q;q=a.onEditTriggerCallback;var s=q===void 0?null:q,t=(i||(i=c("useReStore")))();a=l(d("MAWEditMessageContext.react").Context);var u=a.setEditMessageData,v=d("MWPActor.react").useActor(),w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(t.tables.messages).getKeyRange(g==null?void 0:g.threadKey,g==null?void 0:g.timestampMs,g==null?void 0:g.messageId)},[t,g==null?void 0:g.messageId,g==null?void 0:g.threadKey,g==null?void 0:g.timestampMs],f.id+":55"),x=c("useMAWGetSendEditActionforOpen")(),y=c("useMAWGetSendEditActionForSecure")(w==null?void 0:w.threadKey),z=n(function(){var a;return d("MAWVault").unvault((a=w==null?void 0:w.text)!=null?a:"").trim()},[w==null?void 0:w.text]),A=c("useLogMAWEditMessage")();q=d("useMWXLexicalEditor").useMWXLexicalEditor();var B=q.editor,C=function(){var a=B.getEditorState().read(d("LexicalText").$rootTextContent).trim();if(c("isStringNullOrEmpty")(a)||a===z)return!1;d("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType)?y(w==null?void 0:w.messageId,a):x(g.messageId,a);A(g.threadType,g.threadKey,g.messageId,v,"EDIT_MESSAGE");u(null);s&&s();return!0};p(B,u,r);c("useMWXComposerClearAndSendOnEnter")({clearReplyState:null,editor:B,onSend:C});a=o(!1);q=a[0];var D=a[1];m(function(){return B.registerTextContentListener(function(a){a=a.trim();D(!c("isStringNullOrEmpty")(a)&&a!==z)})},[B,z]);c("usePrepopulateLexicalEditor")(B,z,!0);c("useMWComposerEmojiTransform")(B);a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=a==="Inbox"?32:24;return k.jsx(d("MWXComposer.react").Composer,{editor:B,header:k.jsx(d("MWXComposer.react").Header,{hasTopBorder:!0,headlineText:(j=j)!=null?j:h._("__JHASH__36XeYdlCuO8__JHASH__"),rightAddon:k.jsx(d("MWXComposer.react").Button,{color:"primary",icon:c("MWXIconCross"),label:h._("__JHASH__NFQuJJERXoJ__JHASH__"),onPress:function(){u(null),r&&r()},size:a})},0),children:k.jsxs(d("MWXComposer.react").Row,{children:[k.jsxs(d("MWXComposer.react").InputArea,{children:[k.jsx(d("MWXComposer.react").TextEditor,{contentEditableProps:e,testid:void 0}),k.jsx(c("MWXComposerEmojiButton.react"),{})]}),k.jsx(d("MWXComposer.react").Button,{disabled:!q,icon:c("MWXIconCheckmarkCircle"),label:(j=b)!=null?j:h._("__JHASH__645ugDJYeSD__JHASH__"),onPress:function(){C()},testid:void 0})]})})}a.displayName=a.name+" [from "+f.id+"]";function p(a,b,c){c===void 0&&(c=null),m(function(){return a.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a.preventDefault();a.stopImmediatePropagation();a.stopPropagation();b(null);c&&c();return!0},d("Lexical").COMMAND_PRIORITY_CRITICAL)},[a,b,c])}g["default"]=a}),226);
__d("MWChatReplyText.react",["fbt","MWChatTextFormatting","MWChatTextTransform","MWXMessageTextWithEntities.react","cr:2472","react","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo;function a(a){var e=a.isBumpMessage;e=e===void 0?!1:e;var f=a.isHotLike;f=f===void 0?!1:f;var g=a.mentionIds,i=a.ranges,l=a.text,m=a.threadKey;a=a.transformEmoticons;a=a===void 0?!0:a;var n=k(function(){var a;return new Set((a=g==null?void 0:g.split==null?void 0:g.split(","))!=null?a:[])},[g]);l=b("cr:2472")==null?l:b("cr:2472").unvault(l);n=(n=(n=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(l,[],n))==null?void 0:n.textWithSubstitutions)!=null?n:l;m=(m=d("useStringWithSubstitutions").useStringWithSubstitutions(l,m))!=null?m:l;l=h._("__JHASH__fJLp3hO2Ffq__JHASH__").toString();f=f?l:e?m:n;return j.jsx("div",{className:"xi81zsa",dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:2,ranges:i,renderers:{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]},text:f,transforms:a?d("MWChatTextTransform").textTransformsNoVault:[],truncationStyle:"ellipsis-only",withParagraphs:!1})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ComposerReplyView.react",["fbt","ix","CometErrorBoundary.react","CometTriggerAccessibilityAlertContext","I64","LSContactGenderToGenderConst","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsReplyRenderedFalcoEvent","MWCMIsAnyCMThread","MWChatReplyText.react","MWPActor.react","MWPReplyContext.react","MWXIcon.react","MWXText.react","MWXTextPairing.react","MessagingAttachmentType","ReQL","ReQLSuspense","cr:2472","cr:4071","fbicon","getFBTSafeGenderFromGenderConst","gkx","isMWBumpMessage","react","useIsSecureMessage","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useContext,p=e.useEffect;function q(a,e,f,g){if(g===!0)return h._("__JHASH__t6anprzsvcb__JHASH__");g=a.text;g=g!=null?b("cr:2472")==null?g:b("cr:2472").unvault(g):"";g=g==="\ud83d\udc4d"&&((l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(l||(l=d("I64"))).equal((g=a.hotEmojiSize)!=null?g:(l||(l=d("I64"))).neg_one,(m||(m=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))&&e;if(a.isUnsent)return h._("__JHASH__OtyP2J0Nwkd__JHASH__");var i=c("isMWBumpMessage")(a);if(a.text!=null&&a.text!==""){return n.jsx(c("MWChatReplyText.react"),{isBumpMessage:i,isHotLike:g,mentionIds:e?a.mentionIds:null,text:(i=a.text)!=null?i:h._("__JHASH__C1Hm6KH3mNE__JHASH__"),threadKey:a.threadKey})}if(f!=null){if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._("__JHASH__vuq_ksOZBHO__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._("__JHASH__7zoxdliwH6N__JHASH__");if((l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__d9ky9I-E6BP__JHASH__");return(l||(l=d("I64"))).equal(f==null?void 0:f.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE))?h._("__JHASH__i96Qg8bFARm__JHASH__"):h._("__JHASH__L554Fq7JwGo__JHASH__")}return h._("__JHASH__C1Hm6KH3mNE__JHASH__")}function r(a,b,d,e,f){if(f===!0)return h._("__JHASH__6IDa6GP9mPa__JHASH__");if(a)return h._("__JHASH__iW_IRrZDexS__JHASH__");if(b!=null){return h._("__JHASH__O5URXTVzEEM__JHASH__",[h._param("name",n.jsx(c("MWXText.react"),{type:"headlineEmphasized5",children:e?b.name:(a=(f=d)!=null?f:b.firstName)!=null?a:b.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(b.gender))])])}return h._("__JHASH__Tq-wGwf_lB-__JHASH__")}function s(a){var b=a.isSecureThread,e=a.message,g=a.threadType;a=a.useContactFullname;var h=(j||(j=c("useReStore")))(),i=d("MWPActor.react").useActor(),k=(l||(l=d("I64"))).equal(e.senderId,i),m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(h.tables.contacts).getKeyRange(e.senderId)},[h,e.senderId],f.id+":240");i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(h.tables.attachments).getKeyRange(e.threadKey,e.messageId)},[h,e.messageId,e.threadKey],f.id+":245");var o=d("ReQLSuspense").useFirst(function(){return m!=null&&!k?d("ReQL").fromTableAscending(h.tables.threads).getKeyRange(e.threadKey).map(function(a){var b=a.parentThreadKey;a=a.threadType;if(c("MWCMIsAnyCMThread")(a))return d("ReQLSuspense").first(d("ReQL").fromTableAscending(h.tables.community_folders).getKeyRange(b).map(function(a){a=a.folderId;return d("ReQLSuspense").first(d("ReQL").fromTableAscending(h.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a,m.id).map(function(a){return a.profileName}),f.id+":264")}),f.id+":260");else{a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(h.tables.participants).getKeyRange(e.threadKey,m.id),f.id+":278");return(b=a==null?void 0:a.nickname)!=null?b:null}}):d("ReQL").empty()},[h,e.threadKey,m,k],f.id+":254");p(function(){c("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:d("LsFalcoEventEntryPoint").messageActions}}})},[]);g=c("useIsSecureMessage")(h,e,{fallbackThreadType:g});g=b&&!g;b=q(e,b,i,g);i=r(k,m,o,a,g);return n.jsx("div",{className:"xmo9yow",children:n.jsx(c("MWXTextPairing.react"),{body:b,headline:i,level:4})})}s.displayName=s.name+" [from "+f.id+"]";function t(a){var b=a.isSecureThread;b=b===void 0?!1:b;var e=a.message,f=a.threadType;a=a.useContactFullname;var g=o(d("MWPReplyContext.react").MWPReplyContext),j=g.clearReply,k=o(c("CometTriggerAccessibilityAlertContext"));return n.jsxs("div",{className:"x6s0dn4 xrdv0aw x8cjs6t x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x14uny0o xvpee5o x889kno","data-testid":void 0,children:[n.jsx(c("CometErrorBoundary.react"),{fallback:function(){return n.jsx(c("MWXText.react"),{type:"headlineEmphasized4",children:h._("__JHASH__viMkwR52t0r__JHASH__")})},children:n.jsx(s,{isSecureThread:b,message:e,threadType:f,useContactFullname:a})}),n.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__jHl6Cj_8ioz__JHASH__"),color:"primary",icon:d("fbicon")._(i("478231"),12),onPress:function(){j(e.threadKey,!0),k(h._("__JHASH__I4cDESLQyuo__JHASH__").toString(),{assertive:!1})}})]})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var e=a.messageId,g=a.messageThreadKey,h=a.messageTimestamp,i=a.thread;a=a.useContactFullname;a=a===void 0?!1:a;var k=(j||(j=c("useReStore")))(),l=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType),m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.messages).getKeyRange(g,h,e)},[k,g,h,e],f.id+":393"),o=b("cr:4071")(e,i.threadKey);o=l&&c("gkx")("4643")?o:m;if(o!=null)return n.jsx(t,{isSecureThread:l,message:o,threadType:i.threadType,useContactFullname:a});else return null}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerReplyViewContainer=t;g.MWV2ComposerReplyView=a}),226);
__d("WAGetMediaDevicesSupportedConstraints",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSupportedConstraints is not supported in this browser. Error: ",""]);h=function(){return a};return a}function a(){try{var a;a=(a=navigator.mediaDevices)==null?void 0:a.getSupportedConstraints();return a}catch(a){d("WALogger").LOG(h(),a);return null}}g.getMediaDevicesSupportedConstraints=a}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WAGetMediaDevicesSupportedConstraints","WebWorker","clearTimeout","emptyFunction","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useEffect,n=k.useReducer,o=k.useRef;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function p(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function q(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function r(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function s(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function t(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function u(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function v(a,b){switch(a.stage){case"Recording":return j.jsx(d("MWPAudioPlayerIcons.react").StopIcon,{color:b});case"Unopen":case"Recorded":return j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:b});case"Playing":return j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:b})}}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var x={stage:"Unopen"},y=1;function z(a,e,f){var g;a===void 0&&(a=60);e===void 0&&(e=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));var i=((g=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:g.sampleRate)===!0;g=n(w,x);var j=g[0],k=g[1],p=c("useIsMountedRef")(),q=o(),r=o([]),s=o([]),t=o(),u=o(),v=o(),z=o(),A=o(c("emptyFunction")),B=l(function(a){var b=a[0],c=a[1];if(!p.current)return;a=URL.createObjectURL(b);v.current=a;var d=new Audio(a);d.addEventListener("canplay",function(){u.current=d;var a=d.duration;k({duration:a,type:"UpdateDuration"});a={duration:a,file:b,waveformData:c};z.current=a;A.current(a)});d.addEventListener("timeupdate",function(){var a;a=(a=u.current)==null?void 0:a.currentTime;a!=null&&k({currentTime:a,type:"UpdateTime"})});d.addEventListener("durationchange",function(){var a;a=(a=u.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&k({duration:a,type:"UpdateDuration"})})},[p]),C=l(function(){if(q.current==null||t.current==null)return;t.current.postMessage({buffersL:r.current,buffersR:y===2?s.current:null,sampleRate:q.current})},[]);m(function(){if(j.stage!=="Recording")return;r.current=[];s.current=[];var a=c("AudioContextSingleton").get({sampleRate:i?44100:void 0}),b=a.destination;q.current=a.sampleRate;var d=j.mediaStream,f=a.createScriptProcessor(4096,y,y);a=a.createMediaStreamSource(d);t.current=new(c("WebWorker"))(c("MWChatRecorderUtilsWorkerResource")).setMessageHandler(B).setAllowCrossPageTransition(!0).execute();var g=function(a){j.stage==="Recording"&&a instanceof AudioProcessingEvent&&(r.current.push(a.inputBuffer.getChannelData(0).slice()),y===2&&s.current.push(a.inputBuffer.getChannelData(1).slice()))};f.addEventListener("audioprocess",g);a.connect(f);f.connect(b);e();return function(){d.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}}),f.removeEventListener("audioprocess",g)}},[B,e,j.stage,j.mediaStream,i]);var D=c("usePrevious")(j);m(function(){(D==null?void 0:D.stage)==="Recording"&&j.stage==="Recorded"&&C()},[D==null?void 0:D.stage,C,j.stage]);m(function(){if(j.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){k({recordingTimeout:a,type:"RecordingTimeout"});return}k({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,j.stage]);g=l(function(b){k({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);var E=l(function(){var a;k({type:"Reset"});(a=u.current)==null?void 0:a.pause();u.current=void 0;z.current=void 0;q.current=void 0;a=v.current;a!=null&&(URL.revokeObjectURL(a),v.current=void 0)},[]),F=l(function(){var a=function(){k({type:"Toggle"})},b=u.current;if(b==null){a();return}switch(j.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](f);break;case"Playing":b.pause();a();break}},[f,j.stage]),G=l(function(){return new(h||(h=b("Promise")))(function(a){var b=z.current;if(b!=null)return a(b);A.current=a;if(j.stage==="Recording")return F()})},[j,F]);return{audioEl:u,getVoiceClip:G,reset:E,start:g,state:j,toggle:F}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=p;g.getDuration=q;g.getCurrentTime=r;g.isProgressing=s;g.isCompleted=t;g.getPlaybackLabel=u;g.getPlaybackIcon=v;g.useVoiceRecorder=z}),98);
__d("MWAudioRecorder.react",["MWAudioPlayer.react","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","MWXTooltip.react","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef,l=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioRecorder.react");function a(a){var b;a=a.voiceRecorder;var e=a.audioEl,f=a.state,g=a.toggle;a=k();var i=d("MWPAudioPlayerUtils").useResetHighlightProgress(a),m=(b=d("MWPUseVoiceRecorder")).hasScrubber(f),n=function(){g();switch(f.stage){case"Unopen":return;case"Recording":l.onReady(function(a){return a.logClickStopRecording(0)});return;case"Recorded":var a=f.currentTime,b=f.duration;a===0?l.onReady(function(a){return a.logPlaybackStart(b)}):l.onReady(function(c){return c.logPlaybackResume(b,a)});return;case"Playing":var c=f.currentTime,d=f.duration;l.onReady(function(a){return a.logPlaybackPause(d,c)});return}},o=d("MWPAudioPlayerUtils").useProgressLiveUpdate(b.getDuration(f),e,b.getCurrentTime(f),b.isProgressing(f),!1,b.isCompleted(f)),p=d("MWAudioPlayer.react").useHighlightStyles(!0);b=b.getPlaybackLabel(f);var q=function(){switch(f.stage){case"Unopen":case"Recording":return null;case"Recorded":case"Playing":return j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:f.currentTime,duration:f.duration})}}();return j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:e,hasScrubber:m,scrubberRef:a,style:{backgroundColor:"var(--chat-composer-button-color, var(--accent))",borderRadius:"18px"},testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:e,children:[j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:o,xstyle:p}),q,j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:a,xstyle:p}),j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),onMouseMove:m?i:void 0,children:j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:b,children:j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:d("MWPUseVoiceRecorder").getPlaybackIcon(f,"var(--chat-composer-button-color, var(--accent))"),label:b,onPress:n})})}),j.jsx(c("MWPAudioPlayerTimer.react"),{time:d("MWPUseVoiceRecorder").getTimerTime(f)})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerMenuButtonTrigger.react",["fbt","MWChatChatButtonColorConstants","MWXPressable.react","MWXTooltip.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=h._("__JHASH__2kGg_y6m8FS__JHASH__"),m={buttonFDS:{flexShrink:"x2lah0s",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},buttonMDS:{flexShrink:"x2lah0s",marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=a.color,e=a.contextRef,f=a.disabled;a=a.onShow;return k.jsx(c("MWXTooltip.react"),{forceInlineDisplay:!0,position:"above",tooltip:l,children:k.jsx(c("MWXPressable.react"),{disabled:f,label:l,onPress:a,overlayDisabled:f,overlayRadius:"50%",ref:e,xstyle:function(){return[c("gkx")("23219")?m.buttonMDS:m.buttonFDS]},children:k.jsx("svg",{"aria-hidden":"true",className:(i||(i=c("stylex")))(d("MWChatChatButtonColorConstants").styles.strokeGrey),height:"20",viewBox:"0 0 24 18",width:"20",children:k.jsxs("g",{stroke:b,strokeLinecap:"round",strokeWidth:"2.5",children:[k.jsx("path",{d:"M1.5,1.5 H22.5"}),k.jsx("path",{d:"M1.5,9 H22.5"}),k.jsx("path",{d:"M1.5,16.5 H22.5"})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ComposerMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.color,d=a.disabled,e=d===void 0?!1:d;d=a.editor;var f=a.hasPersistentMenu,g=a.onSendMessage;a=a.threadKey;return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{editor:d,hasPersistentMenu:f,onClose:c("emptyFunction"),onSendMessage:g,threadKey:a},popoverResource:c("JSResourceForInteraction")("MWComposerCommandsMenu.react").__setRef("MWV2ComposerMenuButton.react"),children:function(a,d){return i.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:b,contextRef:a,disabled:e,onShow:d})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWComposerPersistentMenuItemSelect",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.composerEntrypointForLogging,c=a.onSendMessage;return i(function(a){var d=a.id;a=a.title;return c(a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,d,void 0,void 0,void 0,void 0,void 0,void 0,b)},[c,b])}g["default"]=a}),98);
__d("MWV2ComposerPersistentMenuButton.react",["JSResourceForInteraction","MWV2ComposerMenuButtonTrigger.react","MWXLazyPopoverTrigger.react","emptyFunction","react","useMWComposerPersistentMenuItemSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.color,d=a.disabled,e=d===void 0?!1:d;d=a.onSendMessage;a=c("useMWComposerPersistentMenuItemSelect")({composerEntrypointForLogging:"MWV2ComposerPersistentMenuButton",onSendMessage:d});return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{onClose:c("emptyFunction"),onSelect:a},popoverResource:c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2ComposerPersistentMenuButton.react"),children:function(a,d){return i.jsx(c("MWV2ComposerMenuButtonTrigger.react"),{color:b,contextRef:a,disabled:e,onShow:d})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerEndButtonsGroup.react",["MWV2ComposerMenuButton.react","MWV2ComposerPersistentMenuButton.react","MWV2ComposerSendButton.react","cr:3208","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j="var(--chat-composer-button-color)";function a(a){var d=a.customEmoji,e=a.editor,f=a.hasPersistentMenu,g=a.hasStuffToSend,h=a.isVoiceRecorderOpen,k=a.onSendMessage,l=a.sendMessage,m=a.shouldHideHotLike,n=a.showCommands,o=a.threadKey;a=a.threadType;return h?null:g?i.jsx(c("MWV2ComposerSendButton.react"),{hasStuffToSend:g,onPress:l}):n?i.jsx(c("MWV2ComposerMenuButton.react"),{color:j,editor:e,hasPersistentMenu:f,onSendMessage:k,threadKey:o}):f?i.jsx(c("MWV2ComposerPersistentMenuButton.react"),{color:j,onSendMessage:k}):m?i.jsx("span",{className:"x1e558r4 x150jy0e"}):i.jsx(b("cr:3208"),{customEmoji:d,onSendMessage:k,threadType:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerInnerButtonsGroup.react",["MWV2ComposerEmojiButton.react","cr:793","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={fds:{marginStart:"x16hk5td",paddingBottom:"xjkvuk6",paddingEnd:"x150jy0e",$$css:!0},innerButtons:{alignItems:"x6s0dn4",alignSelf:"xpvyfi4",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},mds:{marginStart:"x169t7cy",$$css:!0}};function a(a){var d=a.editor,e=a.renderExtraButtons;e=e===void 0?null:e;var f=a.shouldUseMDS;a=a.threadKey;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.innerButtons,f?k.mds:k.fds),children:[e!=null&&e(d),b("cr:793")!=null&&j.jsx(b("cr:793"),{editor:d,threadId:a}),j.jsx(c("MWV2ComposerEmojiButton.react"),{editor:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerGifButton.react",["fbt","JSResourceForInteraction","MWChatComposerIcons","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnGifSelect"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("MWChatAnimatedImageFlyoutWithPopover.react").__setRef("MWV2ComposerGifButton.react"),l={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},m=h._("__JHASH__J6q-Bfr0oTE__JHASH__");function a(a){var b=a.disabled,e=a.isSecureThread;a=a.onSendMessage;a=c("useMWV2ComposerOnGifSelect")(a,"MWV2ComposerGifButton");var f=c("MessengerWebUXLogger").useInteractionLogger();return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:{isSecureThread:e,onSelect:a,testid:"mw_gif_picker"},popoverResource:k,position:"above",children:function(a,e,g,h,i,k,n){return j.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:m,children:j.jsx(c("MWXPressable.react"),{"aria-label":m,disabled:b,onHoverIn:h,onHoverOut:i,onPress:function(){e(),f==null?void 0:f({eventName:"composer_open_gif_picker"})},onPressIn:k,overlayRadius:"50%",ref:a,xstyle:function(){return[c("gkx")("23219")?l.buttonMDS:l.buttonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsGif,{fill:b?void 0:"var(--chat-composer-button-color)",size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ComposerStickerButton.react",["cr:1084","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");g["default"]=b("cr:1084")}),98);
__d("useMWV2ComposerOnPressVoiceClip",["$InternalEnum","JSResourceForInteraction","WAGetMediaDevicesSupportedConstraints","emptyFunction","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=c("requireDeferred")("MWChatAudioLog").__setRef("useMWV2ComposerOnPressVoiceClip"),k=b("$InternalEnum").Mirrored(["AWAITING","GRANTED","DENIED","FAILED"]);function a(a){var b=i(k.AWAITING),e=b[0],f=b[1];b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog.react").__setRef("useMWV2ComposerOnPressVoiceClip"));var g=b[0],h={channelCount:1};b=((b=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:b.sampleRate)===!0;b&&(h.sampleRate=44100);var l=function(){return g({contentType:"accessDenied",onAllow:c("emptyFunction")},c("emptyFunction"))},m=function(){var b;(b=navigator)==null?void 0:(b=b.mediaDevices)==null?void 0:b.getUserMedia({audio:h,video:!1}).then(function(b){f(k.GRANTED),a.start(b)})["catch"](function(a){a.name==="NotAllowedError"?(f(k.DENIED),l()):f(k.FAILED),j.onReady(function(a){return a.logBrowserDenyAccess()})})},n=function(){return g({contentType:"askForAccess",onAllow:function(){return m()}},c("emptyFunction"))};return function(){var a;switch(e){case k.AWAITING:a=(a=navigator.permissions)==null?void 0:a.query({name:"microphone"});a!=null?a.then(function(a){a=a.state;switch(a){case"denied":f(k.DENIED);l();break;case"granted":m();break;case"prompt":n();break;default:n()}})["catch"](function(){n()}):(m(),j.onReady(function(a){return a.logMicAccessCheckFailed()}));return;case k.DENIED:return l();case k.GRANTED:case k.FAILED:return m()}}}g["default"]=a}),98);
__d("MWComposerStartButtonsGroup.react",["CometPlaceholder.react","LSMessagingThreadTypeUtil","MWV2ComposerFileButton.react","MWV2ComposerGifButton.react","MWV2ComposerPollButton.react","MWV2ComposerStickerButton.react","MWV2ComposerVoiceClipButton.react","MWXTooltipGroup.react","emptyFunction","react","stylex","useMWEntrypoint","useMWFalcoFeatureEventLogger","useMWV2ComposerOnPressVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={button:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0},buttonFDS:{marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},buttonHidden:{transform:"x1f85oc2",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},buttonMDS:{marginBottom:"xat24cr",$$css:!0},buttonShown:{transform:"x3oybdh",transitionDuration:"x1g2r6go",transitionProperty:"x11xpdln",$$css:!0},firstButtonHidden:{transitionDelay:"x1th4bbo",$$css:!0},firstButtonShown:{transitionDelay:"x1th4bbo",$$css:!0},secondButtonHidden:{transitionDelay:"x5zdck6",$$css:!0},secondButtonShown:{transitionDelay:"x5h36tt",$$css:!0},thirdButtonHidden:{transitionDelay:"x1ahifba",$$css:!0},thirdButtonShown:{transitionDelay:"x5w5eug",$$css:!0}},l="var(--chat-composer-button-color)";function a(a){var b=a.canSendAudioClipFinal,e=a.canSendFileFinal,f=a.canSendGifFinal,g=a.canSendSticker,i=a.composerLinkPreview,m=a.gifButtonPosition,n=a.isInputExpanded,o=a.isRTL,p=a.isSecureThread,q=a.localTimezoneInformation,r=a.onAttachmentsAdded,s=a.onSendMessage,t=a.shouldUseMDS,u=a.stickerButtonPosition,v=a.supportedFileTypes,w=a.threadKey,x=a.threadType;a=a.voiceRecorder;var y=c("useMWEntrypoint")(),z=c("useMWFalcoFeatureEventLogger")(w,x),A=function(a,b){var c="select_sticker_book";a?c="sticker_search":b&&(c="recent_stickers");z(y,c)};a=c("useMWV2ComposerOnPressVoiceClip")(a);var B=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(x),C=o?{right:"0px"}:{left:"0px"};u=o?{right:u.toString()+"px"}:{left:u.toString()+"px"};o=o?{right:m.toString()+"px"}:{left:m.toString()+"px"};return j.jsxs(j.Fragment,{children:[j.jsxs(c("MWXTooltipGroup.react"),{children:[j.jsx("div",{className:(h||(h=c("stylex")))(k.button,t?k.buttonMDS:k.buttonFDS,n?k.buttonHidden:k.buttonShown,n?k.firstButtonHidden:k.firstButtonShown),style:C,children:j.jsx(c("MWV2ComposerFileButton.react"),{disabled:!e,onAttachmentsAdded:r,supportedFileTypes:v})}),j.jsx("div",{className:h(k.button,t?k.buttonMDS:k.buttonFDS,n?k.buttonHidden:k.buttonShown,n?k.secondButtonHidden:k.secondButtonShown),style:u,children:B?j.jsx(c("MWV2ComposerPollButton.react"),{color:l,entryPoint:"composer",onClose:c("emptyFunction"),threadKey:w,threadType:x}):j.jsx(c("MWV2ComposerStickerButton.react"),{color:l,disabled:!g,isSecureThread:p,onSelectStickerPack:A,onSendMessage:s})}),j.jsx("div",{className:h(k.button,t?k.buttonMDS:k.buttonFDS,n?k.buttonHidden:k.buttonShown,n?k.thirdButtonHidden:k.thirdButtonShown),style:o,children:B?j.jsx(c("MWV2ComposerVoiceClipButton.react"),{color:l,disabled:!b,entryPoint:"composer",onPress:a}):j.jsx(c("MWV2ComposerGifButton.react"),{disabled:!f,isSecureThread:p,onSendMessage:s})})]}),q!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:q}):null,i!=null?j.jsx(c("CometPlaceholder.react"),{fallback:null,children:i}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposerPlusButton.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWChatComposerIcons","MWV2StickerUseSecureSendContext","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","emptyFunction","gkx","react","requireDeferred","useMWV2ComposerOnPressVoiceClip"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useMemo,l=b.useState,m=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2ComposerPlusButton.react"),n={plusButtonFDS:{marginTop:"x1gslohp",marginBottom:"x12nagc",marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},plusButtonMDS:{marginStart:"x1i64zmx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=a.canSendAudioClip,e=a.canSendFile,f=a.canSendPayment,g=a.editor,i=a.hasAudioClipsCapability,o=a.hasGIFCapability,p=a.hasPaymentCapability,q=a.hasPollCreationCapability,r=a.hasRollcallCapability,s=a.hasStickerCapability,t=a.isInputExpanded,u=a.isSecureThread,v=a.onAttachmentsAdded,w=a.onSendMessage,x=a.renderExtraOverflowMenuItems,y=a.supportedFileTypes,z=a.threadKey,A=a.threadType,B=a.voiceRecorder,C=c("emptyFunction");a=l(!1);var D=a[0],E=a[1];a=function(a){return E(a)};A=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(A);p=p&&!c("gkx")("24133")&&f;f=q&&(!A||c("gkx")("23422")||c("gkx")("3378"))&&(!A||t);q=i&&!c("gkx")("24134")&&b&&(!A||t);i=o&&!c("gkx")("23427")&&(t||A);b=e&&t;o=A||!c("gkx")("23421")&&s&&t;e=c("gkx")("23423");A=c("gkx")("23159");s=k(function(){if(x!=null)return x("var(--chat-composer-button-color)",C,v);else return[]},[x,C,v]);t=c("useMWV2ComposerOnPressVoiceClip")(B);var F=B.state.stage!=="Unopen",G=F?h._("__JHASH__gaxHiFwvIGk__JHASH__"):D?h._("__JHASH__SFruYEeI3S-__JHASH__"):h._("__JHASH__PUPO-44z1pF__JHASH__"),H=c("MessengerWebUXLogger").useInteractionLogger();D=p||f||q||i||b||o||e||A||r||s.length>0;var I=!D;return j.jsx(c("MWV2StickerUseSecureSendContext").Provider,{value:u,children:j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"start",onVisibilityChange:a,popoverProps:{color:"var(--chat-composer-button-color)",editor:g,extraItems:s,onAttachmentsAdded:v,onClose:C,onPressVoiceClip:t,onSendMessage:w,showCreatePoll:f,showCreatePrompt:r,showFile:b,showGenAICreate:e,showGenAICreateVideo:A,showGif:i,showPayment:p,showSendVoiceClip:q,showSticker:o,supportedFileTypes:y,threadKey:z},popoverResource:c("JSResourceForInteraction")("MWV2ComposerOverflowMenu.react").__setRef("MWV2ComposerPlusButton.react"),position:"above",preloadTrigger:"button",children:function(a,b,e,f,g,h){return j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:G,children:j.jsx(c("MWXPressable.react"),{"aria-label":G,disabled:I,onHoverIn:f,onHoverOut:g,onPress:function(){if(F){B.reset();m.onReady(function(a){return a.logDeleteRecording()});H==null?void 0:H({eventName:"composer_close_audio_recorder"});return}else H==null?void 0:H({eventName:"composer_open_overflow_menu"}),b()},onPressIn:h,overlayDisabled:I,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?n.plusButtonMDS:n.plusButtonFDS]},children:j.jsx(d("MWChatComposerIcons").MWChatComposerIconsMoreActions,{fill:I?void 0:"var(--chat-composer-button-color)",isRotated:F,size:20})})})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWHasPollsCreationEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=(a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(36,a)}))!=null?a:!1;return a}g["default"]=a}),98);
__d("MWReQLComposerPlusButton.react",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWV2ComposerPlusButton.react","react","useMWHasPollsCreationEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b,e=a.canSendAudioClip,f=a.canSendFile,g=a.canSendPayment,h=a.editor,j=a.isInputExpanded,k=a.onAttachmentsAdded,l=a.onSendMessage,m=a.renderExtraOverflowMenuItems,n=a.supportedFileTypes,o=a.thread;a=a.voiceRecorder;var p=c("useMWHasPollsCreationEnabled")(o.threadKey);b={hasAudioClipsCapability:(b=d("LSThreadBitOffset")).has(14,o),hasGIFCapability:b.has(4,o),hasPaymentCapability:b.has(0,o),hasPollCreationCapability:p,hasRollcallCapability:b.has(152,o),hasStickerCapability:b.has(3,o)};return i.jsx(c("MWV2ComposerPlusButton.react"),babelHelpers["extends"]({canSendAudioClip:e,canSendFile:f,canSendPayment:g,editor:h,hasPollCreationCapability:p,isInputExpanded:j,isSecureThread:d("LSMessagingThreadTypeUtil").isArmadilloSecure(o.threadType),onAttachmentsAdded:k,onSendMessage:l,renderExtraOverflowMenuItems:m,supportedFileTypes:n,threadKey:o.threadKey,threadType:o.threadType,voiceRecorder:a},b))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useParticipantsExcludingViewer",["I64","MAWSubscribeToContactNames","MWPActor.react","MWWorkForeignEntityTypeUtils","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a){var b=a.threadKey,e=d("MWPActor.react").useActor(),g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(b).map(function(a){return[d("ReQLSuspense").first(d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(a.contactId),f.id+":42"),a]})},[g,b],f.id+":36"),l=k(function(){return j.reduce(function(a,b){var c=b[0];b=b[1];if(c!=null&&!(i||(i=d("I64"))).equal(c.id,e)){return a.concat([[babelHelpers["extends"]({},c,{name:(c=c.name)!=null?c:d("MAWSubscribeToContactNames").getUnknownUser()}),b]])}return a},[])},[j,e]);return k(function(){return new Map(l.map(function(a){var b,e=a[1];a=a[0];return[(i||(i=d("I64"))).to_string(a.id),{actualName:a.name,contactId:i.to_string(a.id),isAdmin:(b=e.isAdmin)!=null?b:!1,isContact:!0,jobTitle:a.workJobTitle,name:a.name,nickname:e.nickname,profilePictureUrl:c("getLSMediaContactProfilePictureUrl")(a),secondaryName:a.secondaryName,workForeignEntityInfo:d("MWWorkForeignEntityTypeUtils").getWorkForeignEntityType(a.workForeignEntityType)}]}))},[l])}g["default"]=a}),98);
__d("MWV2ComposerView.react",["fbt","FBLogger","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","Locale","MWAudioRecorder.react","MWCMThreadTypes.react","MWComposerEndButtonsGroup.react","MWComposerInnerButtonsGroup.react","MWComposerStartButtonsGroup.react","MWReQLComposerInner.react","MWReQLComposerPlusButton.react","MWV2ComposerMediaStaging.react","MWV2ComposerSendButton.react","Promise","ReQL","ReQLSuspense","cr:563","emptyFunction","gkx","react","requireDeferred","stylex","useDeferredModuleOnReady","useIsAdsAIChat","useMWComposerAriaDescribedBy","useMWEntrypoint","useParticipantsExcludingViewer","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useId,q=e.useRef,r=c("requireDeferred")("MWChatAudioLog").__setRef("MWV2ComposerView.react"),s=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("MWV2ComposerView.react"),t={container:{flexGrow:"x1iyjqo2",overflowX:"xw2csxc",position:"x1n2onr6",$$css:!0},hidden:{display:"x1s85apg",$$css:!0}};function u(a){var b=c("useDeferredModuleOnReady")(s);o(function(){if(b!=null)return b(a,16)},[a,b])}function v(){r.onReady(function(a){return a.logClickStartRecording()})}function w(){r.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var e=a.ariaLabel,g=a.canSendAudioClip;g=g===void 0?!0:g;var m=a.canSendFile;m=m===void 0?!0:m;var r=a.canSendGif;r=r===void 0?!0:r;var s=a.canSendPayment;s=s===void 0?!1:s;var x=a.canSendSticker;x=x===void 0?!0:x;var y=a.composerLinkPreview,z=a.editor,A=a.editorElementRef,B=a.hasStuffToSend,C=a.isAiBotMentionsEnabled,D=a.isMentionsPluginEnabled;D=D===void 0?!0:D;var E=a.keepInputExpanded;E=E===void 0?!1:E;var F=a.localTimezoneInformation,G=a.maxAudioDuration,aa=a.mediaStaging,ba=a.onAttachmentRemoved,H=a.onAttachmentsAdded,I=a.onSendMessage,ca=a.placeholderText,da=a.policyProduct,J=a.renderExtraButtons;J=J===void 0?null:J;var ea=a.renderExtraOverflowMenuItems,fa=a.sendMessage,K=a.supportedFileTypes,ga=a.surface,L=a.thread;a=r&&d("LSThreadBitOffset").has(4,L)&&!c("gkx")("23427");r=d("MWCMThreadTypes.react").isBroadcastThread(L.threadType);var M=d("LSMessagingThreadTypeUtil").isAiBot(L.threadType),N=c("useIsAdsAIChat")(L.threadKey);m=m&&!c("gkx")("23428")&&(r||M||N?d("LSThreadBitOffset").has(56,L):!0);r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(L.threadType);M=x&&!c("gkx")("23421")&&d("LSThreadBitOffset").has(3,L);x=c("useMWEntrypoint")();var O=b("cr:563").useVoiceRecorder(G,v,w),P=O.state.stage!=="Unopen";G=function(){O.getVoiceClip().then(function(a){O.reset();I(void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"MWV2ComposerView.onSendVoiceClip");return(l||(l=b("Promise"))).resolve()})["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).warn("Failed to send voice clip in messenger composer ");return(l||(l=b("Promise"))).reject(a)})};var Q=q(null),R=c("usePrevious")(P);o(function(){if(P===!0&&R===!1){var a;(a=Q.current)==null?void 0:a.focus()}},[P,Q,R]);var ha=c("useParticipantsExcludingViewer")({threadKey:L.threadKey}),ia=d("LSThreadBitOffset").has(43,L),S=d("Locale").isRTL(),T=c("gkx")("23219"),U=T?[36,8]:[32,4],V=U[0];U=U[1];var W=0+V|0,X=d("LSMessagingThreadTypeUtil").isCMSubthread(L.threadType);E=B||E||X&&x==="inbox";x=W+V|0;V=S?{marginRight:E?T?8..toString()+"px":"0":((x+V|0)+U|0).toString()+"px"}:{marginLeft:E?T?8..toString()+"px":"0":((x+V|0)+U|0).toString()+"px"};U=c("useMWComposerAriaDescribedBy")(L);var Y=p();u(z);N=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(L.threadType)||N&&!d("LSThreadBitOffset").has(109,L);var Z=(i||(i=c("useReStore")))(),$=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(Z.tables.custom_thread_commands).getKeyRange(L.threadKey).filter(function(a){return!a.isOpenPersistentMenu})},[Z,L.threadKey],f.id+":283")!=null;$=c("gkx")("23425")&&$;return n.jsxs("div",{"aria-label":h._("__JHASH__J510aPC_joc__JHASH__"),className:"xuk3077 x57kliw x78zum5 x6prxxf xz9dl7a xsag5q8","data-testid":void 0,role:"group",children:[n.jsx(c("MWReQLComposerPlusButton.react"),{canSendAudioClip:g,canSendFile:m,canSendPayment:s,editor:z,isInputExpanded:E,onAttachmentsAdded:H,onSendMessage:I,renderExtraOverflowMenuItems:ea,supportedFileTypes:K,thread:L,voiceRecorder:O}),P?n.jsxs(n.Fragment,{children:[n.jsx(c("MWAudioRecorder.react"),{voiceRecorder:O}),n.jsx(c("MWV2ComposerSendButton.react"),{hasStuffToSend:B,onPress:G,ref:Q})]}):null,n.jsxs("div",{className:(k||(k=c("stylex")))(P?t.hidden:!1,t.container),children:[n.jsx(c("MWComposerStartButtonsGroup.react"),{canSendAudioClipFinal:g,canSendFileFinal:m,canSendGifFinal:a,canSendSticker:M,composerLinkPreview:y,gifButtonPosition:x,isInputExpanded:E,isRTL:S,isSecureThread:r,localTimezoneInformation:F,onAttachmentsAdded:H,onSendMessage:I,shouldUseMDS:T,stickerButtonPosition:W,supportedFileTypes:K,threadKey:L.threadKey,threadType:L.threadType,voiceRecorder:O}),n.jsxs("div",{className:"x78zum5 x1iyjqo2 x6q2ic0",style:V,children:[n.jsx("div",{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s",id:Y,children:U}),n.jsx(c("MWReQLComposerInner.react"),{ariaDescribedBy:Y,ariaLabel:e,contentEditableRef:A,editor:z,endContent:n.jsx(c("MWComposerInnerButtonsGroup.react"),{editor:z,renderExtraButtons:J,shouldUseMDS:T,threadKey:L.threadKey}),handlePastedFiles:m?H:c("emptyFunction"),isAiBotMentionsEnabled:C,isSecureThread:r,participants:ha,placeholderText:ca,policyProduct:da,threadID:(j||(j=d("I64"))).to_string(X?L.parentThreadKey:L.threadKey),topContent:n.jsx(c("MWV2ComposerMediaStaging.react"),{mediaStaging:aa,onAttachmentRemoved:ba,onAttachmentsAdded:H,supportedFileTypes:K}),useMentionsPlugin:D&&(C===!0?!0:ia&&d("LSMessagingThreadTypeUtil").isGroup(L.threadType)),surface:ga,testId:"chat_input:rich-input"})]})]}),n.jsx(c("MWComposerEndButtonsGroup.react"),{customEmoji:L.customEmoji,editor:z,hasPersistentMenu:L.hasPersistentMenu,hasStuffToSend:B,isVoiceRecorderOpen:P,onSendMessage:I,sendMessage:fa,shouldHideHotLike:N,showCommands:$,threadKey:L.threadKey,threadType:L.threadType})]})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerView=a}),226);
__d("MAWSendSecureAttachment",["FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWJobDefinitions","MAWUIJob","QPLUserFlow","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MAWSendSecureAttachment");function a(a,b,c,d,e,f,g,h,i,k,l,m,n,o,p,q){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m,n,o,p,q,r,s,t){yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Starting attachment message send"],"LOG");if(b==null){c("QPLUserFlow").endFailure(c("qpl")._(25313175,"1551"),"no_chat_jid",{instanceKey:o});return}var u=null;if(m!=null){m=d("MAWDbMsg").toMsgId(m.messageId);m!=null&&(u=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:m})))}c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_media_to_wajob",{instanceKey:o});switch(j.type){case"image":case"animated_image":case"sticker":var v;m=j.imageSpec;var w=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(v=p)!=null?v:void 0,height:m.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:w.jpegThumbnail,jpegThumbnailHeight:w.height,jpegThumbnailWidth:w.width,mediaGroupMetadata:t,offlineAttachmentId:k,optimisticMsg:r,quote:(v=u)!=null?v:void 0,s2sInstanceKey:o,source:l,width:m.width},attachmentType:"image",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"video":w=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:w.duration,ephemeralSetting:(t=p)!=null?t:void 0,height:w.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:w.jpegThumbnail,jpegThumbnailHeight:w.height,jpegThumbnailWidth:w.width,offlineAttachmentId:k,optimisticMsg:r,quote:(v=u)!=null?v:void 0,s2sInstanceKey:o,source:l,width:w.width},attachmentType:"video",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"audio":m=j.durations;t=j.isPtt;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:Math.round(m),ephemeralSetting:(v=p)!=null?v:void 0,initiatingSource:q,isFirstMsg:n,isForwarded:!1,isPtt:t,offlineAttachmentId:k,optimisticMsg:r,quote:(w=u)!=null?w:void 0,s2sInstanceKey:o,source:l},attachmentType:"audio",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"document":m=j.filename;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(v=p)!=null?v:void 0,filename:m,initiatingSource:q,isFirstMsg:n,isForwarded:!1,offlineAttachmentId:k,optimisticMsg:r,quote:(t=u)!=null?t:void 0,s2sInstanceKey:o,source:l},attachmentType:"application",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;default:c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"uknown_file_type_sendMediaMsg_not_fired",{instanceKey:o}),c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment").mustfix("sendSecureAttachment: Failed while sending attachment, unknown attachment type %s",j.type)}var x;switch(j.type){case"image":x=8;break;case"video":x=10;break;case"audio":x=11;break;case"document":x=34;break}yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Send attachment message is done"],"LOG");i.onReady(function(b){var c=(h||(h=d("I64"))).to_string(e);return b.log(a,{actor:g,attachmentFbids:[],attachmentType:x,backend:1,hasReply:!1,messagingThreadId:c,offlineThreadingId:k,sendType:0,source:l,threadKey:e,threadType:f})});return b});return j.apply(this,arguments)}g.sendSecureAttachment=a}),98);
__d("MAWSendFileMsgIfNecessaryV2",["FBLogger","MAWExternalId","MAWSendSecureAttachment","Promise","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.actorId,g=e.attachments,i=e.chatJid,j=e.ephemeralSetting,k=e.initiatingSource,l=e.isFirstMsg,m=e.mediaGroupMetadataMap,n=e.offlineAttachmentIdToMessageData,o=e.reply,p=e.s2sInstanceKey,q=e.source,r=e.thread;d("sendToSentQPLLogger").markSendToSentPoint(p,"send_attachment_start");e=g.map(function(b){var c=b[0];b=b[1];var e=n==null?void 0:n.get(b);return d("MAWSendSecureAttachment").sendSecureAttachment(a,i,r.threadKey,r.threadType,f,c,b,q,o,l,p,j,k,e==null?void 0:{msgId:e==null?void 0:e.messageExternalId,ts:e==null?void 0:e.offlineMsgTimestamp},(c=e==null?void 0:e.messageExternalId)!=null?c:d("MAWExternalId").generateExternalId(),m==null?void 0:m.get(b))});yield (h||(h=b("Promise"))).all(e)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(p,"send_attachment_failed",a),a instanceof Error?c("FBLogger")("messenger_web_media").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending message"):c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending attachment, %s",a.message)})});return i.apply(this,arguments)}g.sendFileMsgIfNecessaryV2=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:10194","gkx","nullthrows","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=b("cr:10194")||{createIdbOptimisticMessageWithAttachment:void 0};var j=e.createIdbOptimisticMessageWithAttachment;function a(){var a=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMWLSDefaultThreadSource")(),l=c("gkx")("4643");return function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i,m,n,o,p,q,r,s,t,u){if(s==null)return(h||(h=b("Promise"))).resolve();var v=l?yield d("MAWGetEphemeralSettings").getEphemeralSetting(n.jid,m):void 0;return a.runInTransaction(function(b){return l?c("nullthrows")(j)(b,{attachmentType:s,ephemeralSettings:v,initiatingSource:g,instanceKey:q,mawThreadResult:n,mediaGroupMetadataMap:u,messageExternalId:t,offlineAttachmentId:o,onOfflineMsgId:r,optimisticMediaAttachment:p,reply:i,senderId:e,threadKey:m,threadSource:k(m)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(a,b,e,i,m,o,p,q,r,s,t,u)},"readwrite","ui",void 0,f.id+":77")});return function(a,b,c,d,e,f,g,h,j,k){return i.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMarkOptimisticMessagesAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","Promise","asyncToGeneratorRuntime","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=c("useAsyncReStore")();return j(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,e){var g=(yield a);return g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (h||(h=b("Promise"))).all(d.map(function(b){return c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(a),{errorMessage:e,optimisticMid:b})}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":27")});return function(a,b){return d.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("useMaybeCreateThreadForMAWSendSecurMessageV2",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MAWWaitForBackendSetup","MWPActor.react","QPLUserFlow","ReQL","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_start",{instanceKey:e});var f=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_success",{instanceKey:e});var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(f.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"participant_ids_fetched",{instanceKey:e});return d("MAWWaitForBackendSetup").waitForBackendSetup("maybe-create-thread-for-send").then(function(){return c("MAWMiActMaybeCreateActThread")(f,b,{actorId:a,participantIds:g},e,"maybe-create-thread-for-send")})});return function(a,b){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWSendSecureGifAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Starting GIF attachment message send"],"LOG");var t=new Map();try{var u=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),v=d("MAWExternalId").generateExternalId(),w=e(n.threadKey),x=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey)])),y=x[0];x=x[1];var z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,n.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:s});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));o=new File([o],"gifFromPicker",{type:o.type});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");var A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(o,!1));A=(yield k(r,n.threadKey,x,u,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE),v));A!=null?(t.set(u,{messageExternalId:v,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),p==null?void 0:p.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p==null?void 0:p.addMarkerPoint("preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(o,!1));p==null?void 0:p.addMarkerPoint("preprocess_end","AppTiming");v=[[q,u]];A={actorId:a,attachments:v,chatJid:x.jid,db:y,ephemeralSetting:z,initiatingSource:g,isFirstMsg:x.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:w,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(y,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});yield m(p,o);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Send GIF attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("MAWSendExternalLinkXMAV2",["ConstUriUtils","MAWExternalId","MAWExternalLinkUtil","MAWGetEphemeralSettings","MAWGetImageSpec","MAWJobDefinitions","MAWTimedJob","MAWXMALoggingUtils","QPLUserFlow","WAArmadilloXMA.pb","WAJobOrchestratorTypes","WALogger","asyncToGeneratorRuntime","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['S410301 The externalLinkUrl set as native and action URL in XMA is not a valid URI"']);h=function(){return a};return a}function a(a,b,c,d,e,f,g,h,j,k){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k,l,m){j=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(f,j));var n=void 0;if(e!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(e.type)){e=new File([e],"preview",{type:e.type});var o=(yield d("MAWGetImageSpec").getImageSpec(e));n={file:e,height:o.height,width:o.width}}e={content:a,ephemeralSetting:j==null?void 0:j,offlineAttachmentId:k==null?void 0:k,optimisticMsg:m==null?void 0:{msgId:m==null?void 0:m.messageExternalId,ts:m==null?void 0:m.offlineMsgTimestamp},quote:l,s2sInstanceKey:g,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:i,xmaMessageType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE};a=(o=d("ConstUriUtils").getUri(b.url))==null?void 0:o.getDomain();j=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(e.xmaMessageType);d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{xmaTargetType:j}});d("ConstUriUtils").isValidUri(b.url)||d("WALogger").ERROR(h());l={defaultCTA:{actionUrl:b.url,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:b.url},overlayIconGlyph:void 0,subtitleText:b.author_name,titleText:(k=b.title)!=null?k:a};c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:g});return d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendXMAShareMsg",{args:e,chatJid:f,previewFile:(i=n)!=null?i:void 0,s2sInstanceKey:g,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},xmaArgs:l,xmaMsgExternalId:(o=m==null?void 0:m.messageExternalId)!=null?o:d("MAWExternalId").generateExternalId()}))});return i.apply(this,arguments)}g.sendExternalLinkXMAV2=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithXMAAttachment",["I64","LSAuthorityLevel","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","MAWVault","MWPActor.react","MessagingAttachmentType","QPLUserFlow","asyncToGeneratorRuntime","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=(j||(j=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(g,j,k,l,m,n,o,p,q,r){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;n(o);var s=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),t=(h||(h=d("I64"))).of_float(s);f=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,g,(f=d("MAWVault").unvault(r))!=null?f:"",j,void 0,m,void 0,o,t,1024));yield b.messages.add(f);f={attachmentFbid:k,attachmentIndex:h.zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:i.ofNumber(c("LSAuthorityLevel").OPTIMISTIC),hasMedia:!1,hasXma:!0,isSharable:!1,messageId:o,offlineAttachmentId:k,previewUrl:l==null?void 0:l.url,subtitleText:q,threadKey:j,timestampMs:t,titleText:p,transportKey:"WhatsApp"};if((l==null?void 0:l.type)==="image"){var u;f=babelHelpers["extends"]({},f,{previewHeight:((u=l.thumbnailSpec)==null?void 0:u.height)?(h||(h=d("I64"))).of_float((u=l.thumbnailSpec)==null?void 0:u.height):void 0,previewWidth:((u=l.thumbnailSpec)==null?void 0:u.width)?(h||(h=d("I64"))).of_float((u=l.thumbnailSpec)==null?void 0:u.width):void 0})}yield b.attachments.add(f);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"useMAWCreateOptimisticSecureMessageWithXMAAttachment",lastActivityTs:t,lastReadTs:t,snippet:d("MAWAdminMsg").buildLocalizedString([d("MAWVault").unvault(r)],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),snippetSenderContactId:e,threadKey:j,txn:b});return{messageExternalId:o,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(k),offlineMsgTimestamp:s}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":64")}}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageV2",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MWPActor.react","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=c("useAsyncReStore")(),e=d("MWPActor.react").useActor();return k(function(g,j,k,l,m,n,o,p){return(h||(h=b("Promise"))).resolve(a).then(function(a){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"before_create_optimistic_message",{instanceKey:m});var f=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),h=(i||(i=d("I64"))).of_float(f);o(p);var q=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,g,j,k,l,m,n,p,h,1,p));yield b.messages.add(q);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});yield d("MAWOptimisticMessageUtils").optimisticBumpThread(b,{hotEmojiSize:l,mentionedJids:n,messageText:j,senderId:e,threadKey:k,ts:h});return{messageExternalId:p,offlineMsgTimestamp:f}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":58")})},[a,e])}g["default"]=a}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWJobDefinitions","MAWTimedJob","MWPActor.react","MWPReplyContext.react","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","react","requireDeferred","useLSMessagingInitiatingSourceNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext,l=c("requireDeferred")("MWLogSend").__setRef("useMAWSendMessageV2");function m(a){if(a==null)return;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=d("MWPActor.react").useActor(),e=k(d("MWPReplyContext.react").MWPReplyContext),f=e.reply,g=c("useLSMessagingInitiatingSourceNumber")();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e,h,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z){k=babelHelpers["extends"]({content:k,initiatingSource:g,isFirstMsg:s,isForwarded:!1,openMessageOtid:o,openMessageParticipantCount:t,optimisticMsg:{msgId:p,ts:q},participantCount:u,s2sInstanceKey:y,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:n,specialTextSize:m(r)},v!=null&&{quote:v});w!=null&&(k.ephemeralSetting=w);x!=null&&(k.mentionedJids=[].concat(x));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_start",{instanceKey:y});yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:k,chatJid:j,externalId:z,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_end",{instanceKey:y});l.onReady(function(c){var g=(i||(i=d("I64"))).to_string(e),j=r!=null?3:0;return c.log(b,{_mentionedJids:x,actor:a,attachmentFbids:[],attachmentType:j,backend:1,hasReply:f!=null,messagingThreadId:g,msgTtl:w==null?void 0:w.ephemeralExpirationInSec,offlineThreadingId:z,sendType:0,source:n,threadKey:e,threadType:h})})});return function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMarkOptimisticMessageAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){return a.runInTransaction(function(a){return c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(a),{errorMessage:d,optimisticMid:b})},"readwrite",void 0,void 0,f.id+":25")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWGetEphemeralSettings","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","cr:4157","emptyFunction","gkx","promiseDone","react","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageV2","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendMessageV2")(),g=c("useMAWCreateOptimisticSecureMessageV2")(),i=c("useMarkOptimisticMessageAsFailed")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:4157")();return j(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j,m){var n=m.hotEmojiSize,o=m.lssTraceApi,p=m.mentionedJids,q=m.messageText,r=m.onGenerateOfflineMsgId,s=m.reply,t=m.s2sInstanceKey,u=m.thread;d("sendToSentQPLLogger").markSendToSentPoint(t,"send_secure_message_start");var v=d("MAWExternalId").generateExternalId(),w=null;try{o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");m=c("gkx")("4643")?yield b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}));w=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(a.jid,u.threadKey));var b=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var b;return l(s,d("MAWVault").vault(q),u.threadKey,a,n,t,p,(b=r)!=null?b:c("emptyFunction"),v,w)}));return[a,b]})():yield (h||(h=b("Promise"))).all([d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}),d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var a;return g(s,d("MAWVault").vault(q),u.threadKey,n,t,p,(a=r)!=null?a:c("emptyFunction"),v)})]);var x=m[0];m=m[1];o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");o=m.offlineMsgTimestamp;k(m.messageExternalId,Date.now());d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_start");w=w===null?yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,u.threadKey):w;d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_end");m=a(u.threadKey);var y=null;if(s!=null){d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_start");var z=d("MAWDbMsg").toMsgId(s.messageId);z!=null&&(y=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:z})));d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_end")}return f(j,u.threadKey,u.threadType,x.jid,q,m,void 0,v,o,n,x.created,void 0,void 0,y,w,p,t,v)}catch(a){z=a instanceof Error?a.message:"Fail to send secure text message";v!=null&&c("promiseDone")(i(v,z));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return j.apply(this,arguments)}}(),[g,l,k,a,i,e,f])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","FBLogger","I64","Int64Hooks","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWExternalLinkUtil","MAWFetchXMABlob","MAWFindFirstUrl","MAWImagePreProcess","MAWLinkPreviewDataStatusUtils","MAWLinkPreviewDataTypeUtils","MAWParseLinkPreviewXMAData","MAWSendExternalLinkXMAV2","MAWStateContext.react","MAWVault","MWPComposerDraftMessages","WALoggerDeferred","asyncToGeneratorRuntime","emptyFunction","qex","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageWithXMAAttachment","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource","useMarkOptimisticMessageAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendSecureTextMessage")(),g=c("qex")._("460")===!0,h=c("useMAWCreateOptimisticSecureMessageWithXMAAttachment")(),j=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=c("useMarkOptimisticMessageAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,m){var n=m.currentDraftId,o=m.lssTraceApi,p=m.mentionedJids,q=m.messageText,r=m.onGenerateOfflineMsgId,s=m.reply,t=m.s2sInstanceKey,u=m.thread,v=m.threadKey;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Starting Link Preview XMA attachment message send"],"LOG");m=d("MAWExternalId").generateExternalId();n=(n=n)!=null?n:(n=d("MWPComposerDraftMessages").getDraftMessage(v))==null?void 0:n.id;try{n=g?yield i(b,n,t,o):yield k(q,t,o);var w=n==null?void 0:n.xmaData,x=d("MAWLinkPreviewDataTypeUtils").linkPreviewDataTypeIsOfType(n==null?void 0:n.dataType,c("E2EELinkPreviewXMADataType").OEMBED);d("sendToSentQPLLogger").addSendToSentAnnotations(t,{bool:{has_xma_data:w!=null,is_link_preview_enabled:g,is_link_preview_oembed_data:x}});o==null?void 0:o.addAnnotationBoolean("has_xma_data",w!=null);o==null?void 0:o.addAnnotationBoolean("is_link_preview_enabled",g);o==null?void 0:o.addAnnotationBoolean("is_link_preview_oembed_data",x);if(w==null)return f(b,{mentionedJids:p,messageText:q,onGenerateOfflineMsgId:r,reply:s,s2sInstanceKey:t,thread:u});n=null;if(s!=null){b=d("MAWDbMsg").toMsgId(s.messageId);b!=null&&(n=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:b})))}p=d("MAWExternalId").generateExternalId();r==null?void 0:r(p);b=a(v);var y=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(v,t)}));o==null?void 0:o.addMarkerPoint("fetch_link_preview_blob_start","AppTiming");var z=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("fetch_link_preview_blob",t,function(){return x?d("MAWExternalLinkUtil").getImageBlobResponse({url:w.thumbnail_url}):d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"useMAWSendSecureLinkXMAMessage",url:w.thumbnail_url,xmaContentType:void 0})}));o==null?void 0:o.addMarkerPoint("fetch_link_preview_blob_end","AppTiming");o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");var A=null;if(z!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(z.type)){var B=new File([z],"preview",{type:z.type});A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(B))}A=(yield h(s,u.threadKey,p,A,t,(B=r)!=null?B:c("emptyFunction"),m,(s=w.title)!=null?s:(u=d("ConstUriUtils").getUri(w.url))==null?void 0:u.getDomain(),w.author_name,d("MAWVault").vault(q)));r=A!=null?{messageExternalId:m,offlineMsgTimestamp:A.offlineMsgTimestamp}:void 0;r!=null?(j(r.messageExternalId,r.offlineMsgTimestamp),o==null?void 0:o.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),o==null?void 0:o.addMarkerPoint("create_optimistic_message_fail","AppTiming"));return d("MAWSendExternalLinkXMAV2").sendExternalLinkXMAV2(q,w,z,y.jid,t,b,v,p,(B=n)!=null?B:void 0,r)}catch(a){s=a instanceof Error?a.message:"Fail to send secure attachment message";yield l(m,s);c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send external link XMA ");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Send Link Preview XMA attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return m.apply(this,arguments)}}(),[h,j,a,g,l,e,f])}function i(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g){if(b==null){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_no_draft_id");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_no_draft_id","AppTiming");return null}d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table","AppTiming");a=(yield a.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.get(b)},"readonly",void 0,void 0,f.id+":339"));if(d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(a==null?void 0:a.status,c("E2EELinkPreviewXMADataStatus").LOADING)){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_still_loading");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_still_loading","AppTiming");return null}return{dataType:a==null?void 0:a.dataType,xmaData:d("MAWParseLinkPreviewXMAData").parseLinkPreviewXMAData(a)}});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=d("MAWFindFirstUrl").findFirstUrl(a);if(a==null||a.length===0)return null;var f=a[0];a=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(a);f=f.entity.url;var g=null;if(a!=null){f=a.oEmbedUrl;try{d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_start"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_start","AppTiming"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:f,request:a.oEmbedRequest})),d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_success"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_success","AppTiming")}catch(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_fail"),d("sendToSentQPLLogger").addSendToSentAnnotations(b,{string:{fetch_link_preview_xma_data_error:a.message}}),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_fail","AppTiming"),e==null?void 0:e.addAnnotation("fetch_link_preview_xma_data_error",a.message),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send External Link XMA.")}}return{dataType:(h||(h=d("I64"))).of_int32(g!=null?c("E2EELinkPreviewXMADataType").OEMBED:c("E2EELinkPreviewXMADataType").FALLBACK),xmaData:babelHelpers["extends"]({},g,{url:(b=(a=g)==null?void 0:a.url)!=null?b:f})}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessagesWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:10194","gkx","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=b("cr:10194")||{createIdbOptimisticMessageWithAttachment:void 0};var j=e.createIdbOptimisticMessageWithAttachment;function a(){var a=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMWLSDefaultThreadSource")(),l=c("gkx")("4643");return function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c,i,m,n,o,p,q){var r=l?yield d("MAWGetEphemeralSettings").getEphemeralSetting(m.jid,i):void 0;return a.runInTransaction(function(f){return(h||(h=b("Promise"))).all(q.map(function(q){var s=q.attachmentType,t=q.messageExternalId,u=q.offlineAttachmentId;q=q.optimisticMediaAttachment;if(s==null)return(h||(h=b("Promise"))).resolve();return l?j==null?void 0:j(f,{attachmentType:s,ephemeralSettings:r,initiatingSource:g,instanceKey:n,mawThreadResult:m,mediaGroupMetadataMap:p,messageExternalId:t,offlineAttachmentId:u,onOfflineMsgId:o,optimisticMediaAttachment:q,reply:c,senderId:e,threadKey:i,threadSource:k(i)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(a,f,e,c,i,u,q,n,o,s,t,p)}))},"readwrite","ui",void 0,f.id+":72")});return function(a,b,d,e,f,g,h){return c.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWSendSecureStagedMediaAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWGetEphemeralSettings","MAWMediaManagerUtils","MAWPrepareAttachmentsFromMediaManager","MAWSecureAttachmentGroupingUtils","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","Promise","QPLUserFlow","WALoggerDeferred","WAMediaQplHelper","asyncToGeneratorRuntime","err","gkx","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMAWCreateOptimisticSecureMessagesWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),j=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=c("useMarkOptimisticMessagesAsFailed")(),m=c("useMAWCreateOptimisticSecureMessagesWithAttachments")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.mediaStagings,q=n.messageTypeParams,r=n.onGenerateOfflineMsgId,s=n.reply,t=n.s2sInstanceKey,u=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Starting staged media attachment message send"],"LOG");var v=new Map();try{var w=null;c("gkx")("5318")===!0?(n=d("MAWSecureAttachmentGroupingUtils").orderMediaStagingsForGrouping(p),w=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMediaStagings(n)):n=p;var x=new Map();o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");var y=(yield f(u.threadKey,t));if(c("gkx")("5318")===!0){var z=n.map(function(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();e={attachmentType:a.attachmentType,messageExternalId:e,offlineAttachmentId:a.offlineAttachmentId,optimisticMediaAttachment:b};return e}).filter(Boolean);z=(yield m(s,u.threadKey,y,t,r,w,z));z.forEach(function(a){if(a==null||a.offlineAttachmentId==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:a.messageExternalId,offlineMsgTimestamp:a.offlineMsgTimestamp});k(a.messageExternalId,a.offlineMsgTimestamp)})}else yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();b=(yield j(s,u.threadKey,y,a.offlineAttachmentId,b,t,r,a.attachmentType,e,w));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:e,offlineMsgTimestamp:b.offlineMsgTimestamp});k(b.messageExternalId,b.offlineMsgTimestamp)});return function(b){return a.apply(this,arguments)}}()));o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure media message: unable to find media attachment in useMAWSendSecureAttachmentMessage");return}yield b.processedMediaPromise.then(function(b){x.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),b)})["catch"](function(a){throw a})["finally"](function(){var a=b.optimisticMedia;a!=null&&c("QPLUserFlow").addAnnotations(c("qpl")._(25313175,"1551"),{string:{optimistic_media_file_size:d("WAMediaQplHelper").convertIntegerSizeToStringBucket(a.file.size),optimistic_media_file_type:a.file.type,optimistic_media_type:a.type}},{instanceKey:t})})});return function(b){return a.apply(this,arguments)}}()));z=d("MAWPrepareAttachmentsFromMediaManager").prepareAttachmentsFromMediaManagerImpl(n,q,r,x);o=z.attachments;n=e(u.threadKey);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ls_singleton_db",{instanceKey:t});q=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"ls_singleton_db_resolved",{instanceKey:t});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"thread_result_fetched",{instanceKey:t});z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(y.jid,u.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:t});o={actorId:a,attachments:o,chatJid:y.jid,db:q,ephemeralSetting:z,initiatingSource:g,isFirstMsg:y.created,mediaGroupMetadataMap:w,offlineAttachmentIdToMessageData:v,reply:s,s2sInstanceKey:t,source:n,thread:u};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(q,o)}catch(a){z=a instanceof Error?a:c("err")(typeof a==="string"?a:"Fail to send secure attachment message: "+JSON.stringify(a));n=Array.from(v.values()).map(function(a){a=a.messageExternalId;return a});yield l(n,z.message);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Send staged media attachment message failed:"+JSON.stringify(z)],"ERROR");throw z}finally{p.map(function(a){return d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2["delete"](a.offlineAttachmentId)})}});return function(a){return n.apply(this,arguments)}}(),[a,j,m,k,e,g,l,f])}g["default"]=a}),98);
__d("useMAWSendSecureStickerAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","WALoggerDeferred","asyncToGeneratorRuntime","sendToSentQPLLogger","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;d("sendToSentQPLLogger").markSendToSentPoint(s,"send_secure_message_start");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Starting sticker attachment message send"],"LOG");var t=new Map();try{var u=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),v=d("MAWExternalId").generateExternalId(),w=e(n.threadKey),x=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey,s)])),y=x[0];x=x[1];d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_start");var z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,n.threadKey));d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_start");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));var A=new File([o],"stickerFromPicker",{type:o.type});d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_end");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_start");A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(A,!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_start");A=(yield k(r,n.threadKey,x,u,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER),v));A!=null?(t.set(u,{messageExternalId:v,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_end"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_end","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for sticker"),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_fail"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_start");p==null?void 0:p.addMarkerPoint("image_preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(new File([o],"stickerFromPicker",{type:o.type}),!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_end");p==null?void 0:p.addMarkerPoint("image_preprocess_end","AppTiming");v=[[q,u]];A={actorId:a,attachments:v,chatJid:x.jid,db:y,ephemeralSetting:z,initiatingSource:g,isFirstMsg:x.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:w,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(y,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});yield m(p,o);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Send sticker attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWSendSecureVoiceClipAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWAudioPreProcess","MAWExternalId","MAWGetEphemeralSettings","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.onGenerateOfflineMsgId,q=n.reply,r=n.s2sInstanceKey,s=n.thread;n=n.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Starting voice clip attachment message send"],"LOG");var t=new Map();try{var u=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),v=d("MAWExternalId").generateExternalId(),w=e(s.threadKey),x=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(s.threadKey)])),y=x[0];x=x[1];var z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,s.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:r});var A=(yield d("MAWAudioPreProcess").optimisticAudioPreprocess(n.file));o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");A=(yield k(q,s.threadKey,x,u,A,r,p,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),v));A!=null?(t.set(u,{messageExternalId:v,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),o==null?void 0:o.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),o==null?void 0:o.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p={durations:n.duration||0,file:n.file,isPtt:!0,type:"audio"};v=[[p,u]];A={actorId:a,attachments:v,chatJid:x.jid,db:y,ephemeralSetting:z,initiatingSource:g,isFirstMsg:x.created,offlineAttachmentIdToMessageData:t,reply:q,s2sInstanceKey:r,source:w,thread:s};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(y,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";n=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});yield m(n,o);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Send voice clip attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(i||(i=c("useReStore")))();return k(function(c){return!d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?(h||(h=b("Promise"))).resolve():a.runInTransaction(function(a){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,c.threadKey)},"readwrite",void 0,void 0,f.id+":37")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionTypeUtil","MAWOptimisticUpdateContactRelationship","MWLSLogSend","MWPActor.react","MWPBumpEntityKey","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","err","react","sendToSentQPLLogger","sendToSentQPLUtils","useAsyncReStore","useLSMessagingInitiatingSource","useLSMessagingSource","useMAWSendSecureGifAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureStagedMediaAttachmentMessage","useMAWSendSecureStickerAttachmentMessage","useMAWSendSecureTextMessage","useMAWSendSecureVoiceClipAttachmentMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function a(a){var e=d("MWPActor.react").useActor(),f=l(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply;f=c("useLSMessagingInitiatingSource")();var i=c("useAsyncReStore")(),m=c("useLSMessagingSource")(),n=c("useMAWSendSecureTextMessage")(),o=c("useMAWSendSecureLinkXMAMessage")(),p=c("useMAWSendSecureGifAttachmentMessage")(),q=c("useMAWSendSecureStagedMediaAttachmentMessage")(),r=c("useMAWSendSecureStickerAttachmentMessage")(),s=c("useMAWSendSecureVoiceClipAttachmentMessage")(),t=c("useMWLSUnarchiveThread")(),u=c("useMAWUpdateThreadCapabilities")();return d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var l,v=f.composerEntrypointForLogging,w=f.currentDraftId,x=f.externalAttachmentUrl,y=f.hotEmojiSize,z=f.lssTraceApi,A=f.mentionedJids,B=f.messageText,C=f.reply,D=f.s2sInstanceKey,E=f.stickerId,F=f.thread;f=f.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");(l=d("sendToSentQPLLogger")).markSendToSentPoint(D,"send_secure_message_start");z.addMarkerPoint("send_secure_message_started","AppTiming");var G=(yield i);l.markSendToSentPoint(D,"db_ready");var H=d("LSMessagingThreadTypeUtil").isMessageRequest(F);l=(j||(j=d("I64"))).equal(F.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(-10));var I=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("get_media_staging_query",D,function(){return d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(G,F.threadKey))})),J=d("MWSharedMsgLogUtils").getMessageTypeParams({externalAttachmentUrl:x,hotEmojiSize:y,mediaStagings:I,messageText:B,reply:C,stickerId:E,threadType:F.threadType,voiceClip:f}),K=d("LSThreadAttributionTypeUtil").getSource(F.threadKey,m);d("sendToSentQPLLogger").addSendToSentAnnotations(D,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(F,J,k.unwrapIntEnum(K),v));d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(z,J,F,v);v=function(a){d("MWLSLogSend").logSentHeroInteraction(z,a,{isMessageRequest:H,mwVersion:d("MWVersion").v2,source:(k||(k=d("LSIntEnum"))).unwrapIntEnum(K),threadType:F.threadType}),d("sendToSentQPLLogger").markSendToSentPoint(D,"offline_msg_id_generated"),d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a,D)};var L=[],M=J.hasAttachment,N=J.hasLinks;B!=null&&B!==""&&(N?(L.push(o(G,{currentDraftId:w,lssTraceApi:z,mentionedJids:A,messageText:B,onGenerateOfflineMsgId:M?void 0:v,reply:C,s2sInstanceKey:D,thread:F,threadKey:F.threadKey})),d("sendToSentQPLLogger").markSendToSentPoint(D,"link_xma_message_promise_pushed_to_send_promises")):(L.push(n(G,{hotEmojiSize:y,lssTraceApi:z,mentionedJids:A,messageText:B,onGenerateOfflineMsgId:M?void 0:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"text_message_promise_pushed_to_send_promises")));w=!0;M&&(E!=null&&x!=null?(L.push(r({externalAttachmentUrl:x,lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"sticker_message_promise_pushed_to_send_promises"),w=!1):x!=null?(L.push(p({externalAttachmentUrl:x,lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),w=!1):f!=null?(L.push(s({lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F,voiceClip:f})),d("sendToSentQPLLogger").markSendToSentPoint(D,"voice_clip_message_promise_pushed_to_send_promises"),w=!1):I.length>0?(L.push(q({lssTraceApi:z,mediaStagings:I,messageTypeParams:J,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"staged_media_message_promise_pushed_to_send_promises")):(d("sendToSentQPLLogger").markSendToSentPoint(D,"no_send_promises_pushed_to_send_promises"),c("FBLogger")("messenger_web_media").mustfix("Unable to send attachment in useMAWSendSecureMessageV2Impl: incorrect params")));w&&a();g(F.threadKey,!1);d("sendToSentQPLLogger").markSendToSentPoint(D,"attachment_and_reply_data_cleared");L.length===0?(d("sendToSentQPLLogger").markSendToSentPoint(D,"create_send_promises_fail"),L.push(new(h||(h=b("Promise")))(function(a,b){b(c("err")("No send actions taken because hasAttachment="+M.toString()))}))):d("sendToSentQPLLogger").markSendToSentPoint(D,"create_send_promises_end",void 0,{"int":{send_promise_count:L.length}});d("sendToSentQPLLogger").markSendToSentPoint(D,"resolve_send_promises_start");(L.length>1||I.length>1)&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_message_send","send:"+L.length+".media:"+I.length);yield (h||(h=b("Promise"))).all(L)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(D,"message_send_fail",a);a instanceof Error?c("FBLogger")("messenger_web_messaging").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+M.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl"):c("FBLogger")("messenger_web_messaging").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+M.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl, %s",a.message);throw a});d("sendToSentQPLLogger").markSendToSentPoint(D,"resolve_send_promises_end");B!=null&&B!==""&&N&&d("sendToSentQPLLogger").markSendToSentSuccess(D);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");d("MAWOptimisticUpdateContactRelationship").call(F,G,e);yield u(F);H&&d("MessageRequestsLog").logActionConfirmed(F,1);l&&t(F.threadKey)});return function(a){return f.apply(this,arguments)}}(),[i,m,g,e,u,f,o,n,r,p,s,q,a,t])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","MAWJids","MWPReplyContext.react","MWV2ComposerActionsContext.react","WALoggerDeferred","getMWIsDefaultHotlikeStickerId","justknobx","promiseDone","qpl","react","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useMAWSendSecureMessageV2Impl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a,b,e){var f=j(d("MWPReplyContext.react").MWPReplyContext),g=f.reply;f=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var h=f.onMessageSendAttempt,k=c("useMAWSendSecureMessageV2Impl")(e),l=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0);return function(e,f,j,m,n,o,p,q,r,s,t,u,v,w,x,y){c("promiseDone")(d("WALoggerDeferred").logWithTags(["Composer"],["Calling useMAWSendSecureMessageV2"],"LOG"));var z=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),A=e;j!=null&&c("getMWIsDefaultHotlikeStickerId")((i||(i=d("I64"))).to_string(j))&&(A="\ud83d\udc4d");var B=d("sendToSentQPLLogger").markSendToSentStart();h==null?void 0:h(!0);l(function(e){c("promiseDone")(k({composerEntrypointForLogging:y,currentDraftId:x,externalAttachmentUrl:o,hotEmojiSize:m,lssTraceApi:e,mentionedJids:z,messageText:A,reply:g,s2sInstanceKey:B,stickerId:j,thread:a,voiceClip:q}),function(){b(),c("justknobx")._("2486")&&(s&&s())},function(a){d("sendToSentQPLLogger").markSendToSentFail(B,"message_send_fail",a);e.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_web_messaging",{error:a})})})}}g["default"]=a}),98);
__d("useMWMediaManagerUploadFailedToast",["mwPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){return i(function(a,b){d("mwPushToast").mwPushErrorToast({body:b,title:a})},[])}g["default"]=a}),98);
__d("useMWMediaManager",["LSGetAttachmentType","LSIntEnum","MWMediaManager","MessagingAttachmentType","gkx","justknobx","qex","useMWMediaManagerUploadFailedToast"],(function(a,b,c,d,e,f,g){"use strict";var h,i=25;function a(a){var b=a.onUploadFailure;a=a.thread;var e=c("useMWMediaManagerUploadFailedToast")(),f=c("gkx")("5318")===!0?c("justknobx")._("2538"):void 0;return d("MWMediaManager").useMediaManager({getMaxAttachmentSizeInMB:j,maxNumberOfAttachments:f,onUploadFailure:b,showUploadFailureToast:e,thread:a})}function j(a,b){a=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(a);if((h||(h=d("LSIntEnum"))).toNumber(a)===c("MessagingAttachmentType").FILE){return(a=k(b))!=null?a:i}return i}function k(a){if(a)return c("qex")._("245");else return c("qex")._("413")}g["default"]=a}),98);
__d("MAWSecureComposer.react",["fbt","MAWSecureComposerText","MAWSecureThreadNonAddressableContactBanner.react","MAWSecureTypingState","MAWSupportedFileTypes","MWBlockedComposerLogging","MWPReplyContext.react","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","WebUXLoggingSurfaceContextProvider","cr:9744","emptyFunction","gkx","react","useCometAlertDialog","useMAWEditMessageData","useMAWSendSecureMessageV2","useMWMediaManager","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));e=i;var k=e.useCallback,l=e.useContext,m=e.useState,n=c("gkx")("23429");function a(a){var e=a.afterSendMessage;e=e===void 0?c("emptyFunction"):e;var f=a.isPreviewThread;a=a.thread;var g=l(d("MWPReplyContext.react").MWPReplyContext);g=g.reply;var i=c("useMAWEditMessageData")(),o=c("useCometAlertDialog")(),p=k(function(){return o({body:h._("__JHASH__cHTRYg3bfeC__JHASH__"),title:h._("__JHASH__shIDOoHHO5L__JHASH__")})},[o]);p=c("useMWMediaManager")({onUploadFailure:p,thread:a});var q=p.handleFileRemove,r=p.handleFileSelect,s=p.mediaStaging;p=p.resetAttachments;e=c("useMAWSendSecureMessageV2")(a,e,p);p=d("MAWSecureTypingState").useOnTypingStateChanged(a.authorityLevel,a.threadKey,a.threadType);c("useMWV2FileDropzoneRegisterHandler")(r);var t=m(!1),u=t[0];t=t[1];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,u?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:d("MWBlockedComposerLogging").ComposerBlockingReason.NOT_BLOCKED);f=c("useMWPComposerEditor")({composerEntrypointForLogging:"MAWSecureComposer.lexical",getTextFromEditorState:d("MAWSecureComposerText").getTextFromEditorState,isPreviewThread:f,mediaStaging:s,onSendMessage:e,onTypingStateChanged:p,threadKey:a.threadKey,threadType:a.threadType});p=f.editor;var v=f.editorElementRef,w=f.hasStuffToSend;f=f.sendMessage;return j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"secure_composer",children:j.jsxs("div",{"data-testid":void 0,children:[g!=null?j.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:g.messageId,messageThreadKey:g.threadKey,messageTimestamp:g.timestampMs,thread:a}):null,b("cr:9744")&&j.jsx(b("cr:9744"),{isReplying:g!=null,threadKey:a.threadKey,threadType:a.threadType}),j.jsx(c("MAWSecureThreadNonAddressableContactBanner.react"),{setHideComposerEditor:t,thread:a}),i!=null&&j.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:i}),u||i!=null?null:j.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:p,editorElementRef:v,hasStuffToSend:w,isMentionsPluginEnabled:n,mediaStaging:s,onAttachmentRemoved:q,onAttachmentsAdded:r,onSendMessage:e,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:d("MAWSupportedFileTypes").supportedFileTypes,surface:"mwp_maw_secure_composer",thread:a})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MAWSecureComposerUtils",["I64","LSMessagingThreadTypeUtil","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWUIJob","MessageRequestsLog","Promise","WAJobOrchestratorTypes","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)){f!=null&&d("MessageRequestsLog").logActionConfirmed(e,8,(i||(i=d("I64"))).to_string(f));c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e.threadKey,"MAWSecureComposerUtils",function(a,c){d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("deleteThread",{chatJid:c,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));return(h||(h=b("Promise"))).resolve()}));return}}g.onDeleteThread=a}),98);
__d("MWChatColors",[],(function(a,b,c,d,e,f,g){"use strict";a={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},svgFill:{fill:"x148u3ch",$$css:!0},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3",$$css:!0}};b={styles:a};g.MessageActions=b}),98);
__d("MWMessageReactionIcon.react",["fbt","MWChatColors","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=a.size;b=b===void 0?16:b;a=a.viewBox;a=a===void 0?"0 0 16 16":a;return k.jsxs("svg",{fill:"none",height:b,viewBox:a,width:b,xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("title",{children:h._("__JHASH__Wo2O5nlXhKT__JHASH__")}),k.jsx("path",{className:(i||(i=c("stylex")))(d("MWChatColors").MessageActions.styles.svgFill),d:"M12.48 0.64C12.48 0.286538 12.7665 0 13.12 0C13.4735 0 13.76 0.286538 13.76 0.64V2.08C13.76 2.16837 13.8316 2.24 13.92 2.24H15.36C15.7135 2.24 16 2.52654 16 2.88C16 3.23346 15.7135 3.52 15.36 3.52H13.92C13.8316 3.52 13.76 3.59163 13.76 3.68V5.12C13.76 5.47346 13.4735 5.76 13.12 5.76C12.7665 5.76 12.48 5.47346 12.48 5.12V3.68C12.48 3.59163 12.4084 3.52 12.32 3.52H10.88C10.5265 3.52 10.24 3.23346 10.24 2.88C10.24 2.52654 10.5265 2.24 10.88 2.24H12.32C12.4084 2.24 12.48 2.16837 12.48 2.08V0.64Z"}),k.jsx("path",{className:i(d("MWChatColors").MessageActions.styles.svgFill),clipRule:"evenodd",d:"M8.96 2.42705C8.96 2.28386 8.86505 2.15735 8.726 2.12317C8.18582 1.99041 7.62113 1.92 7.04 1.92C3.15192 1.92 0 5.07192 0 8.96C0 12.8481 3.15192 16 7.04 16C10.9281 16 14.08 12.8481 14.08 8.96C14.08 8.37887 14.0096 7.81418 13.8768 7.274C13.8427 7.13495 13.7161 7.04 13.573 7.04H13.12C12.0596 7.04 11.2 6.18039 11.2 5.12C11.2 4.94327 11.0567 4.8 10.88 4.8C9.81961 4.8 8.96 3.94039 8.96 2.88V2.42705ZM4.63999 6.4C4.03999 6.4 3.67999 6.88 3.67999 7.68C3.67999 8.48 4.03999 8.96 4.63999 8.96C5.23999 8.96 5.59999 8.48 5.59999 7.68C5.59999 6.88 5.23999 6.4 4.63999 6.4ZM9.43999 6.4C8.83999 6.4 8.47999 6.88 8.47999 7.68C8.47999 8.48 8.83999 8.96 9.43999 8.96C10.04 8.96 10.4 8.48 10.4 7.68C10.4 6.88 10.04 6.4 9.43999 6.4ZM10.56 11.2C10.56 12.48 8.96 13.76 7.04 13.76C5.12 13.76 3.52 12.48 3.52 11.2C3.52 11.0233 3.66327 10.88 3.84 10.88H10.24C10.4167 10.88 10.56 11.0233 10.56 11.2Z",fillRule:"evenodd"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWAddReactionButton.react",["fbt","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMessageReactionIcon.react","MWV2MessageReactionHooks","MWXPressable.react","MWXTooltip.react","ODS","emptyFunction","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useMemo,o={emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0}},p=l.forwardRef(a);function a(a,b){var e=a.onHoverInPrerenderer,f=a.onHoverOutPrerenderer,g=a.onPressInPrerenderer,i=a.showPopover;a=h._("__JHASH__czR8vxcW0mN__JHASH__");var k=m(function(){i(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")},[i]);return l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:a,children:l.jsx(c("MWXPressable.react"),{"aria-label":a,expanding:!0,loggingEvent:"click_react_to_message",onHoverIn:e,onHoverOut:f,onPress:k,onPressIn:g,overlayRadius:"inherit",ref:b,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x7daf1o xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:"x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x14ju556 x11i5rnm x78zum5 xdt5ytf xl56j7k x1npj6m0",children:l.jsx(c("MWMessageReactionIcon.react"),{size:"1.125rem"})})})})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.isSecure,e=a.message,f=a.sendReaction,g=a.setShouldRowStayExpanded,h=a.threadKey;a=a.threadType;var i=(k||(k=d("I64"))).to_string(h),j=k.to_string(e.timestampMs),m=n(function(){return d("MWChatMessageId").makeSent(i,e.messageId,j)},[i,e.messageId,j]),o=d("MWCMThreadTypes.react").isBroadcastThread(a);a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);h=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(h);var q=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(e);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:h&&o,hasReactionsV2:h,isBroadcastChannel:a,isBroadcastThread:o,isSecure:b,messageID:m,onVisibilityChange:g,selectedReactions:(h=q)!=null?h:void 0,sendReaction:f,children:function(a,b,c,d,e,f){return l.jsx(p,{messageID:m,onHoverInPrerenderer:d,onHoverOutPrerenderer:e,onPressInPrerenderer:f,ref:a,showPopover:b})}})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),226);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25476419472006466"}),null);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters",["MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMContentTakedownEnforcementNoticeDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMContentTakedownEnforcementNoticeDialog.entrypoint",["JSResourceForInteraction","MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.interventions_ids;return{queries:{queryReference:{parameters:c("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"),variables:{interventions_ids:a}}}}},root:c("JSResourceForInteraction")("MWCMContentTakedownEnforcementNoticeDialog.react").__setRef("MWCMContentTakedownEnforcementNoticeDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatComposerVoiceIndicator.react",["fbt","CurrentUser","MDSTextPairing.react","MWXText.react","getTopMostRoute","react","useCometRouterState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.forceShown_TEST_ONLY;a=a===void 0?!1:a;var b=c("useCometRouterState")();b=b!=null?c("getTopMostRoute")(b):null;b=(b=b==null?void 0:b.tracePolicy)!=null?b:null;b=b!==null?b.startsWith("comet.page.admin")||b.startsWith("comet.group.admin"):!1;var d=c("CurrentUser").getName();d=h._("__JHASH__moy48BoqFvP__JHASH__",[h._param("full name",j.jsx(c("MWXText.react"),{type:"meta2",children:d}))]);return b||a?j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xi81zsa x14vqqas xkrivgy xat24cr x1gryazu xyinxu5 xho0xa1 xs9asl8 x1vobaek",children:j.jsx(c("MDSTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:d}),level:4,textAlign:"center"})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatHeaderDetailsSubtitleMutedIcon.react",["fbt","MWXTooltip.react","cr:4426","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a.forceInlineDisplay;return j.jsx(c("MWXTooltip.react"),{align:"start",position:"above",tooltip:h._("__JHASH__XpvJmcPfz_-__JHASH__"),children:j.jsx(b("cr:4426"),{})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatMultiReactionsTooltip.react",["fbt","I64","Int64Hooks","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSPlatformWaitForTaskCompletion","MWPActor.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.useRef,o=b.useState,p=9;function a(a){var b=a.isProcessingReactions,e=a.messageId,g=a.onTooltipCTAPress,k=a.reactionFbid,q=a.threadKey,r=(i||(i=c("useReStore")))();a=o(!0);var s=a[0],t=a[1];d("Int64Hooks").useEffectInt64(function(){b||(t(!0),c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(r,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,reactionFbid:k,threadId:q})},"issueReactionsV2DetailsUsersListFetch").then(function(){t(!1)})))},[r,q,e,k,t,b]);var u=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(r.tables.reactions_v2_details).getKeyRange(q,e).filter(function(a){return(j||(j=d("I64"))).equal(a.reactionFbid,k)})},[r,q,e,k],f.id+":84");var v=new Map();a.forEach(function(a){return v.set((j||(j=d("I64"))).to_string(a.reactorId),a.fullName)});var w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.threads).getKeyRange(q).map(function(a){var b=a.parentThreadKey;return d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(r.tables.contextual_profile_v1).filter(function(a){return(j||(j=d("I64"))).equal(a.associatedEntityId,b)}),f.id+":102")})},[r,q],f.id+":97"),x=null;w!=null&&w.forEach(function(a){var b=(j||(j=d("I64"))).to_string(a.ownerId),c=a.profileName;if(c==null)return;v.has(b)&&v.set(b,c);(j||(j=d("I64"))).equal(a.ownerId,u)&&(x=c)});var y=a.map(function(a){return v.get((j||(j=d("I64"))).to_string(a.reactorId))}).filter(Boolean);w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.reactions_v2).getKeyRange(q,e,k)},[r,q,e,k],f.id+":131");a=(a=w==null?void 0:w.viewerIsReactor)!=null?a:!1;var z=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.contacts).getKeyRange(u).map(function(a){return a.name})},[r,u],f.id+":143");z=x!=null?x:z;var A=w!=null?(j||(j=d("I64"))).to_int32(w.count):0;A===1&&a&&y.length===0&&z!=null?y.push(z):a&&y[0]!=null&&z!=null&&((w=y[0])==null?void 0:w.toString())!==z&&y.unshift(z);var B=h._("__JHASH__GTBXwO8BaZr__JHASH__");a=function(){var a=[].concat(y.slice(0,p)),d=!1;if(y.length>p){var e=A-p;if(e<0)return[B,!0];a.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(e),h._param("count",String(c("intlSummarizeNumber")(e)))]).toString())}else d=(!s||!b)&&y.length!==A;return a.length===0?[B,d]:[a.map(function(a,b){return l.jsx("div",{children:a},String(b))}),d]}();w=a[0];var C=a[1],D=c("usePrevious")(C),E=n(null);m(function(){return function(){E.current!=null&&window.clearTimeout(E.current)}},[]);m(function(){if(D===C)return;if(!C)E.current!=null&&(window.clearTimeout(E.current),E.current=null);else{if(E.current!=null)return;E.current=window.setTimeout(function(){E.current=null,c("promiseDone")(r.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":241")),c("promiseDone")(r.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,threadId:q})},"readwrite",void 0,void 0,f.id+":249"))},700)}},[r,C,D,e,k,q]);return l.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__g_e4jdcSB-i__JHASH__"),onPress:g,overlayDisabled:!0,children:l.jsx(c("MWXText.react"),{color:"tooltip",type:"body4",children:w})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,b);a=h._("__JHASH__FoZB3MxTOU9__JHASH__");return j.jsxs("div",{children:[j.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),j.jsx(c("MWXComposerBanner.react"),{bodyText:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6404754876239370"}),null);
__d("MWChatViewerChatVisibilityHookQuery.graphql",["MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatViewerChatVisibilityHookQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatViewerChatVisibilityHookQuery",selections:a},params:{id:b("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"),metadata:{},name:"MWChatViewerChatVisibilityHookQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatViewerChatVisibilityHook",["CometRelay","MWChatViewerChatVisibilityHookQuery.graphql","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=h!==void 0?h:h=b("MWChatViewerChatVisibilityHookQuery.graphql");function a(){var a,b=d("CometRelay").useRelayEnvironment(),e=d("CometRelay").useLazyLoadQuery(k,{},{fetchPolicy:"store-only"});j(function(){var a;(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)==null&&c("promiseDone")(d("CometRelay").fetchQuery(b,k,{}).toPromise())},[e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility,b]);return(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)===!0}g.useViewerChatVisibility=a}),98);
__d("MWComposerPlaceholder.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPArmadilloLoadingStateMessage.react",["fbt","MWXColumn.react","MWXColumnItem.react","MWXSpinner.react","MWXText.react","cr:6285","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.threadKey;a=b("cr:6285")(a);return a?null:j.jsxs(c("MWXColumn.react"),{align:"center",id:"armadillo-loading-indicator-banner",paddingVertical:12,spacing:8,children:[j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXSpinner.react"),{color:"disabled",size:20})}),j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{type:"entityHeaderMeta1",children:h._("__JHASH__7VvIEysTDk2__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWLSProactiveWarningTables",["MWPreloadableQueries","MWThreadKey.react","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").getThreadBannerQuery(b,a)},[b,a],f.id+":31"),g=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").getProactiveWarningsForThreadQuery(b,a)},[b,a],f.id+":36");return{banner:e,pwSettings:g}}g["default"]=a}),98);
__d("useMWProactiveWarningPayloadMemo",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.banner,c=a.ignoreDismissTime,e=a.isPWDismissTimeSet,f=a.pwSettings,g=a.threadKey;return d("Int64Hooks").useMemoInt64(function(){if(f==null||b==null)return;var a=f.context,i=f.entryPoint,j=f.storyLocation,k=f.suspectId,l=f.tag,m=b.bannerId,n=b.cta1Title,o=b.cta2Title,p=b.heading,q=b.titleSectionOne;if(!((Boolean(c)||e)&&(h||(h=d("I64"))).equal(m,(h||(h=d("I64"))).of_string("7"))))return;if(k!=null&&a!=null&&j!=null&&i!=null&&l!=null&&p!=null&&o!=null&&n!=null&&q!=null)return{context:a,cta1Title:n,cta2Title:o,description:q,falco_event_data:{data:{entry_point:(h||(h=d("I64"))).to_int32(i),feedback_tags:[l],surface:h.to_int32(j)},impersonatedUser:{id:"0"},otherUser:{id:h.to_string(k)},reportedUser:{id:"0"},thread:{id:h.to_string(g),type:1}},header:p,threadKey:g}},[g,b,f,e,c])}g["default"]=a}),98);
__d("useMWProactiveWarningPayload",["I64","MWThreadKey.react","useMWLSProactiveWarningTables","useMWProactiveWarningPayloadMemo"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),f=c("useMWLSProactiveWarningTables")(),g=f.banner;f=f.pwSettings;b=b!=null&&(h||(h=d("I64"))).equal((b=b.proactiveWarningDismissTime)!=null?b:(h||(h=d("I64"))).zero,(h||(h=d("I64"))).zero);return c("useMWProactiveWarningPayloadMemo")({banner:g,ignoreDismissTime:a,isPWDismissTimeSet:b,pwSettings:f,threadKey:e})}g["default"]=a}),98);
__d("MWPSafetyNoticesChatBlockedComposerDetails.react",["fbt","FDSButton.react","IXTProactiveWarningFollowUpActionsCell.react","LSFactory","LSSetProactiveWarningDismissTimeStoredProcedure","LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent","LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent","LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent","MDSTextPairing.react","MWThreadKey.react","MWXText.react","promiseDone","react","stylex","useMWProactiveWarningPayload","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect,n={button:{width:"x5sxuk9",$$css:!0}};function a(a){var b=a.fallback,e=a.onClose;a=a.thread;var g=c("useMWProactiveWarningPayload")(void 0,a),k=(i||(i=c("useReStore")))(),o=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();m(function(){g!=null&&c("LsFrxMessengerFeedbackProactiveWarningBannerShownFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},g.falco_event_data.data,{mute_duration:(a=g.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=g.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:g.falco_event_data.impersonatedUser,other_user:g.falco_event_data.otherUser,reported_user:g.falco_event_data.reportedUser,thread:g.falco_event_data.thread}})},[g]);if(g==null)return b;a=h._("__JHASH__I2SwG7QkbS2__JHASH__",[h._param("header value",g.header)]);b=h._("__JHASH__kg4ss1ruH19__JHASH__",[h._param("message value",g.description)]);var p=l.jsx("div",{className:(j||(j=c("stylex")))(n.button,!1),children:l.jsx(c("IXTProactiveWarningFollowUpActionsCell.react"),{context:g.context,label:g.cta1Title,onClose:e,onPress:function(){c("LsFrxMessengerFeedbackProactiveWarningBannerSecondaryActionTappedFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},g.falco_event_data.data,{mute_duration:(a=g.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=g.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:g.falco_event_data.impersonatedUser,other_user:g.falco_event_data.otherUser,reported_user:g.falco_event_data.reportedUser,thread:g.falco_event_data.thread}})},setPWDismissTime:function(){c("promiseDone")(k.runInTransaction(function(a){return c("LSSetProactiveWarningDismissTimeStoredProcedure")(c("LSFactory")(a),{threadKey:o})},"readwrite",void 0,void 0,f.id+":117"),e,e)}})}),q=l.jsx("div",{className:j(n.button,!1),children:l.jsx(c("FDSButton.react"),{label:h._("__JHASH__lh-XuPg59Gs__JHASH__",[h._param("CTA text value",g.cta2Title)]),onPress:function(){c("LsFrxMessengerFeedbackProactiveWarningBannerPrimaryActionTappedFalcoEvent").log(function(){var a;return{data:babelHelpers["extends"]({},g.falco_event_data.data,{mute_duration:(a=g.falco_event_data.data.mute_duration)==null?void 0:a.toString(),selected_messages_count:(a=g.falco_event_data.data.selected_messages_count)==null?void 0:a.toString()}),impersonated_user:g.falco_event_data.impersonatedUser,other_user:g.falco_event_data.otherUser,reported_user:g.falco_event_data.reportedUser,thread:g.falco_event_data.thread}}),c("promiseDone")(k.runInTransaction(function(a){return c("LSSetProactiveWarningDismissTimeStoredProcedure")(c("LSFactory")(a),{threadKey:g.threadKey})},"readwrite",void 0,void 0,f.id+":156"),e,e)},reduceEmphasis:!1,size:"medium",type:"secondary"})});b=l.jsxs(l.Fragment,{children:[l.jsx(c("MDSTextPairing.react"),{body:l.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:b}),headline:l.jsx(c("MWXText.react"),{color:"primary",type:"bodyLink4",children:a}),level:4,textAlign:"center"}),l.jsxs("div",{className:"x78zum5 x1q0g3np x1qughib x14vqqas xh8yej3",children:[p,q]})]});return l.jsx("div",{className:"xzg4506 xi81zsa x14vqqas xyinxu5 xho0xa1 xxbrewl x1vobaek",children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPSafetyNoticesChatBlockedComposer.react",["MWPSafetyNoticesChatBlockedComposerDetails.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.fallback,d=a.onClose;a=a.thread;return i.jsx(c("MWPSafetyNoticesChatBlockedComposerDetails.react"),{fallback:b,onClose:d,thread:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerXacDisclosureRelayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5305811016137974"}),null);
__d("MWComposerXacDisclosureRelayQuery.graphql",["MWComposerXacDisclosureRelayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],c=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],d={kind:"InlineFragment",selections:[{args:null,documentName:"MWComposerXacDisclosureRelayQuery",fragmentName:"MWComposerXacDisclosureView_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("MWComposerXacDisclosureRelayQuery_facebookRelayOperation"),metadata:{},name:"MWComposerXacDisclosureRelayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWComposerXacDisclosureRelay.react",["CometPlaceholder.react","CometRelay","MWComposerXacDisclosureRelayQuery.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k=8659;function a(a){var e=a.isThreadInNullState;a=a.size;var f=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWComposerXacDisclosureRelayQuery.graphql"),{nux_id:k}),g=f.xacThreadDisclosureNux;return j.jsx(c("CometPlaceholder.react"),{fallback:null,children:g!=null?j.jsx(d("CometRelay").MatchContainer,{match:g,props:{isThreadInNullState:e,nuxKey:f.xacThreadDisclosureNux,size:a}}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRequestComposerBanner.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageRequestSharedTexts.react","MWXComposerBanner.react","MessageRequestsLog","MessengerMSplitFlag","MessengerWebUXLogger","react","useMWXConfirmationDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useCallback,n=b.useMemo;function a(a){var b=a.isGroup,e=a.isGXAC,f=a.isIgContact,g=a.isMSplitContact,i=a.name,o=a.onDeleteConversation,p=a.onLeaveGroup,q=a.otherUserContact,r=a.secondaryName,s=a.thread,t=c("useMWXConfirmationDialog")();a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var u=a[0];a[1];var v=(j||(j=d("I64"))).equal(s.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))&&s.cannotUnsendReason!=null&&(j||(j=d("I64"))).equal(s.cannotUnsendReason,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD)),w=q!=null?(j||(j=d("I64"))).to_string(q.id):void 0,x=n(function(){return{onConfirm:o,thread:s}},[o,s]),y=m(function(){var a;u({loggingData:{entryPoint:4,requestId:void 0,source:v?5:1,sourceOwner:0},targetFBID:(a=w)!=null?a:(j||(j=d("I64"))).to_string(s.threadKey),thread:s})},[v,w,s,u]),z=m(function(){t({body:h._("__JHASH__RPa59uyqDnD__JHASH__"),title:h._("__JHASH__QD3NL6bztov__JHASH__")},p)},[t,p]);a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatDeleteConversationDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var A=a[0],B=c("MessengerWebUXLogger").useInteractionLogger();q=n(function(){return{label:h._("__JHASH__-p5reen4SU3__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,2,w),y()}}},[w,s,y]);a=n(function(){return{label:h._("__JHASH__9sXJViR2MXn__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,10),B==null?void 0:B({eventName:"leave_group",threadKey:s.threadKey,threadType:s.threadType}),z()}}},[s,B,z]);var C=b?a:q;a=h._("__JHASH__lzIMTtzL2x8__JHASH__");b?(q=e?h._("__JHASH__Zo8nGcr-Wbu__JHASH__"):void 0,a=e?h._("__JHASH__dGW95F1FSGX__JHASH__"):c("MessengerMSplitFlag").is_msplit_account?h._("__JHASH__MWNB1ho8ez7__JHASH__"):h._("__JHASH__8Xn13sU52xi__JHASH__")):(q=f?h._("__JHASH__CEpoRXODTMn__JHASH__"):void 0,f?i!=null&&r!=null?a=h._("__JHASH__WhaEH6LWAgw__JHASH__",[h._param("XACDisplayName",i),h._param("XACSecondaryName",r)]):i==null&&r!=null?a=h._("__JHASH__qZp511P-lrQ__JHASH__",[h._param("XACDisplayName",r)]):a=h._("__JHASH__UMff0aQK9RN__JHASH__"):a=i!=null?h._("__JHASH__PiWKQUwgi8l__JHASH__",[h._param("Composer info message",c("MessengerMSplitFlag").is_msplit_account||g?d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessageForMSplit(i):d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessage(i))]):h._("__JHASH__5qC4Qq1WTkB__JHASH__"));b=n(function(){return{label:C.label,onPress:C.onPress,size:32,type:"secondary"}},[C.label,C.onPress]);e=n(function(){return{label:h._("__JHASH__OllJcbQyTkT__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,8,w),A(x)},size:32,type:"secondary"}},[A,w,s,x]);return l.jsx(c("MWXComposerBanner.react"),{bodyText:a,buttons:[b,e],headerText:q,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWReQLMessageRequestComposerBanner.react",["fbt","I64","LSContactTypeExact","LSIntEnum","MWContactDetails","MWLSContactTypeExactUtils","MWMessageRequestComposerBanner.react","MessageRequestsLog","isMWXacGroupThread","isStringNullOrEmpty","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useEffect,n=b.useRef;function a(a){var b,e=a.isGroup,f=a.onDeleteConversation,g=a.onLeaveGroup,i=a.otherUserContact,o=a.thread,p=n(!1);a=c("isMWXacGroupThread")(o);b=(b=d("MWContactDetails").getName(i))!=null?b:h._("__JHASH__AaE4hJExM0x__JHASH__");var q=d("MWContactDetails").getSecondaryName(i);q=c("isStringNullOrEmpty")(q)?void 0:q;var r=i!=null?d("MWLSContactTypeExactUtils").isIgContact(i.contactTypeExact):!1,s=(i==null?void 0:i.contactTypeExact)!=null&&(j||(j=d("I64"))).equal(i.contactTypeExact,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB));m(function(){if(p.current===!0)return;p.current=!0;i==null?d("MessageRequestsLog").logMessageRequestInfoShown(o):d("MessageRequestsLog").logMessageRequestInfoShown(o,(j||(j=d("I64"))).to_string(i.id))},[o,i]);return l.jsx(c("MWMessageRequestComposerBanner.react"),{isGXAC:a,isGroup:e,isIgContact:r,isMSplitContact:s,name:b,onDeleteConversation:f,onLeaveGroup:g,otherUserContact:i,secondaryName:q,thread:o})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMessageRequestDeleteConversation",["Int64Hooks","LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessageRequestsLog","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWChatStateV2.react").useDispatch();return d("Int64Hooks").useCallbackInt64(function(){d("MessageRequestsLog").logActionConfirmed(a,8),c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(b),{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":42"),function(){return e(d("MWChatStateActions").closeTabByThreadKey(Date.now(),a.threadKey))})},[b,a,e])}g["default"]=a}),98);
__d("useMessageRequestLeaveGroup",["Int64Hooks","LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","MWPActor.react","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(c("LSFactory")(b),{contactIds:c("LSVec").ofArray([e]),threadKey:a})},"readwrite",void 0,void 0,f.id+":28"))},[e,b,a])}g["default"]=a}),98);
__d("MWV2ComposerDisclosure.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWSecureComposerUtils","MWChatComposerVoiceIndicator.react","MWComposerXacDisclosureRelay.react","MWLSContactTypeExactUtils","MWLSThreadDisplayContext","MWPActor.react","MWReQLMessageRequestComposerBanner.react","MessageRequestsLog","MessengerWebUXLogger","ReQL","ReQLSuspense","cr:3912","gkx","react","useMessageRequestDeleteConversation","useMessageRequestLeaveGroup","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useMemo,n=b("cr:3912")==null?function(a,b){return!1}:b("cr:3912").isOneOnOneMessageRequestV2;function o(a){var b=a.forceVoiceIndicatorShown_TEST_ONLY,e=a.thread,g=(h||(h=c("useReStore")))();a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=a==="Inbox"?"large":"small";var k=c("useMessageRequestLeaveGroup")(e.threadKey),o=e.threadType,p=c("useMessageRequestDeleteConversation")(e),q=d("LSMessagingThreadTypeUtil").isArmadilloSecure(o),r=!q&&d("LSThreadBitOffset").has(21,e),s=d("MWPActor.react").useActor(),t=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(e.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(g.tables.participants).getKeyRange(e.threadKey),d("ReQL").fromTableAscending(g.tables.contacts)).filter(function(a){a[0];a=a[1];return!(i||(i=d("I64"))).equal(a.id,s)}):d("ReQL").empty()},[g,e.threadKey,e.threadType,s],f.id+":69"),u=m(function(){return q?n(e,t):!1},[e,t,q]),v=d("LSMessagingThreadTypeUtil").isGroup(o);o=t!=null?d("MWLSContactTypeExactUtils").isIgContact(t[1].contactTypeExact):!1;var w=function(){t!=null&&d("MAWSecureComposerUtils").onDeleteThread(g,e,t[1].id)},x=c("MessengerWebUXLogger").useInteractionLogger();return l.jsxs(l.Fragment,{children:[l.jsx(c("MWChatComposerVoiceIndicator.react"),{forceShown_TEST_ONLY:b}),u||r?l.jsx(c("MWReQLMessageRequestComposerBanner.react"),{isGroup:v,onDeleteConversation:q?w:p,onLeaveGroup:function(){if(!q&&v){d("MessageRequestsLog").logActionConfirmed(e,10);x==null?void 0:x({eventName:"leave_group",threadKey:e.threadKey,threadType:e.threadType});return k()}},otherUserContact:t==null?void 0:t[1],thread:e}):!q&&o&&c("gkx")("23418")?l.jsx(c("MWComposerXacDisclosureRelay.react"),{isThreadInNullState:(i||(i=d("I64"))).lt(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),size:a}):null]})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.forceVoiceIndicatorShown_TEST_ONLY;a=a.thread;return l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(o,{forceVoiceIndicatorShown_TEST_ONLY:(b=b)!=null?b:!1,thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc xl521sm x9mfa4r x889kno",children:j.jsx(c("MDSTextPairing.react"),{headline:h._("__JHASH__viCgEPmOyD5__JHASH__"),headlineColor:"secondary",level:4,meta:j.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._("__JHASH__FrvKCKsD46D__JHASH__")}),reduceEmphasis:!0,textAlign:"center"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXACSunsettedComposer.react",["fbt","BaseTheme.react","MWXLink.react","MWXText.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={dark:{"primary-text":"#e4e6eb","secondary-text":"#b0b3b8"},light:{"primary-text":"rgba(0, 0, 0, 0.7)","secondary-text":"rgba(0, 0, 0, 0.5)"},type:"VARIABLES"};function a(){var a=h._("__JHASH__E5yAiYeCVHB__JHASH__",[h._param("=Learn more",j.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",children:j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__W_KwwnBzw9K__JHASH__")})}))]);return j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xqy66fx xc73u3c xx6bls6 x5ib6vp",children:j.jsx(c("BaseTheme.react"),{config:k,children:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a}),level:4,textAlign:"center"})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWLSSprocFetchProactiveWarningIfNeeded",["I64","Int64Hooks","LSFactory","LSFetchProactiveWarningsIfNeededStoredProcedure","MWThreadKey.react","promiseDone","useMWLSProactiveWarningTables","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b,e){var g=(i||(i=c("useReStore")))(),j=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),k=c("useMWLSProactiveWarningTables")(),l=k.banner;k=k.pwSettings;k=l!=null&&k!=null?(h||(h=d("I64"))).equal(l.bannerId,(h||(h=d("I64"))).of_string("7")):!1;a=a&&!k?e?!0:b!=null?(h||(h=d("I64"))).equal((l=b.proactiveWarningDismissTime)!=null?l:(h||(h=d("I64"))).zero,(h||(h=d("I64"))).zero):!1:!1;var m=b!=null&&a;d("Int64Hooks").useEffectInt64(function(){m&&c("promiseDone")(g.runInTransaction(function(a){return c("LSFetchProactiveWarningsIfNeededStoredProcedure")(c("LSFactory")(a),{threadKey:j})},"readwrite",void 0,void 0,f.id+":57"))},[j,a,m,g])}g["default"]=a}),98);
__d("useMWMarketplaceThreadOtherUser",["I64","LSIntEnum","MWPActor.react","MessagingThreadSubtype","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=a.thread,e=(j||(j=c("useReStore")))(),g=d("MWPActor.react").useActor();return d("ReQLSuspense").useFirst(function(){return b.threadSubtype!=null&&(h||(h=d("I64"))).equal(b.threadSubtype,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingThreadSubtype").MARKETPLACE_THREAD))?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(b.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,g)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[b.threadKey,e,g,b.threadSubtype],f.id+":31")}g["default"]=a}),98);
__d("useMWPComposerFileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){if(a){b.current.enabled=!1;b.current.handler=null;return function(){b.current.enabled=!0,b.current.handler=null}}},[b,a])}g["default"]=a}),98);
__d("MWPComposerGating.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","JSResourceForInteraction","LSAuthorityLevel","LSCommunityPublicGroupParticipationApprovalStatus","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWLoadingStateOutstandingUIReadyOfflineQueueSelector","MWCMThreadTypes.react","MWCMisStandAloneCommunity","MWComposerPlaceholder.react","MWIsThreadDisabled","MWJoinChannelComposerPlaceholder.react","MWPActor.react","MWPArmadilloLoadingStateMessage.react","MWPSafetyNoticesChatBlockedComposer.react","MWPThreadIsPage.react","MWV2ComposerDisclosure.react","MWV2ErrorComposer.react","MWXACSunsettedComposer.react","MessagingCommunityChatsPauseStatus","MessagingCommunityType","ReQL","ReQLSuspense","RecoverableViolation.react","ServerTime","ThreadStatus","gkx","justknobx","lazyLoadComponent","nullthrows","react","useCommunityFolder","useIsChatPreviewsEnabled","useMAWOfflineQueueLoadingIndicator","useMWLSSprocFetchProactiveWarningIfNeeded","useMWMarketplaceThreadOtherUser","useMWPComposerFileDropzoneRegisterHandler","useMWProactiveWarningPayload","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i,n=m.memo,o=m.useMemo,p=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPLeftGroupComposer.react").__setRef("MWPComposerGating.react")),q=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupMutedComposer.react").__setRef("MWPComposerGating.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupBroadcastComposer.react").__setRef("MWPComposerGating.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWJoinChannelComposer.react").__setRef("MWPComposerGating.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWBroadcastChannelMemberComposer.react").__setRef("MWPComposerGating.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMPausedCommunityComposer.react").__setRef("MWPComposerGating.react")),v=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMPausedChatComposer.react").__setRef("MWPComposerGating.react")),w=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMChatPreviewComposer.react").__setRef("MWPComposerGating.react")),x=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupRequestToParticipateComposer.react").__setRef("MWPComposerGating.react")),y=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCMGroupPendingRequestToParticipateComposer.react").__setRef("MWPComposerGating.react")),z=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPTakenDownThreadComposer.react").__setRef("MWPComposerGating.react")),A=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCannotReplyFallbackComposer.react").__setRef("MWPComposerGating.react")),B=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCMComposerNudgeText.react").__setRef("MWPComposerGating.react")),C=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDisableMarketplaceDMAThreadComposer.react").__setRef("MWPComposerGating.react"));function a(a){var b,e=a.renderComposer;a=a.thread;var f=a.cannotReplyReason==="viewer_not_subscribed",g=a.cannotReplyReason==="broadcast_chat_read_only",h=a.threadStatus!=null&&(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED)),i=d("LSThreadBitOffset").has(192,a),m=c("useMWMarketplaceThreadOtherUser")({thread:a}),n=a.memberCount!=null?(j||(j=d("I64"))).to_int32(a.memberCount):0;n=d("MWCMThreadTypes.react").isMarketplaceThread(a.threadSubtype)&&!d("LSThreadBitOffset").has(213,a)&&n===2&&(m==null||d("LSContactBitOffset").has(88,m));m=c("useCommunityFolder")(a);var o=c("MWCMisStandAloneCommunity")(m==null?void 0:m.communityType),D=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,m==null?void 0:m.communityType);b=(j||(j=d("I64"))).to_int32((b=m==null?void 0:m.sendsBlockedUntil)!=null?b:(j||(j=d("I64"))).zero)*1e3;b=b<0||b>d("ServerTime").getMillis();var E=c("MWIsThreadDisabled")(a.takedownState,m==null?void 0:m.takedownState),F=(m==null?void 0:m.fbGroupUserParticipationApprovalStatus)!=null&&(j||(j=d("I64"))).equal(m.fbGroupUserParticipationApprovalStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSCommunityPublicGroupParticipationApprovalStatus").PARTICIPATION_REQUEST_REQUIRED)),G=(m==null?void 0:m.fbGroupUserParticipationApprovalStatus)!=null&&(j||(j=d("I64"))).equal(m.fbGroupUserParticipationApprovalStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSCommunityPublicGroupParticipationApprovalStatus").PARTICIPATION_REQUEST_PENDING)),H=(m==null?void 0:m.pauseStatus)!=null&&(j||(j=d("I64"))).equal(m.pauseStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingCommunityChatsPauseStatus").PAUSED_BY_SOFT_ACTION))&&c("gkx")("4216");if(E)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:l.jsx(z,{threadType:a.threadType})});else if(H&&!o)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:l.jsx(u,{communityId:m==null?void 0:m.folderId,communityName:m==null?void 0:m.name,groupId:m==null?void 0:m.fbGroupId,threadKey:a.threadKey})});else if(h)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:l.jsx(v,{canPauseChat:d("LSThreadBitOffset").has(154,a),shouldUseChannelTerminology:d("LSMessagingThreadTypeUtil").isSocialChannel(a.threadType),threadKey:a.threadKey})});else if(D){return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:64}),children:l.jsx(w,{communityType:(E=m==null?void 0:m.communityType)!=null?E:(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingCommunityType").FB_COMMUNITY),isCommunityMember:(H=m==null?void 0:m.isMember)!=null?H:!1,thread:a})})}else if(d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType))return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(d("MWJoinChannelComposerPlaceholder.react").MWJoinChannelComposerPlaceholder,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Broadcast,threadKey:a.threadKey}),children:l.jsx(s,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Broadcast,thread:a})});else if(d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType))return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(d("MWJoinChannelComposerPlaceholder.react").MWJoinChannelComposerPlaceholder,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Social,threadKey:a.threadKey}),children:l.jsx(s,{channelType:d("MWJoinChannelComposerPlaceholder.react").ChannelType.Social,thread:a})});else if(i)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:99}),children:l.jsx(c("MWXACSunsettedComposer.react"),{})});else if(f)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:99}),children:l.jsx(p,{groupId:m==null?void 0:m.fbGroupId,thread:a})});else if(d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&g)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:55}),children:l.jsx(r,{isBroadcastChatsReactionsEnabled:d("LSThreadBitOffset").has(139,a)})});else if(d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)&&g)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:48}),children:l.jsx(t,{isJoined:!0,threadKey:a.threadKey})});else if(b)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:141}),children:l.jsx(q,{communityFolder:m})});else if(F)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:104}),children:l.jsx(x,{communityFolder:c("nullthrows")(m),thread:a})});else if(G)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:100}),children:l.jsx(y,{groupID:(j||(j=d("I64"))).to_string(c("nullthrows")(m==null?void 0:m.fbGroupId)),thread:a})});else if(a.cannotReplyReason!=null)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:l.jsx(A,{})});else if(c("justknobx")._("1978")&&n)return l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:l.jsx(C,{})});else return l.jsxs(l.Fragment,{children:[d("MWCMThreadTypes.react").isBroadcastThread(a.threadType)&&!g?l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(B,{thread:a})}):null,l.jsx(c("MWV2ComposerDisclosure.react"),{thread:a}),e()]})}a.displayName=a.name+" [from "+f.id+"]";var D=n(a);function b(a){var b=a.isMessengerInbox;a.otherUser;var e=a.renderComposer;a=a.thread;e=l.jsxs(l.Fragment,{children:[l.jsx(c("MWV2ComposerDisclosure.react"),{thread:a}),e()]});var f=a.proactiveWarningDismissTime==null||(j||(j=d("I64"))).is_zero(a.proactiveWarningDismissTime),g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType);b=b?null:f&&!g?l.jsx(c("MWPSafetyNoticesChatBlockedComposer.react"),{fallback:e,onClose:function(){},thread:a}):null;c("useMWLSSprocFetchProactiveWarningIfNeeded")(b!=null,a,!1);f=c("useMWProactiveWarningPayload")(void 0,a);return b!=null&&f!=null?l.jsx(c("CometPlaceholder.react"),{fallback:l.jsx(c("MWComposerPlaceholder.react"),{height:35}),children:b}):e}b.displayName=b.name+" [from "+f.id+"]";var E=n(b);function F(a){var b=a.configurations,e=a.isMessengerInbox,g=a.renderComposer,i=a.thread,m=(h||(h=c("useReStore")))(),n=d("MWPActor.react").useActor(),p=(j||(j=d("I64"))).equal(n,i.threadKey),q=d("ReQLSuspense").useArray(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(m.tables.participants).getKeyRange(i.threadKey),d("ReQL").fromTableAscending(m.tables.contacts)).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[m,i.threadKey,i.threadType],f.id+":479");a=o(function(){return q.find(function(a){return p||q.length===1&&(j||(j=d("I64"))).equal(a.id,n)||!(j||(j=d("I64"))).equal(a.id,n)})},[n,p,q]);var r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType),s=c("useMAWOfflineQueueLoadingIndicator")(!1,i,d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector").outstandingUIReadyOfflineQueueSelector);r=r&&s;s=b.find(function(a){return a!=null});b=s!=null;c("useMWPComposerFileDropzoneRegisterHandler")(b);return l.jsxs(l.Fragment,{children:[r?l.jsx(c("MWPArmadilloLoadingStateMessage.react"),{threadKey:i.threadKey}):null,b?s:d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?a!=null?l.jsx(E,{isMessengerInbox:e,otherUser:a,renderComposer:g,thread:i}):(j||(j=d("I64"))).lt(i.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))?null:l.jsx(c("RecoverableViolation.react"),{errorMessage:"Missing contact row",projectName:"messenger_comet"}):l.jsx(D,{renderComposer:g,thread:i})]})}F.displayName=F.name+" [from "+f.id+"]";function e(a){var b=a.configurations,e=a.isMessengerInbox,f=a.renderComposer;a=a.thread;return l.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return l.jsx(c("MWV2ErrorComposer.react"),{})},children:l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:a.threadKey,children:l.jsx(F,{configurations:b,isMessengerInbox:(b=e)!=null?b:!1,renderComposer:f,thread:a})})})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("useOnTypingStateChanged",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSendTypingIndicatorStoredProcedure","MWCMIsAnyCMThread","MWPActor.react","MessengerWebUXLogger","ReQL","asyncToGeneratorRuntime","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(1))&&!(i||(i=d("I64"))).equal(b,f)){var g;b=(yield (g=d("ReQL")).firstAsync(g.mergeJoin(g.fromTableAscending(a.tables.participants).getKeyRange(b),g.fromTableAscending(a.tables.contacts.index("blockedByViewerStatusId")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))).filter(function(a){var b=a[0];a[1];return!(i||(i=d("I64"))).equal(b.contactId,f)})));return b!=null}else return!c("MWCMIsAnyCMThread")(e)});return l.apply(this,arguments)}function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(h){if(!(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;c("promiseDone")(k(b,a.threadKey,a.threadType,e).then(function(e){if(e){g==null?void 0:g({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});return b.runInTransaction(function(b){return c("LSSendTypingIndicatorStoredProcedure")(c("LSFactory")(b),{isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isTyping:h,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":113")}}))},[a.authorityLevel,a.threadKey,a.threadType,b,e,g])}g["default"]=a}),98);
__d("useMWOnTypingStateChanged",["MWChatViewerChatVisibilityHook","react","useOnTypingStateChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=function(a){return void 0};function a(a){var b=c("useOnTypingStateChanged")(a),e=d("MWChatViewerChatVisibilityHook").useViewerChatVisibility();return i(function(){return e?b:j},[b,e])}g["default"]=a}),98);
__d("MWV2OpenComposer.react",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWCMGetValidId","MWPReplyContext.react","MWV2ComposerEditContainer.react","MWV2ComposerReplyView.react","MWV2ComposerView.react","MessengerMSplitFlag","Promise","WebUXLoggingSurfaceContextProvider","asyncToGeneratorRuntime","cr:5001","cr:5118","emptyFunction","gkx","promiseDone","react","useAsyncReStore","useMAWEditMessageData","useMWMediaManager","useMWOnTypingStateChanged","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useContext,m=c("gkx")("23426");function a(a){var e,f=a.afterSendMessage,g=f===void 0?c("emptyFunction"):f;f=a.isPreviewThread;var j=a.thread,n=c("useAsyncReStore")();a=l(d("MWPReplyContext.react").MWPReplyContext);a=a.reply;var o=b("cr:5001")==null?void 0:b("cr:5001").useMWAdmodOnboardingSuggestedActionsContext(),p=c("useMAWEditMessageData")(),q=c("useMWMediaManager")({thread:j}),r=q.handleFileRemove,s=q.handleFileSelect;q=q.mediaStaging;var t=d("Int64Hooks").useCallbackInt64(function(){var a;g();var e=o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.source,f=o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.entryPoint;b("cr:5118")&&(o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.show)&&(o==null?void 0:(a=o.showWelcomeMessageSuggestion)==null?void 0:a.source)!=null&&c("promiseDone")((h||(h=b("Promise"))).resolve().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=(yield n);a=(a=j==null?void 0:j.parentThreadKey)!=null?a:(i||(i=d("I64"))).zero;b=(yield b.tables.community_folders.get(a));b=(b=b==null?void 0:b.fbGroupId)!=null?b:(i||(i=d("I64"))).zero;d("GroupsCometChatsEngagementLogger").log({action:"tap",community_id:(i||(i=d("I64"))).to_string(a),entry_point:f,event:"admin_send_message_visible_when_message_sent",group_id:d("MWCMGetValidId").MWCMHasValidFbGroupId(b)?(i||(i=d("I64"))).to_string(b):null,parent_surface:"thread_view",source:e,surface:"admin_send_message_hint_card"})})));o==null?void 0:o.setShowWelcomeMessageSuggestion({show:!1})},[g,n,o,j==null?void 0:j.parentThreadKey]);t=c("useMWV2OnSendOpenMessage")({afterSendMessage:t,skipUrlPreviewGen:!1,thread:j});var u=c("useMWOnTypingStateChanged")(j);c("useMWV2FileDropzoneRegisterHandler")(s);var v=d("LSMessagingThreadTypeUtil").isAiBotSummoning(j);f=c("useMWPComposerEditor")({composerEntrypointForLogging:"MWV2OpenComposer",isPreviewThread:f,mediaStaging:q,onSendMessage:t,onTypingStateChanged:u,threadKey:j.threadKey});u=f.editor;var w=f.editorElementRef,x=f.hasStuffToSend;f=f.sendMessage;return k.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"open_composer",children:k.jsxs("div",{children:[b("cr:5118")&&(o==null?void 0:(e=o.showWelcomeMessageSuggestion)==null?void 0:e.show)?k.jsx(b("cr:5118"),{threadKey:j.threadKey}):a!=null?k.jsx(d("MWV2ComposerReplyView.react").MWV2ComposerReplyView,{messageId:a.messageId,messageThreadKey:a.threadKey,messageTimestamp:a.timestampMs,thread:j}):null,p!=null&&k.jsx(c("MWV2ComposerEditContainer.react"),{editMessageData:p}),p!=null?null:k.jsx(d("MWV2ComposerView.react").MWV2ComposerView,{editor:u,editorElementRef:w,hasStuffToSend:x,isAiBotMentionsEnabled:v&&m&&!c("MessengerMSplitFlag").is_msplit_account,mediaStaging:q,onAttachmentRemoved:r,onAttachmentsAdded:s,onSendMessage:t,policyProduct:"messaging_lightswitch",sendMessage:f,supportedFileTypes:void 0,surface:"mwp_mwv2_composer",thread:j})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useIsDefaultE2eeOpenThread",["LSMessagingThreadTypeUtil","cr:8061"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return[!1,!0,null]}var h=(e=b("cr:8061"))!=null?e:a;function c(a){var b=h(a.threadKey,a.threadType),c=b[0];b[1];b[2];return d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&c}g["default"]=c}),98);
__d("useMWDefaultE2eeComposerConfiguration",["JSResourceForInteraction","lazyLoadComponent","react","useIsDefaultE2eeOpenThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDefaultE2eeThreadBlockedComposer.react").__setRef("useMWDefaultE2eeComposerConfiguration"));function a(a){var b=c("useIsDefaultE2eeOpenThread")(a);if(b)return i.jsx(j,{thread:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPComposerPlaceholder.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.children;a=a.height;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(j,{height:a}),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPAdultMinorRestrictionLogging",["I64","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MwbActorExperienceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function l(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);a=d("LSMessagingThreadTypeUtil").isGroup(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";return a?b?"messenger_encrypted_group_thread":"messenger_group_thread_details":"unknown"}function m(a){switch(a){case c("LSContactReachabilityStatusType").UNREACHABLE_USER_TYPE:return 12;case c("LSContactReachabilityStatusType").UNREACHABLE_ADULT_TYPE:return 21;default:return 0}}var n=function(a){return a?(i||(i=d("LSIntEnum"))).toNumber(a):c("LSContactReachabilityStatusType").REACHABLE};function a(a,b){var e=n(b),f=l(a),g=(j||(j=d("I64"))).to_string(a);k(function(){e!==c("LSContactReachabilityStatusType").REACHABLE&&e!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER&&c("MwbActorExperienceEventFalcoEvent").log(function(){return{action:1,restriction_type:m(e),surface:f,thread_id:g}})},[g,e,f])}g["default"]=a}),98);
__d("useMWPBlockedComposerConfiguration",["fbt","I64","JSResourceForInteraction","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWGetLSThreadReportingTokenFromThread","MWPActor.react","MWPComposerPlaceholder.react","MWXLink.react","ReQL","ReQLSuspense","lazyLoadComponent","react","useMWPAdultMinorRestrictionLogging","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||d("react"),n="https://www.facebook.com/help/messenger-app/2258699540867663/?helpref=uf_share",o=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPReQLBlockedComposer.react").__setRef("useMWPBlockedComposerConfiguration"));function p(a){if(a==null)return c("LSContactReachabilityStatusType").REACHABLE;a=a.contactReachabilityStatusType;return a==null?c("LSContactReachabilityStatusType").REACHABLE:(l||(l=d("LSIntEnum"))).toNumber(a)}function a(a,b){var e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),j=(k||(k=d("I64"))).equal(g,a.threadKey),q=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return j||!(k||(k=d("I64"))).equal(a.id,g)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[e,a.threadKey,a.threadType,g,j],f.id+":62"),r=p(q);c("useMWPAdultMinorRestrictionLogging")(a.threadKey,q==null?void 0:q.contactReachabilityStatusType);if(d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)&&q!=null){var s=c("MWGetLSThreadReportingTokenFromThread")(a),t=!(k||(k=d("I64"))).equal(q.blockedByViewerStatus,(l||(l=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED));if(r!==c("LSContactReachabilityStatusType").REACHABLE&&r!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER){var u,v=h._("__JHASH__6xAG31n9hza__JHASH__");r===c("LSContactReachabilityStatusType").UNREACHABLE_INVITE_BLOCK?(u=h._("__JHASH__JkBfzTduzvJ__JHASH__"),v=h._("__JHASH__uoHFfFcMxzY__JHASH__",[h._param("learn_more_link",m.jsx(c("MWXLink.react"),{href:n,target:"_blank",children:"Learn more"}))])):r===c("LSContactReachabilityStatusType").UNREACHABLE_MR_LIMIT_BLOCK&&(u=h._("__JHASH__rXNZmFzbPda__JHASH__"),v=h._("__JHASH__P-AUqVlI57w__JHASH__"));return m.jsx(c("MWPComposerPlaceholder.react"),{height:35,children:m.jsx(o,{fbid:(k||(k=d("I64"))).to_string(q.id),isReachable:!1,reason:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_UNREACHABLE,reportingToken:void 0,thread:a,unreachableHeader:u,unreachableTitle:v})})}if(t)return m.jsx(c("MWPComposerPlaceholder.react"),{height:189,children:m.jsx(o,{buttonsOverride:b,fbid:(k||(k=d("I64"))).to_string(q.id),reason:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED,reportingToken:s,thread:a})})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconDragHandle",["MWXSvgIcon","SVGIcon","cr:9123","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9123")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2DisabledPageComposerSendMenuItem",["LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","promiseDone","react","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=c("useLSMessagingSource")();return k(function(g,h,j){c("promiseDone")(a.runInTransaction(function(a){var f=d("LSThreadAttributionTypeUtil").getSource(g,e);return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:j,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:b,snippet:h,text:h,threadKey:g,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":41"))},[a,e,b])}g["default"]=a}),98);
__d("MWV2DisabledPageComposer.react",["fbt","JSResourceForInteraction","MWBlockedComposerLogging","MWXButton.react","MWXIconDragHandle","MWXLazyPopoverTrigger.react","react","useMWV2DisabledPageComposerSendMenuItem"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2DisabledPageComposer.react");function a(a){var b=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(b,d("MWBlockedComposerLogging").ComposerBlockingReason.PAGE_THREAD_DISABLED);var e=c("useMWV2DisabledPageComposerSendMenuItem")();a=function(a){var c=a.title;a=a.id;if(a!=null)return e(b,c,a)};return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{onClose:function(){},onSelect:a},popoverResource:k,children:function(a,b){return j.jsx("div",{className:"x78zum5 xu06os2 xvijh9v xz9dl7a xn6708d xsag5q8 x1ye3gou",ref:a,children:j.jsx(c("MWXButton.react"),{icon:c("MWXIconDragHandle"),label:h._("__JHASH__pzPWkkyVYqg__JHASH__"),onPress:b,reduceEmphasis:!0})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWPDisablePageComposerConfiguration",["MWV2DisabledPageComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){if(a.disableComposerInput&&a.hasPersistentMenu)return i.jsx(c("MWV2DisabledPageComposer.react"),{threadKey:a.threadKey})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPFeatureLimitLoggingUtils",["I64","Int64Hooks","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MwbActorExperienceEventFalcoEvent").__setRef("MWPFeatureLimitLoggingUtils");function a(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:1,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function b(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:2,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function e(a){if(a)if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE)))return 40;else if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC)))return 39;else return 6;return 0}function k(a){if(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";c=d("LSMessagingThreadTypeUtil").isGroup(a);a=d("LSMessagingThreadTypeUtil").isPublicCMThread(a);if(c)return b?"messenger_encrypted_group_thread":a?"messenger_public_cm_chat":"messenger_group_thread_details"}return"unknown"}function l(a){var b=a.action,c=a.restriction_type,d=a.surface,e=a.thread_id;j.onReady(function(a){return a.log(function(){return{action:b,restriction_type:c,surface:d,thread_id:e}})})}g.useLogFeatureLimitComposerImpression=a;g.useLogViewCommunityStandards=b;g.getRestrictionTypeFromFeatureLimit=e}),98);
__d("useMWCMFetchSafetyInterventions",["I64","MWPActor.react","ReQL","ReQLSuspense","gkx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a===void 0&&(a="prompt");var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=a==="composer_block",j=c("gkx")("5985"),k=d("ReQLSuspense").useArray(function(){return j?d("ReQL").fromTableAscending(b.tables.mwb_safety_interventions).filter(function(b){var c=b.logOnlySafetyInterventionType,f=b.mutImpressionsCount,i=b.userId;return b.uiType===a&&c==="education_notice_cm"&&i===(h||(h=d("I64"))).to_string(e)&&(g||(h||(h=d("I64"))).equal(f,(h||(h=d("I64"))).zero))}).map(function(a){return(h||(h=d("I64"))).to_string(a.interventionId)}):d("ReQL").empty()},[j,b.tables.mwb_safety_interventions,a,e,g],f.id+":31");return k}g["default"]=a}),98);
__d("useMWPFeatureLimitComposerBlockHeaderText",["fbt","I64","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=60*60*1e3,k=24*j,l=23*j,m=1e3;function a(a,b){var e=c("useServerTime")().valueOf();a=a!=null?(i||(i=d("I64"))).to_float(a.expirationTimestampSeconds)*1e3:e;a=a-e;if(a<=l){e=Math.ceil(Math.max(a,j)/j);return b?h._("__JHASH__MtDrzd4mllU__JHASH__",[h._plural(e,"number")]):h._("__JHASH__Oh7AJclyvOB__JHASH__",[h._plural(e,"number")])}else{e=Math.ceil(Math.max(a,k)/k);return e>=m?h._("__JHASH__XJkVHKZY5be__JHASH__"):b?h._("__JHASH__DoFdcIuVM_E__JHASH__",[h._plural(e,"number")]):h._("__JHASH__RWH0KbM4haJ__JHASH__",[h._plural(e,"number")])}}g["default"]=a}),226);
__d("MWPFeatureLimitsBlockedComposer.react",["fbt","I64","LSFeatureLimitsType","LSIntEnum","MWBlockedComposerLogging","MWCMContentTakedownEnforcementNoticeDialog.entrypoint","MWCMThreadTypes.react","MWPActor.react","MWPFeatureLimitLoggingUtils","MWPFeatureLimitedData","MWXComposerBanner.react","react","useMWCMFetchSafetyInterventions","useMWPFeatureLimitComposerBlockHeaderText","useMWXEntryPointDialog","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){a=a.thread;var b=c("useMWCMFetchSafetyInterventions")("composer_block"),e=(a==null?void 0:a.threadType)!=null?d("MWCMThreadTypes.react").isJoinedCMThread(a.threadType):!1;e=e&&b.length>0;var f=c("useMWXEntryPointDialog")(c("MWCMContentTakedownEnforcementNoticeDialog.entrypoint"),{interventions_ids:b}),g=f[0];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a==null?void 0:a.threadKey,d("MWBlockedComposerLogging").ComposerBlockingReason.FEATURE_LIMITED_TO_READONLY);f=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitDataWithThreadType(a==null?void 0:a.threadType);var i=d("MWPActor.react").isAPPlus();i=f!=null&&(j||(j=d("I64"))).equal(f.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC))&&i;var m=c("useMWPFeatureLimitComposerBlockHeaderText")(f,i);f=d("MWPFeatureLimitLoggingUtils").getRestrictionTypeFromFeatureLimit(f);var n=d("MWPFeatureLimitLoggingUtils").useLogFeatureLimitComposerImpression(f,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);f=d("MWPFeatureLimitLoggingUtils").useLogViewCommunityStandards(f,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);a=c("useSinglePartialViewImpression")({onImpressionStart:n});n=h._("__JHASH__7_EenTF_FJG__JHASH__");var o=h._("__JHASH__phCVAIUGUlz__JHASH__"),p={target:"_blank",url:"https://www.facebook.com/communitystandards/"},q=i||e?h._("__JHASH__9oilSt_qVYo__JHASH__"):h._("__JHASH___Q1doHhXtgm__JHASH__");return l.jsx("div",{ref:a,children:l.jsx(c("MWXComposerBanner.react"),{bodyText:i?o:n,buttons:[{label:q,linkProps:e?void 0:p,onPress:e?function(){g({interventionsIds:b},function(){})}:f}],headerText:m})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWPFeatureLimitsBlockedComposerConfiguration",["MWPFeatureLimitsBlockedComposer.react","isFeatureLimitEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,d){b=b&&(!a||c("isFeatureLimitEnabled")());if(b)return i.jsx(c("MWPFeatureLimitsBlockedComposer.react"),{thread:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLFeatureLimitsBlockedComposerConfiguration",["LSMessagingThreadTypeUtil","react","useIsReadOnlyFeatureLimitedWithThreadType","useMWPFeatureLimitsBlockedComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),e=c("useIsReadOnlyFeatureLimitedWithThreadType")(a.threadType);return c("useMWPFeatureLimitsBlockedComposerConfiguration")(b,e,a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPNullComposerConfiguration",["I64","LSNullstateCTAType","MWBlockedComposerLogging","MWPreloadedText","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useContext;function l(a){var b=a.reason;a=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a,b);return null}l.displayName=l.name+" [from "+f.id+"]";function a(a,b,e,f){var g=k(c("MWPreloadedText"));f=f!=null&&(i||(i=d("I64"))).equal(f,(i||(i=d("I64"))).of_float(c("LSNullstateCTAType").GET_STARTED))&&!g.text;g=!(i||(i=d("I64"))).equal(b,i.zero);b=c("justknobx")._("926");if(f&&!g||!b&&e)return j.jsx(l,{reason:e?d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GAME_BOT:d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GET_STARTED_CTA,threadKey:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLNullComposerConfiguration",["LSThreadBitOffset","ReQL","ReQLSuspense","react","useMWPNullComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||d("react");function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.thread_nullstate).getKeyRange(a.threadKey)},[b,a.threadKey],f.id+":27"),g=d("LSThreadBitOffset").has(44,a);return c("useMWPNullComposerConfiguration")(a.threadKey,a.lastActivityTimestampMs,g,e==null?void 0:e.ctaType)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerGlimmer.react",["MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={block:{paddingBottom:"x1l90r2v",$$css:!0},container:{alignSelf:"xkh2ocl",backgroundColor:"x57kliw",borderTopColor:"x1epquy7",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},glimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xh8yej3",$$css:!0}};b=i.forwardRef(a);function a(a,b){return i.jsx(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,ref:b,spacing:20,xstyle:[j.container,j.block],children:i.jsx(c("MWXColumnItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmer})})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("getMWPUnavailableComposerConfiguration",["I64","LSAuthorityLevel","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","MWXComposerGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return(i||(i=d("I64"))).lt(e.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))?j.jsx(c("MWXComposerGlimmer.react"),{}):j.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPReQLUnavailableComposerConfiguration",["I64","LSContactBitOffset","LSContactType","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","ReQL","ReQLSuspense","getMWPUnavailableComposerConfiguration","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;k||d("react");function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=(i||(i=d("I64"))).equal(e,a.threadKey),k=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).filter(function(a){a[0];a=a[1];return g||!(i||(i=d("I64"))).equal(a.id,e)}).map(function(a){a[0];a=a[1];return a}):d("ReQL").empty()},[b,a.threadKey,a.threadType,e,g],f.id+":33");if(k==null)return;return c("getMWPUnavailableComposerConfiguration")(a.threadKey,a.threadType,{authorityLevel:k==null?void 0:k.authorityLevel,blockedSinceTimestampMs:k==null?void 0:k.blockedSinceTimestampMs,hasMessageCapability:d("LSContactBitOffset").has(0,k),hasReplyMessageCapability:d("LSContactBitOffset").has(1,k),isPage:i.equal(k.contactType,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPShouldShowRestrictedComposer",["LSMessagingThreadTypeUtil","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a)&&c("gkx")("24036")&&b}g["default"]=a}),98);
__d("useMWPRestrictedComposerConfiguration",["I64","JSResourceForInteraction","LSContactBitOffset","MWPComposerPlaceholder.react","lazyLoadComponent","react","useMWGetOtherUserContact","useMWIsContactRestricted","useMWPShouldShowRestrictedComposer"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPReQLRestrictedComposer.react").__setRef("useMWPRestrictedComposerConfiguration"));function a(a){var b=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,["id"].concat(d("LSContactBitOffset").contactCapabilityFields)),e=c("useMWIsContactRestricted")(b);e=c("useMWPShouldShowRestrictedComposer")(a.threadType,e);if(e&&b!=null)return j.jsx(c("MWPComposerPlaceholder.react"),{height:128,children:j.jsx(k,{fbid:(i||(i=d("I64"))).to_string(b.id),threadKey:a.threadKey,threadType:a.threadType})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,c,e,f,g){if((g||f)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||c!=null))return e?i.jsx(k,{otherUser:c,thread:{threadKey:a}}):i.jsx(j,{reason:c!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER,thread:{threadKey:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWReQLCutoverComposerConfiguration",["LSContactBitOffset","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","ReQL","ReQLSuspense","react","useMWCutoverComposerConfiguration","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||d("react");function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(a.threadKey):d("ReQL").empty()},[e,a],f.id+":33");b=((b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":44"))==null?void 0:b.minMessageId)!=null?b:"")==="";var i=g!=null&&d("LSContactBitOffset").has(76,g);i=i&&b;b=d("MAWThreadCutover").useIsCutoverOpenThread(a.threadKey)||d("LSThreadBitOffset").has(128,a);var j=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a.threadKey);return c("useMWCutoverComposerConfiguration")(a.threadKey,a.threadType,g,j,b,i)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerGating.react",["LSMessagingThreadTypeUtil","MWPComposerGating.react","MWV2OpenComposer.react","cr:9773","emptyFunction","react","useMAWEditMessageData","useMWDefaultE2eeComposerConfiguration","useMWPBlockedComposerConfiguration","useMWPDisablePageComposerConfiguration","useMWPReQLFeatureLimitsBlockedComposerConfiguration","useMWPReQLNullComposerConfiguration","useMWPReQLUnavailableComposerConfiguration","useMWPRestrictedComposerConfiguration","useMWReQLCutoverComposerConfiguration"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.memo;function k(a){return[c("useMWPReQLNullComposerConfiguration")(a),c("useMWPDisablePageComposerConfiguration")(a),c("useMWPReQLFeatureLimitsBlockedComposerConfiguration")(a),c("useMWReQLCutoverComposerConfiguration")(a),c("useMWPBlockedComposerConfiguration")(a),c("useMWPRestrictedComposerConfiguration")(a),c("useMWPReQLUnavailableComposerConfiguration")(a),c("useMWDefaultE2eeComposerConfiguration")(a)]}function a(a){var e=a.afterSendMessage,f=a.isPreviewThread;a=a.thread;var g=c("useMAWEditMessageData")();g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g!=null?g.threadType:a.threadType);if(b("cr:9773")!=null&&g)return i.jsx(b("cr:9773"),{afterSendMessage:e,isPreviewThread:f,thread:a});else return i.jsx(c("MWV2OpenComposer.react"),{afterSendMessage:e,isPreviewThread:f,thread:a})}a.displayName=a.name+" [from "+f.id+"]";var l=j(a);function e(a){var b=a.afterSendMessage,d=b===void 0?c("emptyFunction"):b;a.isMessengerInbox;var e=a.isPreviewThread,f=a.thread;b=k(f);return i.jsx(c("MWPComposerGating.react"),{configurations:b,isMessengerInbox:!1,renderComposer:function(){return i.jsx(l,{afterSendMessage:d,isPreviewThread:e,thread:f})},thread:f})}e.displayName=e.name+" [from "+f.id+"]";function m(a){var b=a.afterSendMessage;a.isMessengerInbox;var d=a.isPreviewThread,e=a.thread;a=k(e);return i.jsx(c("MWPComposerGating.react"),{configurations:a,isMessengerInbox:!0,renderComposer:function(){return i.jsx(l,{afterSendMessage:b,isPreviewThread:d,thread:e})},thread:e})}m.displayName=m.name+" [from "+f.id+"]";g.MWChatComposerGating=e;g.MWInboxComposerGating=m}),98);
__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWEBBackupState","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useEffect,n=b.useRef,o=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),p={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",$$css:!0}};function a(a){var b=a.shadowGapUiMarker,e=(i||(i=c("useReStore")))();a=c("useMWEBBackupState")({entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI});var f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),g=f[0];f=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=f.startFlow;f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var q=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,r=n(!1),s=n(!1),t=l(function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:e,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:q});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);s.current===!1&&(s.current=!0,c("promiseDone")(o.load(),function(a){return a(g)}))}})},[q,j,e]),u=c("useVisibilityObserver")({onVisible:function(){t("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}}),v=a===4&&!f;m(function(){if(r.current===!1&&v){var a;r.current=!0;a=(a=b)!=null?a:"RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_MOUNT";t(a)}},[b,v,t]);return!v||b!=null?null:k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:4,ref:u,spacing:0,children:k.jsx(c("MWXRowItem.react"),{xstyle:p.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){t("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),g({source:q})},target:"_blank",testid:void 0,children:h._("__JHASH__6flAN3HetRr__JHASH__")})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEditChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6185531621550317"}),null);
__d("MWEditChannelDialogQuery$Parameters",["MWEditChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEditChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEditChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEditChannelDialog.entrypoint",["JSResourceForInteraction","MWEditChannelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("MWEditChannelDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("MWEditChannelDialog.react").__setRef("MWEditChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWEditChannelDialogTrigger.react",["I64","MWEditChannelDialog.entrypoint","promiseDone","react","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||d("react");function a(a){var b=a.children,e=a.threadKey,f=(h||(h=c("useReStore")))();a={threadID:(i||(i=d("I64"))).to_string(e)};a=c("useMWXEntryPointDialog")(c("MWEditChannelDialog.entrypoint"),a);var g=a[0];a=function(){c("promiseDone")(f.tables.threads.get(e),function(a){if(a==null)return;g({thread:a})})};return b(a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWExpandReactionsButton.react",["fbt","I64","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMultiReactConstants","MWV2MessageReactionHooks","MWXPressable.react","MWXTooltip.react","emptyFunction","intlSummarizeNumber","react","stylex","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));b=j;var m=b.useCallback,n=b.useMemo,o={additionalInlineButton:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xlup9mm",justifyContent:"xl56j7k",width:"x1npj6m0",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiNum:{paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},fontStyles:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.isMultiReactExpanded,e=a.isReactionReadOnly,f=a.isSecure,g=a.message,j=a.numOverflowEmojis,p=a.sendReaction,q=a.setIsReactionsRowAnimationInProgress,r=a.threadKey,s=a.threadType,t=a.toggleMultiReactExpanded,u=(k||(k=d("I64"))).to_string(r),v=k.to_string(g.timestampMs);a=n(function(){return d("MWChatMessageId").makeSent(u,g.messageId,v)},[u,g.messageId,v]);s=d("MWCMThreadTypes.react").isBroadcastThread(s);r=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(r);var w=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(g),x=m(function(){t(),q(!0)},[q,t]);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:r&&s,hasReactionsV2:r,isBroadcastThread:s,isSecure:f,messageID:a,onVisibilityChange:c("emptyFunction"),selectedReactions:(r=w)!=null?r:void 0,sendReaction:p,children:function(a,f,g,k,m){f=h._("__JHASH__S6Ab1Epvc_N__JHASH__");var n=c("intlSummarizeNumber")(j),p="+"+n;n=n.length;g=l.jsx(c("MWXPressable.react"),{"aria-label":f,disabled:e,expanding:!0,onHoverIn:g,onHoverOut:k,onPress:x,onPressIn:m,overlayRadius:"inherit",ref:a,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x7daf1o xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:(i||(i=c("stylex")))([].concat(b?[o.fontStyles,o.emoji,o.additionalInlineButton]:[o.fontStyles,o.emojiNum])),role:"none",style:{minWidth:n*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:p})})});return e?g:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:f,children:g})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWFDSChatHeaderDetailsSubtitleMutedIcon.react",["ix","FDSTintedIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("FDSTintedIcon.react"),{color:"secondary",icon:d("fbicon")._(h("636130"),12),testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWGroupLimitContainer.react",["cr:3409","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var c=a.children,d=a.groupLimitReachedContent;a=a.thread;a=(a=b("cr:3409")==null?void 0:b("cr:3409")(a.threadKey))!=null?a:[!1,!1];a=a[0];return a?d:c}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageReaction.react",["BaseContextualLayer.react","I64","MWChatMultiReactionsTooltip.react","MWChatReactionEmoji","MWChatReactionsUtils","MWMultiReactConstants","MWXPopover.react","MWXPressable.react","MWXText.react","gkx","intlSummarizeNumber","react","stylex","useCometTheme","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useRef,n=b.useState,o={"--card-background":"rgba(0,0,0,0)"},p={animatedEmoji:{animationDuration:"xdz8niu",animationIterationCount:"x1v7wizp",animationName:"x4uz0a7",animationTimingFunction:"xjmqbfh",opacity:"x1hc1fzr",transform:"xds7yc5",transformOrigin:"x1jpgh95",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiEnabled:{cursor:"x1ypdohk",$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x7daf1o",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0},selectedColor:{backgroundColor:"x1y4ma1z",$$css:!0},selectedTextColor:{color:"x1f0x4kx",$$css:!0},tooltipContainer:{borderTopStartRadius:"x1r9drvm",borderTopEndRadius:"x16aqbuh",borderBottomEndRadius:"x9rzwcf",borderBottomStartRadius:"xjkqk3g",display:"x1lliihq",marginBottom:"xjpr12u",marginTop:"xr9ek0c",maxWidth:"x86nfjv",opacity:"xg01cxk",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x1n2onr6",transitionDuration:"x1ebt8du",transitionProperty:"x19991ni",transitionTimingFunction:"x1dhq9h",$$css:!0},tooltipContainerVisible:{opacity:"x1hc1fzr",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",$$css:!0},tootltipBackgroundComet:{backgroundColor:"xj5tmjb",boxShadow:"xms15q0",$$css:!0}};function a(a){var b=a.emoji,e=a.isProcessingReactions,f=a.isReadOnly,g=a.isTooltipShown,i=a.message,q=a.onFocus,r=a.onMouseEnter,s=a.onMouseLeave,t=a.onTooltipCTAPress,u=a.queueSendReactionCallback,v=a.reaction,w=a.sendReaction,x=a.shouldAnimate;a=a.threadKey;var y=c("useCometTheme")("invert"),z=y[0];y=y[1];var A=c("useCometTheme")("light");A[0];A=A[1];var B=d("MWChatReactionsUtils").isHeart(b[0]),C=m(null);g=c("useFadeEffect")(g);var D=g[0],E=g[1];g=g[2];var F=n(v.viewerIsReactor),G=F[0],H=F[1];F=n((j||(j=d("I64"))).to_int32(v.count));var I=F[0],J=F[1];F=n(!1);var K=F[0],L=F[1],M=m(null);l(function(){M.current!=null&&window.clearTimeout(M.current)},[]);l(function(){x&&(L(!0),M.current!=null&&window.clearTimeout(M.current),M.current=window.setTimeout(function(){M.current=null,L(!1)},600))},[x]);l(function(){e||(J((j||(j=d("I64"))).to_int32(v.count)),H(v.viewerIsReactor))},[e,v.count,v.viewerIsReactor]);function N(){H(!0),J(function(a){return a+1})}function O(){H(!1),J(function(a){return a>1?a-1:a})}F=c("intlSummarizeNumber")(I).length;return k.jsxs("div",{className:(h||(h=c("stylex")))(G?A:null),onFocus:q,onMouseEnter:r,onMouseLeave:s,children:[k.jsx(c("MWXPressable.react"),{disabled:f,onPress:function(){G?O():N();var a=b.join("");I===1&&G?w(a,G):u(a,function(){w(a,G)})},overlayRadius:"inherit",ref:C,xstyle:p.emojiRowContainer,children:k.jsxs("div",{className:h([p.emojiRow,G&&p.selectedColor]),children:[k.jsx("div",{className:h([p.emoji,f?null:p.emojiEnabled]),children:k.jsx("div",{className:h(x||K?p.animatedEmoji:!1,B?p.scaleHeartEmoji:!1),children:k.jsx(c("MWChatReactionEmoji"),{emoji:b,size:16,testid:void 0})})}),k.jsx("div",{className:h([p.emojiNum,G&&p.selectedTextColor]),"data-testid":void 0,role:"none",style:{minWidth:F*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:c("intlSummarizeNumber")(I)})]})}),!f&&D&&k.jsx(z,{children:k.jsx(c("BaseContextualLayer.react"),{align:"middle",contextRef:C,position:"above",ref:g,children:k.jsx("div",{style:c("gkx")("23219")?null:o,children:k.jsx(c("MWXPopover.react"),{withArrow:c("gkx")("23219"),children:k.jsx("div",{className:(h||(h=c("stylex")))(y,p.tooltipContainer,c("gkx")("23219")?null:p.tootltipBackgroundComet,E&&p.tooltipContainerVisible),role:"tooltip",children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsx(c("MWChatMultiReactionsTooltip.react"),{isProcessingReactions:e,messageId:i.messageId,onTooltipCTAPress:function(){return t(v.reactionFbid,b.join(""))},reactionFbid:v.reactionFbid,threadKey:a})})})})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useEmojiReactionDynamicStyleXTransition",["differenceSets","mapMapToArray","mapSet","nullthrows","react","setImmediate","sortBy","useForceUpdate","useIsMountedRef","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m={animationBase:{opacity:"xg01cxk",transitionDuration:"xbb3pvg",transitionProperty:"xeq7tfg",width:"xnalus7",$$css:!0},animationEnter:{animationDuration:"xllfotl",animationName:"x127lhb5",opacity:"x1hc1fzr",$$css:!0},animationEnterWidth1:{width:"x1ygkb0v",$$css:!0},animationEnterWidth2:{width:"x1247r65",$$css:!0},animationEnterWidth3:{width:"xdc2ju1",$$css:!0},animationEnterWidth4:{width:"xgbm1jk",$$css:!0},animationEnterWidth5:{width:"x1rdo73f",$$css:!0},animationEnterWidth6:{width:"x13oubkp",$$css:!0},animationLeave:{animationDuration:"x773k2o",animationName:"xvma63k",opacity:"xg01cxk",width:"xnalus7",$$css:!0}};function n(a){switch(a){case 1:return m.animationEnterWidth1;case 2:return m.animationEnterWidth2;case 3:return m.animationEnterWidth3;case 4:return m.animationEnterWidth4;case 5:return m.animationEnterWidth5;case 6:return m.animationEnterWidth6;default:return null}}function o(){var a=l(new Map());function b(){return a.current}j(function(){return function(){return Array.from(b().values()).forEach(window.clearTimeout)}},[]);return b()}function p(){var a=c("useForceUpdate")(),b=c("useIsMountedRef")();return c("useStable")(function(){return function(){b.current&&a()}})}function a(a,b,d,e){var f=p(),g=o(),h=c("useStable")(function(){return new Map()}),j=l(!0),q=d.duration,r=q===void 0?100:q,s=d.durationIn,t=d.durationOut,u=d.onEnter,v=d.onEnterComplete,w=d.onLeave,x=d.onLeaveComplete,y=i(function(a,b,c){return{item:b,key:a,order:c,style:{transitionDuration:((a=s)!=null?a:r)+"ms"},xstyle:[m.animationBase,j.current&&m.animationEnter,j.current&&n((c=b==null?void 0:b.reactionCountCharactersNum)!=null?c:0)]}},[s,r]),z=new Map(a.map(function(a,c){return[b(a),{item:a,order:c}]})),A=c("differenceSets")(new Set(z.keys()),new Set(h.keys())),B=c("differenceSets")(new Set(h.keys()),new Set(z.keys())),C=new Map();q=Array.from(c("mapSet")(B,function(a){a=c("nullthrows")(h.get(a));a=a.order;return a})).sort(function(a,b){return a-b});q.forEach(function(b,c){b=b-c;while(b<a.length){c=(c=C.get(b))!=null?c:0;C.set(b,c+1);b+=1}});d=c("sortBy")([].concat(c("mapMapToArray")(h,function(a){var b=a.key;b=z.get(b);if(b){return babelHelpers["extends"]({},a,{item:b.item,order:b.order+((b=C.get(b.order))!=null?b:0)})}return a}),Array.from(c("mapSet")(A,function(a){var b=c("nullthrows")(z.get(a)),d=b.item;b=b.order;return y(a,d,b)}))),function(a){return a.order});k(function(){if(e===!0)return;a.forEach(function(a,d){var e,i=b(a),j=(e=h.get(i))!=null?e:y(i,a,d);A.has(i)&&window.requestAnimationFrame(function(){var b;j.xstyle=[m.animationBase,m.animationEnter,n((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];window.clearTimeout(g.get(i));g.set(i,window.setTimeout(function(){v&&v(a)},(b=s)!=null?b:r));c("setImmediate")(function(){var b;j.xstyle=[m.animationBase,m.animationEnter,n((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];u&&u(a);f()})});j.item=a;j.order=d+((e=C.get(d))!=null?e:0);h.set(i,j)});Array.from(B.values()).forEach(function(a){var b=h.get(a);if(b==null)return;var d=b.item;if(b.status!=="leaving"){var e;b.status="leaving";b.style={transitionDuration:((e=t)!=null?e:r)+"ms"};window.requestAnimationFrame(function(){var e;b.xstyle=[m.animationBase,m.animationLeave];window.clearTimeout(g.get(a));g.set(a,window.setTimeout(function(){h["delete"](a),x&&x(d),f()},(e=t)!=null?e:r));c("setImmediate")(function(){w&&w(d),f()})})}});j.current=!1});return d}g["default"]=a}),98);
__d("useSendReactionCallbackQueue",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useRef,j=b.useState,k=1e3,l=1500;function a(){var a=i(new Map()),b=i(null),c=j(!1),d=c[0],e=c[1];c=function(c,d){e(!0),window.clearTimeout(b.current),a.current.set(c,d),b.current=window.setTimeout(function(){f()},l)};var f=function c(){if(a.current.size>0){e(!0);var d=Array.from(a.current.entries())[0],f=d[0];d=d[1];d();a.current["delete"](f);b.current=window.setTimeout(function(){c()},l)}else g()},g=function(){window.setTimeout(function(){b.current=null,e(!1)},k)};return[c,d]}g["default"]=a}),98);
__d("MWMessageReactionsList.react",["I64","LSAuthorityLevel","LSIntEnum","MWMessageReaction.react","MWMultiReactConstants","intlSummarizeNumber","react","stylex","useEmojiReactionDynamicStyleXTransition","useSendReactionCallbackQueue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useRef;function a(a){var b=a.emojis,e=a.hideTooltip,f=a.isMultiReactExpanded,g=a.isReactionReadOnly,i=a.message,n=a.onTooltipCTAPress,o=a.previousReactionItems,p=a.reactionItemsShown,q=a.reactionsV2,r=a.sendReactionThrottled,s=a.setIsReactionsRowAnimationInProgress,t=a.setShouldAnimate,u=a.shouldAnimate,v=a.showTooltip,w=a.threadKey,x=a.tooltipIndex,y=p.length,z=m(y);a=c("useSendReactionCallbackQueue")();var A=a[0],B=a[1];a=function(){z.current=y,s(!1),f&&t(!1)};var C=function(){z.current=y,s(!1)},D=[];q!=null&&(D=p.map(function(a,f){var h=a.emoji;a=a.reaction;return b[f]==null?null:{element:l.jsx(c("MWMessageReaction.react"),{emoji:h,isProcessingReactions:B,isReadOnly:g,isTooltipShown:x===f,message:i,onFocus:function(){return v(f)},onMouseEnter:function(){return v(f)},onMouseLeave:e,onTooltipCTAPress:n,queueSendReactionCallback:A,reaction:a,sendReaction:r,shouldAnimate:(o==null?void 0:o.find(function(a){return a.emoji.join("")===h.join("")}))==null&&(j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),threadKey:w},h),key:b.toString()+f,reactionCountCharactersNum:c("intlSummarizeNumber")((j||(j=d("I64"))).to_int32(a.count)).length}}));q=c("useEmojiReactionDynamicStyleXTransition")(D,function(a){return a!=null?a.key:0},{duration:d("MWMultiReactConstants").REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION,onEnterComplete:a,onLeaveComplete:C});return u?q.map(function(a){return l.jsx("div",{className:(h||(h=c("stylex")))([a==null?void 0:a.xstyle]),style:babelHelpers["extends"]({},a.style),children:a.item&&a.item.element},a.key)}):D.map(function(a){return a==null?void 0:a.element})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useGetMultiReactOrderedItems",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useMemo,k=b.useRef;function l(a,b){var c={};a.forEach(function(a){c[a]=!0});var d=a;b.forEach(function(a){a=a.emoji.join("");if(c[a])return;d.push(a)});return d}function m(a,b){b=((b=b)!=null?b:[]).filter(function(a){return(i||(i=d("I64"))).gt(a.count,i.zero)});return b.map(function(b,c){return{emoji:a[c],reaction:b}}).filter(function(a){return a.emoji!=null})}function a(a,b){var c=k(!0),e=k([]),f=j(function(){return m(a,b)},[a,b]),g=j(function(){var a={};f.forEach(function(b){a[b.emoji.join("")]=b});return a},[f]);return j(function(){if(c.current)c.current=!1,e.current=f.sort(function(a,b){return(i||(i=d("I64"))).compare(b.reaction.count,a.reaction.count)}).map(function(a){return a.emoji.join("")});else{var a=e.current.filter(function(a){a=g[a];return a==null?!1:(i||(i=d("I64"))).to_int32(a.reaction.count)>0});e.current=l(a,f)}return e.current.map(function(a){return g[a]}).filter(Boolean)},[g,f])}g["default"]=a}),98);
__d("MWMessageReactionsContainerV2.react",["LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWAddReactionButton.react","MWExpandReactionsButton.react","MWLSThread","MWMessageReactionsList.react","MWMultiReactConstants","ReQL","ReQLSuspense","emptyFunction","justknobx","react","stylex","unrecoverableViolation","useGetMultiReactOrderedItems","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useOnOutsideClick","usePrevious","useReStore","useThrottled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useRef,n=b.useState,o={wrapper:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"x1a02dak",marginTop:"x1gslohp",$$css:!0},wrapperOutgoing:{alignItems:"xuk3077",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b,e=a.emojis,g=a.isMultiReactRowExpanded,j=a.message,p=a.onOpenDialog,q=a.outgoing,r=a.reactionsV2,s=a.toggleMultiReactionRowExpansion;a=n(-1);var t=a[0],u=a[1],v=c("justknobx")._("2078");a=n({isReactionsRowAnimationInProgress:!1,shouldAnimate:v});var w=a[0],x=a[1],y=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{isReactionsRowAnimationInProgress:a})})},z=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{shouldAnimate:a})})};a=n(!1);var A=a[0],B=a[1];a=j.threadKey;var C=(h||(h=c("useReStore")))(),D=d("MWLSThread").useThread(a),E=d("ReQLSuspense").useFirst(function(){return(D==null?void 0:D.parentThreadKey)?d("ReQL").fromTableAscending(C.tables.community_folders).getKeyRange(D==null?void 0:D.parentThreadKey):d("ReQL").empty()},[C,D==null?void 0:D.parentThreadKey],f.id+":99");b=(b=D)!=null?b:{};b=b.threadType;if(b==null)throw c("unrecoverableViolation")("thread cannot be null when reacting to message","messenger_web_messaging");var F=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b),G=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(b),H=c("useOnOutsideClick")(g?function(){A||(z(!0),s&&s(),y(!0))}:null),I=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a),J=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(j,F,"instant_react"),K=l(function(a,b){return J(j.messageId,a,b?"remove_reaction":"reaction")},[J,j.messageId]),L=c("useThrottled")(function(a,b){K(a,b)},750),M=m(null),N=l(function(a){if(t===a)return;B(!0);M.current!=null&&window.clearTimeout(M.current);u(-1);M.current=window.setTimeout(function(){u(a)},1500)},[t]),O=l(function(){B(!1),M.current!=null&&window.clearTimeout(M.current),M.current=window.setTimeout(function(){return u(-1)},300)},[]),P=l(function(a,b){p({reactionFbid:a,reactionType:b}),O()},[O,p]),Q=c("useGetMultiReactOrderedItems")(e,r);I=I?G===!0?d("MWMultiReactConstants").PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED:d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:d("MWMultiReactConstants").DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED;var R=g?Q:Q.slice(0,I);I=g?[]:Q.slice(I);var S=I.length;I=Q.length||0;Q=c("usePrevious")(Q);if(I<1)return null;E=D==null?!1:d("useIsReactionsV2Enabled").isReactionsV2ReadOnly(D,E==null?void 0:E.communityType);var T=!q&&w.isReactionsRowAnimationInProgress;G=!E&&I>0&&(G||I<d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED)&&!T;I=S>0&&!T;return k.jsxs("div",{className:(i||(i=c("stylex")))(o.wrapper,q?o.wrapperOutgoing:!1),"data-testid":void 0,ref:H,children:[k.jsx(c("MWMessageReactionsList.react"),{emojis:e,hideTooltip:O,isMultiReactExpanded:g,isReactionReadOnly:E,message:j,onTooltipCTAPress:P,previousReactionItems:Q,reactionItemsShown:R,reactionsV2:r,sendReactionThrottled:L,setIsReactionsRowAnimationInProgress:y,setShouldAnimate:z,shouldAnimate:w.shouldAnimate,showTooltip:N,threadKey:a,tooltipIndex:t}),I?k.jsx(c("MWExpandReactionsButton.react"),{isMultiReactExpanded:g,isReactionReadOnly:E,isSecure:F,message:j,numOverflowEmojis:(T=S)!=null?T:0,sendReaction:K,setIsReactionsRowAnimationInProgress:y,threadKey:a,threadType:b,toggleMultiReactExpanded:(q=s)!=null?q:c("emptyFunction")}):null,G?k.jsx(c("MWAddReactionButton.react"),{isSecure:F,message:j,sendReaction:function(a,b){S>0&&(s==null?void 0:s()),window.setTimeout(function(){K(a,b)},S*10)},setShouldRowStayExpanded:B,threadKey:a,threadType:b}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPConcatenateMessageListsDataSource",["ReplayLastSubject","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.count,e=a.first,f=a.getSecond;this.$1=c("switchMap")(e,function(a){var c=a.data.length;if(c>=b||a.hasMore||a.isLoadingMore)return new(d("ReplayLastSubject").ReplayLastSubject)(babelHelpers["extends"]({},a,{hasMore:!0}));c=d("relay-runtime").Observable.from(f(b-c));return c.map(function(b){return{data:[].concat(a.data,b.data),hasMore:a.hasMore||b.hasMore,isLoadingMore:a.isLoadingMore||b.isLoadingMore}})})}var b=a.prototype;b.subscribe=function(a){return this.$1.subscribe(a)};return a}();g["default"]=a}),98);
__d("MWPEditMessageHistoryListText.react",["MWChatTextTransform","MWUnvaultedText","MWXMessageTextWithEntities.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=a.isSecureMessage,e=a.maxLength,f=a.maxLines,g=a.seeLessLinkProps,i=a.seeMoreLinkProps,l=a.text,m=a.truncationStyle,n=a.outgoing,o=a.ranges,p=a.renderers,q=a.transforms;a=a.xstyleForText;b=d("MWUnvaultedText").useMWUnvaultedText(b,l);return j.jsx(c("MWXText.react"),{color:n?"white":"primary",type:"body3",children:j.jsx("div",{className:(h||(h=c("stylex")))(k.regular,a,n?k.outgoing:k.incoming),dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:e,maxLines:f,ranges:o,renderers:p,seeLessLinkProps:g,seeMoreLinkProps:i,text:b||"",transforms:(l=q)!=null?l:d("MWChatTextTransform").textTransforms,truncationStyle:m,truncationThreshold:2,withParagraphs:!0})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPEditedMessageHistoryEntry.react",["MWPEditMessageHistoryListText.react","MWXMessageBubble.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useState,l={border:{boxShadow:"x7h7r2v",$$css:!0},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",marginBottom:"xjpr12u",minWidth:"xeuugli",opacity:"xbyyjgo",$$css:!0},makeSpaceForMessageActions:{maxWidth:"x1no2skz",$$css:!0},messageBubbleIncoming:{paddingEnd:"x1k62owy",$$css:!0},messageBubbleOutgoing:{paddingStart:"x6plb61",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0}};function a(a){var b=a.isReply,d=a.isSecureMessage,e=a.messageHistoryEntry,f=a.outgoing,g=a.renderMessageActions;a={color_DEPRECATED:f?"white":void 0,weight_DEPRECATED:"semibold"};var i=k(!1),m=i[0],n=i[1];return j.jsxs("div",{className:(h||(h=c("stylex")))(l.inner,f&&l.outgoing),"data-testid":void 0,onMouseEnter:function(){g!=null&&n(!0)},onMouseLeave:function(){g!=null&&n(!1)},role:"none",children:[j.jsx("div",{className:h(g?l.makeSpaceForMessageActions:f?l.messageBubbleOutgoing:l.messageBubbleIncoming),children:j.jsx(c("MWXMessageBubble.react"),{align:f?"right":"left",color:f?"outgoing":"incoming",connectBottom:!1,connectTop:!1,variant:"opaque",xstyle:!f&&b&&l.border,children:j.jsx(c("MWPEditMessageHistoryListText.react"),{isSecureMessage:d,maxLength:300,maxLines:3,outgoing:f,ranges:[],seeLessLinkProps:a,seeMoreLinkProps:a,text:e.messageContent||"",truncationStyle:"see-more-and-less"})})}),g&&m?j.jsx("div",{className:"xc26acl x78zum5",children:g(e)}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPEditedMessageHistoryEntry=a}),98);
__d("useEditMessageHistoryLS",["ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.edit_message_history.index("originalMsgPkEditTs")).getKeyRange(a)},[e,a],f.id+":29");return j(function(){return b?g.slice(0,-1):g},[g,b])}g["default"]=a}),98);
__d("MWPEditedMessageHistoryList.react",["I64","MWMessageEditContext.react","MWPEditedMessageHistoryEntry.react","QPLUserFlow","cr:5042","gkx","qpl","react","stylex","useEditMessageHistoryLS"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useEffect,m={base:{backgroundColor:"x1eb86dx",maxWidth:"x193iq5w",zIndex:"x1vjfegm",$$css:!0},incoming:{display:"x1lliihq",paddingStart:"xd06s5i",$$css:!0},outgoing:{display:"x1lliihq",paddingEnd:"x1sxyh0",$$css:!0}};function a(a){var e=a.editCount,f=a.isReply,g=a.isSecureMessage,i=a.msgId,n=a.outgoing,o=a.renderMessageActions,p=a.threadType;a=a.xstyle;var q=d("MWMessageEditContext.react").useMWMessageEditContext()||{showEdits:!1},r=q.showEdits;q=c("useEditMessageHistoryLS")(i,g);i=b("cr:5042")(i);var s=g&&c("gkx")("4643")?i:q;l(function(){r&&(c("QPLUserFlow").addAnnotations(c("qpl")._(1056849214,"1777"),{bool:{isSecureMessage:g},"int":{threadType:(j||(j=d("I64"))).to_int32(p)}}),s!=null&&e!=null&&s.length===(j||(j=d("I64"))).to_int32(e)?c("QPLUserFlow").endSuccess(c("qpl")._(1056849214,"1777")):c("QPLUserFlow").endFailure(c("qpl")._(1056849214,"1777"),"no edits found"))},[s,e,r,g,p]);i=k.jsx("div",{className:(h||(h=c("stylex")))(m.base,n?m.outgoing:m.incoming,a),role:"none",children:s.map(function(a,b){return k.jsx(d("MWPEditedMessageHistoryEntry.react").MWPEditedMessageHistoryEntry,{isReply:f,isSecureMessage:g,messageHistoryEntry:a,outgoing:n,renderMessageActions:o},b)})});return r?i:null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("memoizeObservable",["deepEquals","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a,b){b===void 0&&(b=c("deepEquals"));return d("relay-runtime").Observable.create(function(c){var d=h,e=a.subscribe({complete:function(){c.complete()},error:function(a){c.error(a)},next:function(a){b(d,a)||(d=a,c.next(a))}});return function(){e.unsubscribe()}})}g["default"]=a}),98);
__d("MWPMessageListSingleDirectionDataSource",["I64","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWJids","MLV2DataSourceLogger","ReQL","ReQLObservable","ReplayLastSubject","WAJids","combineLatestWith","cr:7490","gkx","memoizeObservable","promiseDone","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("cr:7490")==null?void 0:b("cr:7490").MAWMessagesLiveQuery;function j(a){return a.length>0?a[a.length-1]:void 0}var k=2;a=function(){function a(a,b,c,e,f,g,h){this.$7=new(d("ReplayLastSubject").ReplayLastSubject)(!1),this.$1=a,this.$2=b,this.$4=c,this.$3=e,this.$5=f,this.$6=g,this.$10=h,this.$9=d("MLV2DataSourceLogger").startMLV2LoggerForThread(this.$4.threadKey,this.$3,this.$5,h),this.$8=this.$11()}var b=a.prototype;b.subscribe=function(a){var b;(b=this.$9)==null?void 0:b.markQPLPoint("subscribed");return this.$8.subscribe(a)};b.$12=function(a){var b,d=this;this.$7.next(!0);(b=this.$9)==null?void 0:b.markQPLPoint("fetch_more_msgs_start");c("promiseDone")(this.$6.extendRange(a,this.$3)["finally"](function(){var a;(a=d.$9)==null?void 0:a.markQPLPoint("fetch_more_msgs_end","begin attempting to extend a message range in a given direction");return d.$7.next(!1)}))};b.$13=function(a){var b=this.$4,e=b.messageId;b=b.timestampMs;e=(e==null||e==="")&&(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).max_int);b=e&&(h||(h=d("I64"))).equal(a.minTimestampMs,(h||(h=d("I64"))).max_int);e=!a.hasMoreBefore||b;e=this.$3==="asc"?{gte:d("ReQL").key(this.$4.timestampMs),lte:d("ReQL").key(a.hasMoreAfter?a.maxTimestampMs:(h||(h=d("I64"))).max_int)}:{gte:d("ReQL").key(e?(h||(h=d("I64"))).min_int:a.minTimestampMs),lte:d("ReQL").key(this.$4.timestampMs)};a=this.$2;var f=this.$4.secureThreadJid==null?null:(h||(h=d("I64"))).to_string(this.$4.secureThreadJid);if(a!=null&&f!=null&&i!=null){var g=d("LSMessagingThreadTypeUtil").isGroup(this.$10);g=g?d("WAJids").toGroupJid(f):d("MAWJids").toUserJid(f);return i(a,this.$4.threadKey,g,e,b?k:this.$5)}f=this.$3==="asc"?d("ReQL").fromTableAscending:d("ReQL").fromTableDescending;a=c("gkx")("5081")?f(this.$1.tables.messages.index("messageDisplayOrder")):f(this.$1.tables.messages);var j=a.getKeyRange(this.$4.threadKey).bounds(e).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))}).take(b?k:this.$5);return d("ReQLObservable").create(this.$1,function(){return j})};b.$14=function(a,b,c){var d,e;b===void 0&&(b=[]);a=a;d=(d=j(b))==null?void 0:d[1];e=this.$3==="asc"?[c==null?void 0:c.maxMessageId,(e=c==null?void 0:c.hasMoreAfter)!=null?e:!1,(e=c==null?void 0:c.isLoadingAfter)!=null?e:!1]:[c==null?void 0:c.minMessageId,(e=c==null?void 0:c.hasMoreBefore)!=null?e:!1,(e=c==null?void 0:c.isLoadingBefore)!=null?e:!1];var f=e[0],g=e[1];e=e[2];d=b.length===this.$5&&(d!=null&&d.messageId!==f||!g);c!=null&&b.length<this.$5&&g&&!d&&!a&&!e&&(a=!0,this.$12(c));return{data:b,hasMore:d||g,isLoadingMore:a||!d&&e}};b.$11=function(){var a=this;return(h||(h=d("I64"))).equal(this.$4.timestampMs,(h||(h=d("I64"))).max_int)&&this.$3==="asc"?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({data:[],hasMore:!1,isLoadingMore:!1})):c("memoizeObservable")(c("combineLatestWith")(this.$7,c("switchMap")(this.$6.getOrCreateMessageRangeCoveringCursor(this.$4,this.$9),function(b){var c;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_range");(c=a.$9)==null?void 0:c.addQPLAnnotations({string:{range:JSON.stringify(babelHelpers["extends"]({},b,{maxTimestampMs:b.maxTimestampMs==null?null:(h||(h=d("I64"))).to_string(b.maxTimestampMs),minTimestampMs:b.minTimestampMs==null?null:(h||(h=d("I64"))).to_string(b.minTimestampMs)}))}});return a.$13(b).map(function(a){return{messages:a,messagesRange:b}})})).map(function(b){var c=b[0];b=b[1];b=(b=b)!=null?b:{};var d=b.messages;b=b.messagesRange;return a.$14(c,d,b)}))["do"]({error:function(b){var c;(c=a.$9)==null?void 0:c.markQPLFailure(b);a.$9=void 0},next:function(b){var c,d=b.data;b=b.isLoadingMore;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_messages");if(!b){(c=a.$9)==null?void 0:c.addQPLAnnotations({"int":{final_query_count:a.$5,num_fetched:d.length}});(b=a.$9)==null?void 0:b.markQPLSuccess();a.$9=void 0}else{(c=a.$9)==null?void 0:c.markQPLPoint("waiting_for_fetch")}}})};return a}();g["default"]=a}),98);
__d("MWPMessageRangeDataSource",["I64","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagePointQueryStoredProcedure","MLV2DataSourceLogger","Promise","ReQL","ReQLObservable","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;a=function(a){var e=this;this.$2=function(a){return k(e.$1.tables.messages_ranges_v2__generated,a)};this.getOrCreateMessageRangeCoveringCursor=function(a,b){b==null?void 0:b.annotateMessageRangesDataSource("MWPMessageRangeDataSource");b==null?void 0:b.markQPLPoint("msys_message_range_fetch_start");return d("ReQLObservable").create(e.$1,function(){return e.$2(a)}).map(function(f){b==null?void 0:b.markQPLPoint("msys_message_range_fetch_end");f=(f=f[0])==null?void 0:f[1];if(f==null)if(a.messageId==null){var g;return{hasMoreAfter:!(j||(j=d("I64"))).equal(a.timestampMs,j.max_int),hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}else{c("promiseDone")(p(e.$1,a));return{hasMoreAfter:!0,hasMoreBefore:!0,isLoadingAfter:!0,isLoadingBefore:!0,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}return f})};this.extendRange=function(a,g){var i=d("MLV2DataSourceLogger").getMLV2LoggerForThread(a.threadKey,g),k=a.threadKey;if(!n(a,g)){i==null?void 0:i.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return(h||(h=b("Promise"))).resolve()}return e.$1.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;i==null?void 0:i.markQPLPoint("fetch_message_ranges_from_table_start","Find a range in the database matching the range we were handed.");e=(e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.messages_ranges_v2__generated).getKeyRange(k).bounds({lte:d("ReQL").key(a.minTimestampMs)}).filter(function(b){return(j||(j=d("I64"))).ge(b.maxTimestampMs,a.maxTimestampMs)}))))!=null?e:a;if(!n(e,g)){i==null?void 0:i.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return}if(!l(e,a,g)){i==null?void 0:i.markQPLPoint("mwp_msg_range_bound_mismatch","The range we are trying to extend has already been extended");return}i==null?void 0:i.markQPLPoint("mwp_fetch_message_ranges_start","Begin fetching message ranges");return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(b),m(e,g))["finally"](function(){i==null?void 0:i.markQPLPoint("mwp_fetch_message_ranges_end","Finish fetching message ranges")})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":128")};this.$1=a};function k(a,b){return d("ReQL").fromTableDescending(a).getKeyRange(b.threadKey).bounds({lte:d("ReQL").key(b.timestampMs)}).filter(function(a){return o(b,a)}).take(1)}function l(a,b,c){if(c==="asc")return(j||(j=d("I64"))).equal(a.minTimestampMs,b.minTimestampMs);else return(j||(j=d("I64"))).equal(a.maxTimestampMs,b.maxTimestampMs)}function m(a,b){var e=a.maxTimestampMs,f=a.minTimestampMs;a=a.threadKey;return b==="asc"?{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:e,threadKey:a}:{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:f,threadKey:a}}function n(a,b){return b==="asc"&&a.hasMoreAfter&&!a.isLoadingAfter||b==="desc"&&a.hasMoreBefore&&!a.isLoadingBefore}function o(a,b){a=a.timestampMs;return((j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).max_int)||(j||(j=d("I64"))).ge(b.maxTimestampMs,a))&&(j||(j=d("I64"))).le(b.minTimestampMs,a)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=20);var g=b.messageId,h=b.threadKey;if(g==null)throw c("err")("Cannot issue a point query without a message ID.");yield a.runInTransaction(function(a){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:g,numContextMessages:(j||(j=d("I64"))).of_float(e),threadKey:h})},"readwrite",void 0,void 0,f.id+":282")});return q.apply(this,arguments)}g.MSYSMessageRangeDataSource=a}),98);
__d("MWPMessageListDataSource",["I64","LSMessagingThreadTypeUtil","MAWEBCombinedRangeDataSource","MWPConcatenateMessageListsDataSource","MWPMessageListSingleDirectionDataSource","MWPMessageRangeDataSource","combineLatestWith","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b.prototype;a.subscribe=function(a){return this.$1.subscribe(a)};function b(a,b,e){var f=e.after,g=e.before,k=e.cursor,l=e.secondaryThreadKey,m=e.secondaryThreadType,n=e.threadType,o=function(e,f){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,f==="desc"&&!(h||(h=d("I64"))).equal(k.timestampMs,(h||(h=d("I64"))).max_int)?babelHelpers["extends"]({},k,{timestampMs:(h||(h=d("I64"))).sub(k.timestampMs,(h||(h=d("I64"))).one)}):k,f,e,i(a,n),n)},p=function(e,f){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,{messageId:k.messageId,threadKey:c("nullthrows")(l),timestampMs:f==="desc"&&!(h||(h=d("I64"))).equal(k.timestampMs,(h||(h=d("I64"))).max_int)?(h||(h=d("I64"))).sub(k.timestampMs,(h||(h=d("I64"))).one):k.timestampMs},f,e,i(a,c("nullthrows")(m)),n)},q;l==null||m==null?(e=o(g,"desc"),q=o(f,"asc")):(e=new(c("MWPConcatenateMessageListsDataSource"))({count:g,first:o(g,"desc"),getSecond:function(a){return p(a,"desc")}}),q=new(c("MWPConcatenateMessageListsDataSource"))({count:f,first:p(f,"asc"),getSecond:function(a){return o(a,"asc")}}));this.$1=c("combineLatestWith")(e,q).map(function(a){var b=a[0];a=a[1];var c=b.data.toReversed().concat(a.data).sort(j(k.threadKey));return{data:c,hasNext:a.hasMore,hasPrevious:b.hasMore,isLoadingNext:a.isLoadingMore,isLoadingPrevious:b.isLoadingMore}})}return b}();function i(a,b){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?c("MAWEBCombinedRangeDataSource")(a):new(d("MWPMessageRangeDataSource").MSYSMessageRangeDataSource)(a)}var j=function(a){return function(b,c){b=b[1];c=c[1];var e=(h||(h=d("I64"))).compare(b.threadKey,c.threadKey);if(e!==0)return(h||(h=d("I64"))).equal(b.threadKey,a)?1:-1;e=h.compare(b.primarySortKey,c.primarySortKey);if(e!==0)return e;e=h.compare((e=b.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero,(e=c.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero);return e!==0?e:h.compare(b.timestampMs,c.timestampMs)}};g["default"]=a}),98);
__d("useIsNearBottomOfScrollArea",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.useState,k=10;function a(a,b){b===void 0&&(b=k);var c=j(!0),d=c[0],e=c[1];i(function(){var c=a.current;if(c==null)return;var d=function(){return e(Math.abs(c.scrollHeight-c.scrollTop-c.clientHeight)<b)},f=window.requestAnimationFrame(d);c.addEventListener("scroll",d);return function(){c.removeEventListener("scroll",d),window.cancelAnimationFrame(f)}},[b,a]);return d}g["default"]=a}),98);
__d("MWPMessageListJumpToMostRecentMessageButton.react",["MWPJumpToMostRecentMessageButtonAnimationWrapper.react","react","useIsNearBottomOfScrollArea"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||c("react");function a(a){var b=a.alwaysShow,d=a.jumpToMostRecentMessage,e=a.renderButton;a=a.scrollAreaRef;a=c("useIsNearBottomOfScrollArea")(a,108);a=a===!1||b;return e?i.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:a,children:e(d)}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMessageScrollList.react",["CometInfiniteScrollTrigger.react","MWXScrollableAreaStyles","react","stylex","useMergeRefs","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useLayoutEffect,m=b.useRef,n=10,o=function(a){return a},p={expanding:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",minHeight:"x121v3j4",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x1odjw0f",$$css:!0}};function q(a){var b=a.anchoredElement,d=a.getKeyForItem;d=d===void 0?o:d;var e=a.hasNext;a=a.items;var f=a.length,g=f>0?d(a[0]):void 0,h=f>0?d(a[a.length-1]):void 0,i=m(f),j=m(g),p=m(h),q=m(),r=m(),s=m(),t=m(),u=m();d=k(function(a){a=a.target;if(!(a instanceof HTMLDivElement))return;if(q.current!=null&&a.scrollHeight!==q.current||r.current!=null&&a.clientHeight!==r.current)return;s.current=a.scrollTop},[]);l(function(){var a=u.current;if(a==null)return;a.scrollTop<=n&&(a.scrollTop=a.scrollHeight)},[]);a=k(function(){var a,c,d,k,l,m,o;a=(a=b==null?void 0:(a=b.current)==null?void 0:a.offsetTop)!=null?a:0;var v=p.current,w=j.current;c=(c=i.current)!=null?c:0;d=(d=q.current)!=null?d:0;k=(k=r.current)!=null?k:0;l=(l=s.current)!=null?l:0;m=(m=t.current)!=null?m:-1;var x=u.current;if((x==null?void 0:x.scrollHeight)===0&&(x==null?void 0:x.clientHeight)===0)return;q.current=(o=x==null?void 0:x.scrollHeight)!=null?o:q.current;s.current=(o=x==null?void 0:x.scrollTop)!=null?o:s.current;i.current=f;j.current=g;p.current=h;t.current=a;if(x==null)return;o=x.clientHeight;var y=x.scrollHeight;r.current=o;var z=Math.abs(d-l-k)<n;v=v!=null&&h!==v;w=w!=null&&g!==w;c=f>c;w=c&&w;c=c&&v;var A=k!==0&&k!==o;v=m!==-1&&m>l&&m<l+k;var B;(b==null?void 0:b.current)!=null&&v?B=a-(m-l):!e&&z?B=l+y-d+k-o:w?B=l+y-d:c&&(B=l);var C=B;if(C!=null){x.scrollTop=C;s.current=B;var D=window.requestAnimationFrame(function(){var a=x.scrollTop;Math.abs(a-C)>n?x.scrollTop=C+(a>C?1:-1)*n:A&&(x.scrollTop=C)});return function(){return window.cancelAnimationFrame(D)}}},[g,e,h,f,b]);var v=c("useResizeObserver")(a),w=c("useResizeObserver")(a);l(a,[a]);return{contentRef:w,onScroll:d,ref:c("useMergeRefs")(u,v)}}e=j.forwardRef(a);function a(a,b){var d=a.anchoredElement,e=a.ariaLabel,f=a.getKeyForItem,g=a.hasNext,i=a.hasPrevious,l=a.isLoadingNext,m=a.isLoadingPrevious,n=a.items,o=a.loadNext,r=a.loadPrevious,s=a.onUserScroll,t=a.renderFooter,u=a.renderHeader,v=a.renderItem;a=a.renderLoadingAnimation;u=[!i&&u!=null&&j.jsx(j.Fragment,{children:u()},"header"),j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:i,isLoading:m,onLoadMore:r,xstyle:p.expanding,children:a==null?void 0:a()},"loadPrevious")].concat(n.map(function(a,b){return v(a,n[b-1],n[b+1])}),[j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:g,isLoading:l,onLoadMore:o,xstyle:p.expanding,children:a==null?void 0:a()},"loadNext"),!g&&t!=null&&j.jsx(j.Fragment,{children:t()},"footer")]);i=q({anchoredElement:d,getKeyForItem:f,hasNext:g,items:n});m=i.contentRef;var w=i.onScroll;r=i.ref;l=k(function(a){s==null?void 0:s(),w(a)},[s,w]);o=c("useMergeRefs")(r,b);return j.jsx("div",{"aria-label":e,className:(h||(h=c("stylex")))(p.scrollArea,c("MWXScrollableAreaStyles").themed),"data-testid":void 0,onScroll:l,ref:o,role:"grid",children:j.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x2lah0s xl56j7k x121v3j4",ref:m,children:u})})}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),98);
__d("useMWPMessageListOnScrollToBottom",["Promise","react","useIsNearBottomOfScrollArea","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect;function l(a,d,e,f,g){var i=j(function(){return(h||(h=b("Promise"))).resolve(f&&!e)},[e,f]),l=c("useMWPSafelyMarkThreadAsRead")(g,i,a,d),m=a();k(function(){f&&!m&&l()},[f,m,l])}function a(a,b,d,e,f,g){var h=c("useIsNearBottomOfScrollArea")(f);k(function(){e!=null&&e(h)},[h,e]);l(a,b,d,h,g)}g["default"]=a}),98);
__d("getOrCreateMapValue",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}f["default"]=a}),66);
__d("useMWPMessageListScrollVisibleMessageIntoView",["MWPVisibleMessageContext.react","getOrCreateMapValue","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.createRef,j=b.startTransition,k=b.useCallback,l=b.useEffect,m=b.useRef;function a(){var a=m(new Map()),b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),e=b.setVisibleMessage,f=b.visibleMessage;b=k(function(b){var d=c("getOrCreateMapValue")(a.current,b,i);f!=null&&b===f.messageId&&(f==null?void 0:f.ref)!==d&&e(babelHelpers["extends"]({},f,{ref:d}));return d},[e,f]);l(function(){var b=f==null?void 0:f.messageId;if(b==null||f==null)return;var c=a.current.get(b);c!==(f==null?void 0:f.ref)&&j(function(){e(babelHelpers["extends"]({},f,{ref:c}))})},[f,e]);l(function(){var a,b=f==null?void 0:(a=f.ref)==null?void 0:a.current;if(b==null)return;var c=window.requestAnimationFrame(function(){b.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})});return function(){return window.cancelAnimationFrame(c)}},[f]);return b}g["default"]=a}),98);
__d("useMWPRelayMessageListJumpToMostRecentMessage",["MWPVisibleMessageContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useCallback;function a(a){var b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),c=b.setVisibleMessage;return i(function(){var b=a.current;b!=null&&(c(void 0),b.scrollTop=b.scrollHeight)},[a,c])}g["default"]=a}),98);
__d("MWPRelayBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWPMessageAuthor.react","MWPMessageListJumpToMostRecentMessageButton.react","MWPVisibleMessageContext.react","MWXMessageScrollList.react","MessageForIntegrityCheck","cr:6271","emptyFunction","react","useMWPMessageListOnScrollToBottom","useMWPMessageListScrollVisibleMessageIntoView","useMWPRelayMessageListJumpToMostRecentMessage","useObserveMessagePageLoad"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h,m=l.useImperativeHandle,n=l.useRef,o={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0}},p=k.forwardRef(a);function a(a,e){var f=a.checkIsThreadManuallySetAsUnread;f=f===void 0?c("emptyFunction").thatReturnsFalse:f;var g=a.entryPoint,h=a.onPageLoaded;h=h===void 0?c("emptyFunction"):h;var j=a.onScrollToBottom,l=a.onUserScroll,p=a.renderFooter,q=a.renderHeader,r=a.renderJumpToMostRecentMessageButton,s=a.renderLoadingAnimation,t=a.renderRow,u=a.secondaryThread,v=a.shouldPausePageLoadTracking;v=v===void 0?!1:v;var w=a.thread,x=n();a=b("cr:6271")(w,u);u=a.hasNext;var y=a.hasPrevious,z=a.isLoadingNext,A=a.isLoadingPrevious,B=a.loadNext,C=a.loadPrevious;a=a.messages;var D=c("useMWPMessageListScrollVisibleMessageIntoView")();d("useObserveMessagePageLoad").useObserveMessagePageLoadWithAggregation(a.map(function(a){return(i||(i=d("I64"))).equal(a.threadKey,w.threadKey)?d("MessageForIntegrityCheck").prepMessageForIntegrityCheck(a):null}).filter(Boolean),10,h,v,u);c("useMWPMessageListOnScrollToBottom")(f,g,u,j,x,w);var E=c("useMWPRelayMessageListJumpToMostRecentMessage")(x);m(e,function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:function(){E(!0)},restoreScrollPosition:c("emptyFunction")}},[E]);var F=n(null);return k.jsxs(c("Box.react"),{xstyle:o.list,children:[k.jsx(c("BaseHeadingContextWrapper.react"),{children:k.jsx(c("MWXMessageScrollList.react"),{anchoredElement:(h=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext().visibleMessage)==null?void 0:h.ref,getKeyForItem:function(a){return a.messageId},hasNext:u,hasPrevious:y,isLoadingNext:z,isLoadingPrevious:A,items:a,loadNext:B,loadPrevious:C,onUserScroll:l,ref:x,renderFooter:p,renderHeader:q,renderItem:function(a,b,e){return k.jsx("div",{ref:D(a.messageId),children:k.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHiding:!0,scrollport:function(){return x.current},unmountXStyle:o.backgroundColor,children:k.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:t({domElementRef:F,message:a,nextMessage:e,prevMessage:b})})})},a.offlineThreadingId)},renderLoadingAnimation:s})}),k.jsx(c("MWPMessageListJumpToMostRecentMessageButton.react"),{alwaysShow:u,jumpToMostRecentMessage:E,renderButton:r,scrollAreaRef:x})]})}a.displayName=a.name+" [from "+f.id+"]";l=k.forwardRef(e);function e(a,b){a.pageSize;a=babelHelpers.objectWithoutPropertiesLoose(a,["pageSize"]);var e=a.renderHeader,f=a.renderLoadingAnimation,g=a.thread;if((i||(i=d("I64"))).equal(g.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)))return k.jsxs(k.Fragment,{children:[k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),e==null?void 0:e()]});e=(i||(i=d("I64"))).equal(g.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(g.threadType);return e?k.jsxs(k.Fragment,{children:[k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticSubThread",hold:!0}),f==null?void 0:f()]}):k.jsx(p,babelHelpers["extends"]({},a,{ref:b}))}e.displayName=e.name+" [from "+f.id+"]";a=l;g["default"]=a}),98);
__d("MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="26068956082718275"}),null);
__d("MWPThreadThemeQuery_AllThemesQuery.graphql",["MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"version"}],c=[{kind:"Variable",name:"version",variableName:"version"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"app_color_mode",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"composer_background_color",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"background_gradient_colors",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_deprecated",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"title_bar_button_tint_color",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"inbound_message_gradient_colors",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title_bar_text_color",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"composer_tint_color",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title_bar_attribution_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"composer_input_background_color",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"hot_like_color",storageKey:null},r=[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],s={alias:null,args:null,concreteType:"MessengerThreadBackgroundAsset",kind:"LinkedField",name:"background_asset",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"message_text_color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message_border_color",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"message_border_width",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"inbound_message_text_color",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_color",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_width",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"primary_button_background_color",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"title_bar_background_color",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"tertiary_text_color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"reaction_pill_background_color",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"secondary_text_color",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"normal_theme_id",storageKey:null};r={alias:null,args:null,concreteType:"MessengerThreadThemeIconAsset",kind:"LinkedField",name:"icon_asset",plural:!1,selections:r,storageKey:null};d=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,r,{alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"alternative_themes",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,H,z,A,B,C,D,E,F,G,r],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWPThreadThemeQuery_AllThemesQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_themes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"MWPThreadThemeQuery_Fragment",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWPThreadThemeQuery_AllThemesQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_themes",plural:!0,selections:d,storageKey:null}]},params:{id:b("MWPThreadThemeQuery_AllThemesQuery_facebookRelayOperation"),metadata:{},name:"MWPThreadThemeQuery_AllThemesQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWPThreadThemeQuery_Fragment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"MWPThreadThemeQuery_Fragment"};e.exports=a}),null);
__d("MessengerAppColorMode",[],(function(a,b,c,d,e,f){a=Object.freeze({NORMAL:1,DARK:2,NONE:3});f["default"]=a}),66);
__d("MessengerThreadThemeGradientType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE_BUBBLE_OUTBOUND:0,MESSAGE_BUBBLE_INBOUND:1,THREADVIEW_BACKGROUND:2,DELIVERY_RECEIPT:3,COMPOSER_CIRCLE_BUTTON:4,COMPOSER_SEND_BUTTON:5,EMPHASIS:6});f["default"]=a}),66);
__d("MWPThreadThemeQuery",["CometRelay","I64","LSDatabaseSingleton","MWPColorUtils","MWPThreadThemeQuery_AllThemesQuery.graphql","MWPThreadThemeQuery_Fragment.graphql","MessengerAppColorMode","MessengerThreadThemeGradientType","Promise","asyncToGeneratorRuntime","nullthrows","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m,n,o=(l||d("react")).useEffect,p=h!==void 0?h:h=b("MWPThreadThemeQuery_Fragment.graphql");function q(a){return a==null?null:d("MWPColorUtils").hexToI64(a)}function r(a){switch(a){case"LIGHT":return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").NORMAL);case"DARK":return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").DARK)}return(m||(m=d("I64"))).of_int32(c("MessengerAppColorMode").NORMAL)}function s(a,b,c,d){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){for(e of e.entries()){var g=e[0],h=e[1];yield b.gradient_colors.put({color:c("nullthrows")(q(h)),gradientIndex:(m||(m=d("I64"))).of_int32(g+10*f),themeFbid:a,type_:m.of_int32(f)})}});return t.apply(this,arguments)}function u(a,b,c){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;a=d("CometRelay").readInlineData(p,a);if(a==null)return;f=[].concat((f=a==null?void 0:a.alternative_themes)!=null?f:[]);f.push(a);for(a of f){var g;if(a==null)continue;f=(m||(m=d("I64"))).of_string(c("nullthrows")(a.id));yield s(f,b,a.background_gradient_colors,c("MessengerThreadThemeGradientType").THREADVIEW_BACKGROUND);yield s(f,b,a.gradient_colors,c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND);yield s(f,b,a.inbound_message_gradient_colors,c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_INBOUND);yield b.thread_themes.put({accessibilityLabel:(g=a.accessibility_label)!=null?g:"",appColorMode:r(a.app_color_mode),backgroundUrl:(g=a.background_asset)==null?void 0:(g=g.image)==null?void 0:g.uri,composerBackgroundColor:q(a.composer_background_color),composerInputBackgroundColor:q(a.composer_input_background_color),composerTintColor:q(a.composer_tint_color),description:a.description,fallbackColor:q(c("nullthrows")(a.fallback_color)),fbid:f,hotLikeColor:a.hot_like_color,iconUrl:(g=a.icon_asset)==null?void 0:(f=g.image)==null?void 0:f.uri,incomingMessageBorderColor:q(a.inbound_message_border_color),incomingMessageBorderWidth:a.inbound_message_border_width,incomingMessageTextColor:q(a.inbound_message_text_color),isDeprecated:!!a.is_deprecated,messageBorderColor:q(a.message_border_color),messageBorderWidth:a.message_border_width?(m||(m=d("I64"))).of_int32(a.message_border_width):void 0,messageTextColor:q(a.message_text_color),normalThemeId:m.of_string(c("nullthrows")(a.normal_theme_id)),primaryButtonBackgroundColor:q(a.primary_button_background_color),reactionPillBackgroundColor:q(a.reaction_pill_background_color),reverseGradiantsForRadial:!!a.reverse_gradients_for_radial,secondaryTextColor:q(a.secondary_text_color),tertiaryTextColor:q(a.tertiary_text_color),themeIdx:e!=null?(m||(m=d("I64"))).of_int32(e):(m||(m=d("I64"))).of_string(c("nullthrows")(a.id)),titlebarAttributionTextColor:q(a.title_bar_attribution_color),titlebarBackgroundColor:q(a.title_bar_background_color),titlebarButtonTintColor:q(a.title_bar_button_tint_color),titlebarTextColor:q(a.title_bar_text_color)})}});return v.apply(this,arguments)}function a(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield (n||(n=d("LSDatabaseSingleton"))).LSDatabaseSingleton);return b.runInTransaction(function(b){return u(a,b)},"readwrite",void 0,void 0,f.id+":286")});return w.apply(this,arguments)}function e(){var a=(k||(k=c("useReStore")))(),e=d("CometRelay").useLazyLoadQuery(i!==void 0?i:i=b("MWPThreadThemeQuery_AllThemesQuery.graphql"),{version:"default"});o(function(){c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield (j||(j=b("Promise"))).all(e.messenger_thread_themes.map(function(b,c){return u(b,a,c+1)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":318"))},[e,a])}g.MWPThreadThemeQuery_Fragment=p;g.insertGraphQLThemeResponseIntoDatabaseWithTxn=u;g.insertGraphQLThemeResponseIntoDatabase=a;g.useFetchAllThreadThemes=e}),98);
__d("MWV2ChatHotlikeButtonAnimation.react",["BaseView.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=150;e=2500;d=b+e;b={medium:.7,small:.35};var j={almostPoppingShakeAnimationHotlike:{animationDelay:"x1uhpyvt",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1kol0s",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},animationBox:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1qx5ct2",justifyContent:"xl56j7k",pointerEvents:"x47corl",width:"xw4jnvo",$$css:!0},growAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"x1h5mrz9",animationFillMode:"x10e4vud",animationIterationCount:"x1v7wizp",animationName:"x1kvv0nh",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},shakeAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1dogid2",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0}};function a(a){var b=a.animationsContainerRef,d=a.children;a=a.shouldShowGrowAnimation;return i.jsx(c("BaseView.react"),{ref:b,xstyle:a&&j.growAnimationHotlike,children:i.jsx(c("BaseView.react"),{xstyle:a&&j.shakeAnimationHotlike,children:i.jsx(c("BaseView.react"),{xstyle:[j.animationBox,a&&j.almostPoppingShakeAnimationHotlike],children:d})})})}a.displayName=a.name+" [from "+f.id+"]";g.TOTAL_GROW_ANIMATION_TIME_MS=d;g.EMOJI_SIZE_PERCENTAGE_THRESHOLDS=b;g.MWV2ChatHotlikeButtonAnimation=a}),98);
__d("useMWV2ChatHotlikeButton",["I64","LSHotEmojiSize","LSIntEnum","MWV2ChatHotlikeButtonAnimation.react","MessengerWebUXLogger","QPLUserFlow","StickerConstants","clearTimeout","gkx","isStringNullOrEmpty","qex","qpl","react","requireDeferred","setTimeout","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState,o=c("requireDeferred")("MWV2ChatHotlikeSounds").__setRef("useMWV2ChatHotlikeButton"),p=500,q=(e={},e[c("LSHotEmojiSize").NONE]=(i||(i=d("I64"))).of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").SMALL]=i.of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").MEDIUM]=i.of_string(c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID),e[c("LSHotEmojiSize").LARGE]=i.of_string(c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID),e);function r(a){if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.small)return c("LSHotEmojiSize").SMALL;else if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.medium)return c("LSHotEmojiSize").MEDIUM;else return c("LSHotEmojiSize").LARGE}function s(){o.onReadyImmediately(function(a){return a.start()})}function t(){o.onReadyImmediately(function(a){return a.pop()})}function u(a){o.onReadyImmediately(function(b){return b.snap(a)})}function a(a,b,e,f){var g=c("isStringNullOrEmpty")(a),h=n(!1),i=h[0],o=h[1],v=m(null),w=m(null),x=m(!1),y=c("MessengerWebUXLogger").useInteractionLogger(),z=k(function(a){y==null?void 0:y({eventName:g?"send_hot_like":"send_hot_emoji",extraData:{size:a.toString()},threadType:e})},[g,y,e]),A=k(function(c){!g?b(a,void 0,void 0,(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f):b(void 0,void 0,q[c],(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f),z(c)},[a,g,z,b,f]),B=c("qex")._("1271"),C=c("useDebouncedComet")(A,{leading:!0,wait:(h=B)!=null?h:0}),D=function(){c("clearTimeout")(v.current),v.current=null};l(function(){return function(){D()}},[]);var E=function(){return x.current===!0&&(!i||v.current==null)};h=function(){x.current===!0&&(c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"hover-out"}}}),t()),x.current=!1,o(!1),D()};var F=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0)return;c("QPLUserFlow").start(c("qpl")._(25311430,"2261"));x.current=!0;o(!0);s();v.current=c("setTimeout")(function(){t(),o(!1),v.current=null,c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"long-press-pop"}}})},d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS+p)},G=k(function(){var a;a=(a=w.current)==null?void 0:a.getAnimations()[0];a=a==null?void 0:a.currentTime;return a!=null?a/d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS:0},[]),H=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0){B!=null?C(c("LSHotEmojiSize").SMALL):A(c("LSHotEmojiSize").SMALL);return}if(E()){x.current=!1;return}D();o(!1);x.current=!1;var a=G();a=r(a);u(a);B!=null?C(a):A(a);c("QPLUserFlow").endSuccess(c("qpl")._(25311430,"2261"),{annotations:{bool:{isDefaultLike:g},"int":{size:a}}})};return{animationsContainerRef:w,handleHoverOut:h,handleOnPress:H,handlePressIn:F,shouldShowGrowAnimation:i}}g["default"]=a}),98);
__d("MWV2ChatHotlikeButtonV2.react",["fbt","BaseView.react","CometEmoji.react","EmojiRenderer","MWLikeSvgIcon.react","MWV2ChatHotlikeButtonAnimation.react","MWXPressable.react","MWXTooltip.react","gkx","isStringNullOrEmpty","react","useMWV2ChatHotlikeButton"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback;b=20;var l=56;b/l;var m={adjustEmojiSize:{transform:"xtzsbya",$$css:!0},customEmojiButtonFDS:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,paddingEnd:"x2qib4z",$$css:!0},customEmojiButtonMDS:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingStart:"xcu9agk",paddingLeft:null,paddingRight:null,paddingEnd:"x2qib4z",$$css:!0},hotlikeButtonFDS:{marginStart:"xsgj6o6",marginLeft:null,marginRight:null,marginEnd:"xw3qccf",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0},hotlikeButtonMDS:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,marginEnd:"x1emribx",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}},n=h._("__JHASH__OzQk4bc7gK8__JHASH__");function a(a){var b=a.customEmoji,e=a.disabled;e=e===void 0?!1:e;var f=a.onSendMessage;a=a.threadType;f=c("useMWV2ChatHotlikeButton")(b,f,a,"MWV2ChatHotlikeButtonV2");a=f.animationsContainerRef;var g=f.handleHoverOut,i=f.handleOnPress,o=f.handlePressIn;f=f.shouldShowGrowAnimation;var p=k(function(a){if(c("isStringNullOrEmpty")(b))return;var e=d("EmojiRenderer").parse(b).map(function(a){return a.emoji});if(e.length!==1)return j.jsx("span",{children:b});e=e[0];return a===l?j.jsx(c("BaseView.react"),{xstyle:m.adjustEmojiSize,children:j.jsx(c("CometEmoji.react"),{emoji:e,size:a})}):j.jsx(c("CometEmoji.react"),{emoji:e,size:a})},[b]);if(!c("isStringNullOrEmpty")(b)){var q=h._("__JHASH__tAqfCk1edp7__JHASH__",[h._param("emoji",b)]),r=h._("__JHASH__CsSxx_HAT5f__JHASH__",[h._param("emoji",p(16))]);return j.jsx(c("MWXTooltip.react"),{align:"middle",label:n,position:"above",tooltip:f?null:r,children:j.jsx(c("MWXPressable.react"),{"aria-label":q,disabled:e,hideFocusOverlay:f,hideHoverOverlay:f,onHoverOut:g,onPress:i,onPressIn:o,overlayDisabled:e||f,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.customEmojiButtonMDS:m.customEmojiButtonFDS]},children:j.jsx(d("MWV2ChatHotlikeButtonAnimation.react").MWV2ChatHotlikeButtonAnimation,{animationsContainerRef:a,shouldShowGrowAnimation:f,children:p(l)})})})}return j.jsx(c("MWXTooltip.react"),{align:"middle",label:n,position:"above",tooltip:f?null:n,children:j.jsx(c("MWXPressable.react"),{"aria-label":n,disabled:e,hideFocusOverlay:f,hideHoverOverlay:f,onHoverOut:g,onPress:i,onPressIn:o,overlayDisabled:e||f,overlayRadius:"50%",testid:void 0,xstyle:function(){return[c("gkx")("23219")?m.hotlikeButtonMDS:m.hotlikeButtonFDS]},children:j.jsx(d("MWV2ChatHotlikeButtonAnimation.react").MWV2ChatHotlikeButtonAnimation,{animationsContainerRef:a,shouldShowGrowAnimation:f,children:j.jsx(c("MWLikeSvgIcon.react"),{className:"xsrhx6k",color:"var(--chat-composer-button-color)",size:20})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ComposerStickerButtonLegacy.react",["JSResourceForInteraction","MWChatComposerIcons","MWV2ComposerStickerCommon","MWXLazyPopoverTrigger.react","MWXPressable.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWV2ComposerOnStickerSelect"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("JSResourceForInteraction")("MWChatStickersFlyout.react").__setRef("MWV2ComposerStickerButtonLegacy.react"),k={buttonFDS:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},buttonMDS:{paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",$$css:!0}};function a(a){var b=a.color,e=a.disabled,f=a.isSecureThread,g=a.onSelectStickerPack;a=a.onSendMessage;a=c("useMWV2ComposerOnStickerSelect")(a,f,"MWV2ComposerStickerButtonLegacy");var h=c("MessengerWebUXLogger").useInteractionLogger();return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",disableAutoFlip:!0,popoverProps:{className:"x1fepime",onSelectStickerPack:g,onStickerSelect:a,shouldAlwaysShowAvatarPack:f,shouldHideDefaultPacks:f},popoverResource:j,position:"above",children:function(a,f,g,j,l,m,n){return i.jsx(c("MWXTooltip.react"),{align:"middle",forceInlineDisplay:!0,position:"above",tooltip:d("MWV2ComposerStickerCommon").LABEL,children:i.jsx(c("MWXPressable.react"),{"aria-label":d("MWV2ComposerStickerCommon").LABEL,disabled:e,onHoverIn:j,onHoverOut:l,onPress:function(){f(),h==null?void 0:h({eventName:"composer_open_sticker_picker"})},onPressIn:m,overlayRadius:"50%",ref:a,testid:void 0,xstyle:function(){return[c("gkx")("23219")?k.buttonMDS:k.buttonFDS]},children:i.jsx(d("MWChatComposerIcons").MWChatComposerIconsSticker,{fill:e?void 0:b,size:20})})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconLink",["MWXSvgIcon","SVGIcon","cr:9202","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9202")),c("gkx")("23219"));g["default"]=a}),98);
__d("NaviconFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{fillRule:"nonzero",d:"M452.75 1077.5h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PhotoAddFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M107.5 923.64a.682.682 0 0 1-.07-.003l-1.567-.146-.148 1.579a.75.75 0 0 1-1.493-.14l.148-1.579-1.43-.134a.75.75 0 0 1-.677-.816.744.744 0 0 1 .816-.677l1.431.134.133-1.428a.749.749 0 1 1 1.493.14l-.133 1.428 1.567.146a.75.75 0 0 1-.07 1.497m1.126-6.13-5.797-.51a1.512 1.512 0 0 0-1.63 1.377l-.693 7.966c-.035.402.088.794.347 1.104.26.31.622.501 1.022.537l5.795.51a1.485 1.485 0 0 0 1.098-.35c.308-.26.498-.625.533-1.027l.693-7.967a1.506 1.506 0 0 0-.347-1.104 1.494 1.494 0 0 0-1.022-.537",transform:"translate(352 157)"}),i.jsx("path",{d:"M100.27 927.842a2.528 2.528 0 0 1-.565-1.83l.165-1.926-.403-4.71a.183.183 0 0 1 .042-.132.178.178 0 0 1 .12-.065l.665-.06.09-1.037c.013-.167.046-.329.09-.484l-.973.087c-.437.038-.833.25-1.116.595a1.696 1.696 0 0 0-.379 1.227l.638 7.46c.038.448.245.853.582 1.142a1.61 1.61 0 0 0 1.2.389l.574-.052a2.456 2.456 0 0 1-.73-.604",transform:"translate(352 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("Query__lightspeed_data",["LSRelayContext","Promise","emptyFunction","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=new Map(),f=d("LSRelayContext").getContext(a);f instanceof(h||(h=b("Promise")))&&c("promiseDone")(f,function(a){f=a,e.forEach(function(a){return a()}),e.clear()});return{read:function(){return f instanceof(h||(h=b("Promise")))?d("relay-runtime").suspenseSentinel():{context:f,value:void 0}},subscribe:function(a){if(!(f instanceof(h||(h=b("Promise")))))return c("emptyFunction");var d={};e.set(d,a);return function(){e["delete"](d)}}}}g.lightspeed_data=a}),98);
__d("canMWAddMemberToGroupThread",["I64","LSIntEnum","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){if(b)return!1;b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16));b=b&&a.needsAdminApprovalForNewParticipant===!1;return d("LSThreadBitOffset").has(27,a)||b}g["default"]=a}),98);
__d("getMWV2HeaderSettingsPopoverTooltip",["fbt","LSMessagingThreadTypeUtil"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){a=a.threadType;a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);return a?h._("__JHASH__J1KJGjGSRI0__JHASH__"):h._("__JHASH__FjEOIpwxx5G__JHASH__")}g["default"]=a}),226);
__d("useCometSubscribeMessengerHasDefaultThreadOneToOneCapability",["LSContactBitOffset","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","useEnsureContactsExistAndUpdated","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){c("useEnsureContactsExistAndUpdated")(b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?a:void 0);var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables._user_info).map(function(a){return a.facebookUserId})},[e],f.id+":42"),i=d("ReQLSuspense").useFirst(function(){return g!=null?d("ReQL").fromTableAscending(e.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(g):d("ReQL").empty()},[e,g],f.id+":47"),j=i!=null&&d("LSContactBitOffset").has(80,i),k=d("ReQLSuspense").useFirst(function(){return a!=null&&b!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(b)?d("ReQL").fromTableAscending(e.tables.contacts,[].concat(d("LSContactBitOffset").contactCapabilityFields,["id"])).getKeyRange(a):d("ReQL").empty()},[e,a,b],f.id+":66");if(b==null||!d("LSMessagingThreadTypeUtil").isOpenOneToOne(b))return[!1,!0,null];if(i==null)return[!1,!1,null];if(!j)return[!1,!0,null];if(k==null)return[!1,!1,null];j=(i=d("LSContactBitOffset").has(83,k))!=null?i:!1;return[j,!0,k.id]}g["default"]=a}),98);
__d("useEditMessageHistoryMAWNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a){return[]}f["default"]=a}),66);
__d("useMAWCreateOptimisticSecureMessageNoOp",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(){return function(){throw c("err")("Attempted to use separate read hooks in non-separate read mode")}}g["default"]=a}),98);
__d("useMAWSelectedMessageNoOp",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return void 0}f["default"]=a}),66);
__d("useMWAddParticipantDialog",["JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","promiseDone","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWLSDatabaseLazySync").useSync((h||(h=d("LSIntEnum"))).ofNumber(7)),f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWAddParticipantOpenDialog.react").__setRef("useMWAddParticipantDialog")),g=f[0];f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MAWAddParticipantSecureDialog.react").__setRef("useMWAddParticipantDialog"));var i=f[0];return function(){c("promiseDone")(e());var f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);f?i({threadKey:a}):g({threadKey:a})}}g["default"]=a}),98);
__d("useObservable",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a){var b=j(),c=b[0],d=b[1];b=j();var e=b[0],f=b[1];b=j(!1);var g=b[0],h=b[1];i(function(){var b=a.subscribe({complete:function(){return h(!0)},error:f,next:d});return function(){return b.unsubscribe()}},[a]);return[c,e,g]}g["default"]=a}),98);
__d("useMWPMessageListData",["I64","Int64Hooks","MWPMessageListDataSource","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","cr:1034","react","useObservable","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useCallback,l=e.useEffect,m=e.useMemo,n=e.useState,o=15;function a(a,e){var g,j=a.threadKey,p=a.threadType,q=(h||(h=c("useReStore")))(),r=b("cr:1034")();a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();a=a.visibleMessage;var s=a==null?void 0:a.messageId,t=(a=a==null?void 0:a.timestamp)!=null?a:(i||(i=d("I64"))).max_int,u=e==null?void 0:e.threadKey,v=e==null?void 0:e.threadType;a=n(o);var w=a[0],x=a[1];e=n(o);var y=e[0],z=e[1];a=n(s);var A=a[0],B=a[1];e=n(t);var C=e[0],D=e[1];a=n(!1);e=a[0];var E=a[1];a=n(!1);var F=a[0],G=a[1],H=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.mi_act_mapping_table,["jid"]).getKeyRange(j).map(function(a){return a.jid})},[q,j],f.id+":70");a=d("Int64Hooks").useMemoInt64(function(){return new(c("MWPMessageListDataSource"))(q,r,{after:y,before:w,cursor:{messageId:A,secureThreadJid:H,threadKey:j,timestampMs:C},secondaryThreadKey:u,secondaryThreadType:v,threadType:p})},[y,w,q,r,H,A,u,v,j,p,C]);a=c("useObservable")(a);var I=a[0];a=a[1];l(function(){E(!1),G(!1)},[I]);if(a!=null)throw a;a=m(function(){var a;return(a=I==null?void 0:I.data.map(function(a){a[0];a=a[1];return a}))!=null?a:[]},[I]);var J=a.some(function(a){return a.messageId===s});d("Int64Hooks").useEffectInt64(function(){J||(D(t),B(s),x(o),z(o))},[J,s,t]);var K=(g=I==null?void 0:I.hasNext)!=null?g:!1,L=((g=I==null?void 0:I.isLoadingNext)!=null?g:!1)||F;g=k(function(){!L&&K&&(z(y+o),G(!0))},[K,L,y]);var M=(F=I==null?void 0:I.hasPrevious)!=null?F:!1,N=((F=I==null?void 0:I.isLoadingPrevious)!=null?F:!1)||e;F=k(function(){!N&&M&&(x(w+o),E(!0))},[M,N,w]);return{hasNext:K,hasPrevious:M,isLoadingNext:L,isLoadingPrevious:N,loadNext:g,loadPrevious:F,messages:a}}g["default"]=a}),98);