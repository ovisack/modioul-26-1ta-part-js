;/*FB_PKG_DELIM*/

__d("BotFeedbackKind",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11});f["default"]=a}),66);
__d("AdsAIMessengerConstants",["fbt","BotFeedbackKind"],(function(a,b,c,d,e,f,g,h){"use strict";b={title:h._("__JHASH__AVG11ix_BXJ__JHASH__"),value:(a=c("BotFeedbackKind")).BOT_FEEDBACK_NEGATIVE_HELPFUL};d={title:h._("__JHASH__wSP_qVisuoi__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED};e={title:h._("__JHASH__3krIxTLZtOD__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_ACCURATE};f={title:h._("__JHASH__O_hReSSI8n7__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_SAFE};c={title:h._("__JHASH__nQnVxqmzNMI__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_CLARITY};var i={title:h._("__JHASH__fdY6Ska9rb-__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_OTHER};b={excludingOther:[b,d,e,f,c],feedbackOptionOther:i};d=new Map([[a.BOT_FEEDBACK_NEGATIVE_GENERIC,"ads_ai_submit_negative_feedback_generic"],[a.BOT_FEEDBACK_NEGATIVE_HELPFUL,"ads_ai_submit_negative_feedback_not_relevant"],[a.BOT_FEEDBACK_NEGATIVE_ACCURATE,"ads_ai_submit_negative_feedback_not_accurate"],[a.BOT_FEEDBACK_NEGATIVE_INTERESTING,"ads_ai_submit_negative_feedback_repetitive"],[a.BOT_FEEDBACK_NEGATIVE_SAFE,"ads_ai_submit_negative_feedback_harmful"],[a.BOT_FEEDBACK_NEGATIVE_CLARITY,"ads_ai_submit_negative_feedback_hard_to_understand"],[a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED,"ads_ai_submit_negative_feedback_not_personalized"],[a.BOT_FEEDBACK_NEGATIVE_OTHER,"ads_ai_submit_negative_feedback_other"]]);e=h._("__JHASH__5X9UcGT23B8__JHASH__");g.FEEDBACK_OPTIONS=b;g.BotFeedbackKindToLoggerEventMapping=d;g.feedbackModalHeader=e}),226);
__d("randomShuffleSeeded",["Alea"],(function(a,b,c,d,e,f,g){function a(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=c("Alea").apply(void 0,d);function g(a){return Math.floor(f()*a)}for(var h=a.length-1;h>0;h--){var i=g(h+1);if(i!=h){var j=a[i];a[i]=a[h];a[h]=j}}return a}g["default"]=a}),98);
__d("AdsAIMessengerUtils",["AdsAIMessengerConstants","AdsAISitevarConfig","I64","RelayHooks","randomShuffleSeeded","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useMemo;function k(a){return m(a.senderId)}function l(a){return a.botResponseId!=null&&a.botResponseId.startsWith("ads_ai_shiba")}function a(a){return k(a)||l(a)}function m(a){return c("AdsAISitevarConfig").bot_id!=null&&(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_string(c("AdsAISitevarConfig").bot_id))}function b(){var a=d("RelayHooks").useActorID();return j(function(){var b=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.excludingOther,e=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.feedbackOptionOther;b=[].concat(b);c("randomShuffleSeeded")(b,parseInt(a,10)).push(e);return b},[a])}function e(a){if(a==null)return;return parseInt(a.slice(-16),10)}g.isMessageFromAdsAIBot=k;g.isMessageFromAdsAIShibaBot=l;g.isMessageFromAdsAI=a;g.isAdsAIParticipant=m;g.useRandomizedAdsAINegativeFeedbackOptions=b;g.generateInstanceIDFromOTID=e}),98);
__d("LSClearMessageSearchTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(69).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(70).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchClearMessageSearchTableStoredProcedure";e.exports=a}),null);
__d("LSClearMessageSearchTableStoredProcedure",["LSClearMessageSearchTable","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.type_;return c("LSClearMessageSearchTable").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSCommunityThreadCreationStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});f["default"]=a}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=new c.Map(),d[2].set("client_mutation_id",d[1]),d[2].set("community_id",a[0]),d[2].set("parent_message_id",a[2]),d[2].set("parent_thread_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("parent_thread_id"),d[2],d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,665]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCreateCommunitySubThreadStoredProcedure";e.exports=a}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.communityId;d[1]=b.parentThreadId;d[2]=b.parentMessageId;return c("LSCreateCommunitySubThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";e.exports=a}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSUpdateMessageSubThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.cast([0,16408]),d[1]=c.i64.cast([0,0]),d[2]=c.i64.cast([0,268437504]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[4]).then(function(a){return a=a,d[5]=a[0],a})},function(a){return c.localizeV2Async(c.i64.cast([0,261320435]),void 0).then(function(a){return d[6]=a})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,e){var f=b.done;b=b.value;return f?d[7]=d[6]:(e=b.item,c.sequence([function(b){return d[22]=e.text,d[22]!==void 0?c.resolve(d[21]=d[22]):c.sequence([function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[23]=void 0:(c=b.item,d[23]=c.senderId)})},function(a){return c.localizeV2Async(c.i64.cast([0,1369731110]),void 0).then(function(a){return d[25]=a})},function(b){return c.i64.neq(d[23],void 0)?c.sequence([function(b){return c.db.table(216).fetch([[[d[23],a[0]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[30]=void 0:(c=b.item,d[30]=c.profileName)})},function(a){return c.filter(c.db.table(7).fetch([[[d[23]]]]),function(a){return c.i64.eq(a.id,d[23])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[32]=void 0:(c=b.item,d[36]=c.firstName,d[36]!==void 0?d[35]=d[36]:d[35]=c.name,d[32]=d[35])})},function(a){return d[30]!==void 0?d[34]=d[30]:(d[32]!==void 0?d[35]=d[32]:d[35]=d[25],d[34]=d[35]),d[26]=d[34]}]):c.resolve(d[26]=d[25])},function(b){return c.db.table(16).fetch([[[a[1],a[2]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[27]=void 0:(c=b.item,d[27]=c.attachmentType)})},function(a){return c.i64.eq(d[27],c.i64.cast([0,5]))?c.sequence([function(a){return d[30]=c.createArray(),d[32]=(d[30].push(d[26]),d[30]),c.localizeV2Async(c.i64.cast([0,216075330]),d[30]).then(function(a){return d[31]=a})},function(a){return d[29]=d[31]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,2]))?c.sequence([function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[26]),d[31]),c.localizeV2Async(c.i64.cast([0,3093868587]),d[31]).then(function(a){return d[32]=a})},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,4]))?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[26]),d[32]),c.localizeV2Async(c.i64.cast([0,1965569930]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,1]))?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[26]),d[33]),c.localizeV2Async(c.i64.cast([0,3981943156]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[27],c.i64.cast([0,3]))?c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2071149394]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}]):c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[26]),d[34]),c.localizeV2Async(c.i64.cast([0,2414298738]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[29]=d[30]}])},function(a){return d[21]=d[29]}])},function(a){return d[7]=d[21]}]))})},function(b){return d[9]=d[7],c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[10]=c[0],d[11]=c[1],c):(b=a.item,c=[b.themeFbid,b.customEmoji],d[10]=c[0],d[11]=c[1],c)})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[5]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[5],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,26]),clientThreadKey:d[5],folderName:"community",parentThreadKey:a[1],lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[13],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[0],capabilities2:d[1],capabilities3:d[2],capabilities4:d[3],threadName:d[9],themeFbid:d[10],customEmoji:d[11]})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.senderId)})},function(a){return d[16]=c.createArray(),c.i64.neq(d[14],void 0)?d[21]=(d[16].push(d[14]),d[16]):0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return c.i64.neq(d[14],d[17])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(a){return d[22]=(d[16].push(d[21]),d[16])}]):c.resolve()},function(a){return d[18]=c.i64.of_int32(d[16].length),c.i64.gt(d[18],c.i64.cast([0,0]))?c.loopAsync(d[18],function(a){return d[21]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[16],d[21]).then(function(a){return a=a,d[22]=a[0],d[23]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[5],d[22]]]]),function(a){return c.i64.eq(a.threadKey,d[5])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[22])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[5],contactId:d[22],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(e){return c.storedProcedure(b("LSUpdateMessageSubThreadKey"),a[2],d[5])},function(a){return c.resolve()},function(b){return d[19]=new c.Map(),d[19].set("client_mutation_id",d[5]),d[19].set("community_id",a[0]),d[19].set("parent_thread_id",a[1]),d[19].set("parent_message_id",a[2]),d[20]=c.toJSON(d[19]),c.db.table(312).put({threadKey:d[5],metadata:d[20]})},function(a){return e[0]=d[5]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticCommunityChatSubThreadStoredProcedure";e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSIssueNewTask","LSLocalApplyOptimisticCommunityChatSubThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticCommunityChatSubThread"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return d[1]=new c.Map(),d[1].set("client_thread_key",d[0]),d[1].set("community_id",a[0]),d[1].set("parent_thread_id",a[1]),d[1].set("parent_message_id",a[2]),d[2]=d[1].get("client_thread_key"),d[1],d[3]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[2]),c.i64.cast([0,749]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalCreateOptimisticCommunityChatSubThreadStoredProcedure";e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.communityId;d[1]=b.parentThreadId;d[2]=b.parentMessageId;return c("LSLocalCreateOptimisticCommunityChatSubThread").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[2],d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[28]="product_params",d[23]=d[21].get(d[28]),d[21],d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[30]=!1:d[30]=!0,d[30]?d[31]=void 0:(d[34]=new c.Map(),d[38]="product_type",d[35]=d[23].get(d[38]),d[23],d[35]!==void 0?d[34].set(d[38],d[35]):0,d[39]="product_extras",d[36]=d[23].get(d[39]),d[23],d[36]?d[37]=!1:d[37]=!0,d[37]?0:(d[36]?d[40]=!1:d[40]=!0,d[40]?d[41]=void 0:(d[44]=d[36].get("__typename"),d[36],d[44]==="XMSGStoryReplyExtras"?(d[46]=new c.Map(),d[49]="logging",d[47]=d[36].get(d[49]),d[36],d[47]?d[48]=!1:d[48]=!0,d[48]?0:(d[47]?d[50]=!1:d[50]=!0,d[50]?d[51]=void 0:(d[54]=new c.Map(),d[62]="story_author_fbid",d[55]=d[47].get(d[62]),d[47],d[55]!==void 0?d[54].set(d[62],d[55]):0,d[63]="camera_post_type",d[56]=d[47].get(d[63]),d[47],d[56]!==void 0?d[54].set(d[63],d[56]):0,d[64]="story_type",d[57]=d[47].get(d[64]),d[47],d[57]!==void 0?d[54].set(d[64],d[57]):0,d[65]="post_source",d[58]=d[47].get(d[65]),d[47],d[58]!==void 0?d[54].set(d[65],d[58]):0,d[66]="fb_post_type",d[59]=d[47].get(d[66]),d[47],d[59]!==void 0?d[54].set(d[66],d[59]):0,d[67]="conversation_starter_type",d[60]=d[47].get(d[67]),d[47],d[60]!==void 0?d[54].set(d[67],d[60]):0,d[68]="story_reply_type",d[61]=d[47].get(d[68]),d[47],d[61]!==void 0?d[54].set(d[68],d[61]):0,d[51]=d[54]),d[52]=d[51].keys(),d[53]=c.i64.of_int32(d[52].length),c.i64.neq(d[53],c.i64.cast([0,0]))?d[46].set(d[49],d[51]):0),d[45]=d[46]):(d[44]==="XMSGMarketplaceExtras"?(d[47]=new c.Map(),d[66]="listing_id",d[48]=d[36].get(d[66]),d[36],d[48]!==void 0?d[47].set(d[66],d[48]):0,d[67]="initial_clicked_component",d[49]=d[36].get(d[67]),d[36],d[49]!==void 0?d[47].set(d[67],d[49]):0,d[68]="initial_tracking",d[50]=d[36].get(d[68]),d[36],d[50]!==void 0?d[47].set(d[68],d[50]):0,d[69]="referral_surface",d[51]=d[36].get(d[69]),d[36],d[51]!==void 0?d[47].set(d[69],d[51]):0,d[70]="referral_story_type",d[52]=d[36].get(d[70]),d[36],d[52]!==void 0?d[47].set(d[70],d[52]):0,d[71]="referral_ui_component",d[53]=d[36].get(d[71]),d[36],d[53]!==void 0?d[47].set(d[71],d[53]):0,d[72]="surface",d[54]=d[36].get(d[72]),d[36],d[54]!==void 0?d[47].set(d[72],d[54]):0,d[73]="tracking",d[55]=d[36].get(d[73]),d[36],d[55]!==void 0?d[47].set(d[73],d[55]):0,d[74]="ui_component",d[56]=d[36].get(d[74]),d[36],d[56]!==void 0?d[47].set(d[74],d[56]):0,d[75]="ad_id",d[57]=d[36].get(d[75]),d[36],d[57]!==void 0?d[47].set(d[75],d[57]):0,d[76]="server_session_id",d[58]=d[36].get(d[76]),d[36],d[58]!==void 0?d[47].set(d[76],d[58]):0,d[77]="cf_page_id",d[59]=d[36].get(d[77]),d[36],d[59]!==void 0?d[47].set(d[77],d[59]):0,d[78]="live_shopping_video_id",d[60]=d[36].get(d[78]),d[36],d[60]!==void 0?d[47].set(d[78],d[60]):0,d[79]="logging_id",d[61]=d[36].get(d[79]),d[36],c.i64.neq(d[61],void 0)?d[47].set(d[79],d[61]):0,d[80]="photo_ids",d[62]=d[36].get(d[80]),d[36],d[62]?d[63]=!1:d[63]=!0,d[63]?0:d[47].set(d[80],d[62]),d[81]="is_customized_message",d[64]=d[36].get(d[81]),d[36],d[64]!==void 0?d[47].set(d[81],d[64]):0,d[82]="referral_code",d[65]=d[36].get(d[82]),d[36],d[65]!==void 0?d[47].set(d[82],d[65]):0,d[46]=d[47]):(d[44]==="XMSGClickToMessengerAdExtras"?(d[48]=new c.Map(),d[59]="encrypted_ads_token",d[49]=d[36].get(d[59]),d[36],d[49]!==void 0?d[48].set(d[59],d[49]):0,d[60]="product_type",d[50]=d[36].get(d[60]),d[36],d[50]!==void 0?d[48].set(d[60],d[50]):0,d[61]="post_id",d[51]=d[36].get(d[61]),d[36],d[51]!==void 0?d[48].set(d[61],d[51]):0,d[62]="ad_id",d[52]=d[36].get(d[62]),d[36],d[52]!==void 0?d[48].set(d[62],d[52]):0,d[63]="page_id",d[53]=d[36].get(d[63]),d[36],d[53]!==void 0?d[48].set(d[63],d[53]):0,d[64]="photo_id",d[54]=d[36].get(d[64]),d[36],d[54]!==void 0?d[48].set(d[64],d[54]):0,d[65]="photo_index",d[55]=d[36].get(d[65]),d[36],c.i64.neq(d[55],void 0)?d[48].set(d[65],d[55]):0,d[66]="fallback_url",d[56]=d[36].get(d[66]),d[36],d[56]!==void 0?d[48].set(d[66],d[56]):0,d[67]="product_id",d[57]=d[36].get(d[67]),d[36],d[57]!==void 0?d[48].set(d[67],d[57]):0,d[68]="user_id",d[58]=d[36].get(d[68]),d[36],d[58]!==void 0?d[48].set(d[68],d[58]):0,d[47]=d[48]):(d[44]==="XMSGZorroMessageExtras"?(d[49]=new c.Map(),d[51]="is_enabled",d[50]=d[36].get(d[51]),d[36],d[50]!==void 0?d[49].set(d[51],d[50]):0,d[48]=d[49]):(d[44]==="XMSGGenAISuggestedPromptExtras"?(d[50]=new c.Map(),d[53]="prompt_type",d[51]=d[36].get(d[53]),d[36],d[51]!==void 0?d[50].set(d[53],d[51]):0,d[54]="qpl_join_id",d[52]=d[36].get(d[54]),d[36],d[52]!==void 0?d[50].set(d[54],d[52]):0,d[49]=d[50]):(d[44]==="XMSGGenAIMultiModalExtras"?(d[51]=new c.Map(),d[55]="should_skip_genai_eval",d[52]=d[36].get(d[55]),d[36],d[52]!==void 0?d[51].set(d[55],d[52]):0,d[56]="associated_multimodal_message_id",d[53]=d[36].get(d[56]),d[36],d[53]!==void 0?d[51].set(d[56],d[53]):0,d[57]="qpl_join_id",d[54]=d[36].get(d[57]),d[36],d[54]!==void 0?d[51].set(d[57],d[54]):0,d[50]=d[51]):(d[44]==="XMSGGenAIFlashImagineExtras"?(d[52]=new c.Map(),d[55]="seed",d[53]=d[36].get(d[55]),d[36],c.i64.neq(d[53],void 0)?d[52].set(d[55],d[53]):0,d[56]="qpl_join_id",d[54]=d[36].get(d[56]),d[36],d[54]!==void 0?d[52].set(d[56],d[54]):0,d[51]=d[52]):(d[44]==="XMSGShareSheetExtras"?(d[53]=new c.Map(),d[55]="recipient_selection_session_id",d[54]=d[36].get(d[55]),d[36],d[54]!==void 0?d[53].set(d[55],d[54]):0,d[52]=d[53]):(d[44]==="XMSGGenAIAssistantAPIExtras"?(d[54]=new c.Map(),d[80]="referrer_session_id",d[55]=d[36].get(d[80]),d[36],d[55]!==void 0?d[54].set(d[80],d[55]):0,d[81]="thread_session_id",d[56]=d[36].get(d[81]),d[36],d[56]!==void 0?d[54].set(d[81],d[56]):0,d[82]="prompt_id",d[57]=d[36].get(d[82]),d[36],d[57]!==void 0?d[54].set(d[82],d[57]):0,d[83]="prompt_type",d[58]=d[36].get(d[83]),d[36],d[58]!==void 0?d[54].set(d[83],d[58]):0,d[84]="qpl_join_id",d[59]=d[36].get(d[84]),d[36],d[59]!==void 0?d[54].set(d[84],d[59]):0,d[85]="meta_ai_prompt_type",d[60]=d[36].get(d[85]),d[36],d[60]!==void 0?d[54].set(d[85],d[60]):0,d[86]="is_subsequent_send",d[61]=d[36].get(d[86]),d[36],d[61]!==void 0?d[54].set(d[86],d[61]):0,d[87]="context_injection_type",d[62]=d[36].get(d[87]),d[36],d[62]!==void 0?d[54].set(d[87],d[62]):0,d[88]="context_injection_timestamp_ms",d[63]=d[36].get(d[88]),d[36],d[63]!==void 0?d[54].set(d[88],d[63]):0,d[89]="meta_ai_response_to_persist",d[64]=d[36].get(d[89]),d[36],d[64]?d[65]=!1:d[65]=!0,d[65]?0:(d[64]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[110]="text",d[104]=d[64].get(d[110]),d[64],d[104]!==void 0?d[103].set(d[110],d[104]):0,d[111]="bot_response_id",d[105]=d[64].get(d[111]),d[64],d[105]!==void 0?d[103].set(d[111],d[105]):0,d[112]="bot_request_id",d[106]=d[64].get(d[112]),d[64],d[106]!==void 0?d[103].set(d[112],d[106]):0,d[113]="external_search_params",d[107]=d[64].get(d[113]),d[64],d[107]?d[108]=!1:d[108]=!0,d[108]?0:(d[107]?d[115]=!1:d[115]=!0,d[115]?d[116]=void 0:(d[119]=new c.Map(),d[127]="search_result_uri",d[120]=d[107].get(d[127]),d[107],d[120]?d[121]=!1:d[121]=!0,d[121]?0:(d[132]=c.i64.of_int32(d[120].length),c.i64.neq(d[132],c.i64.cast([0,0]))?d[119].set(d[127],d[120]):0),d[128]="search_query",d[122]=d[107].get(d[128]),d[107],d[122]!==void 0?d[119].set(d[128],d[122]):0,d[129]="attribution_link",d[123]=d[107].get(d[129]),d[107],d[123]!==void 0?d[119].set(d[129],d[123]):0,d[130]="search_engine",d[124]=d[107].get(d[130]),d[107],d[124]!==void 0?d[119].set(d[130],d[124]):0,d[131]="references_title",d[125]=d[107].get(d[131]),d[107],d[125]?d[126]=!1:d[126]=!0,d[126]?0:(d[132]=c.i64.of_int32(d[125].length),c.i64.neq(d[132],c.i64.cast([0,0]))?d[119].set(d[131],d[125]):0),d[116]=d[119]),d[117]=d[116].keys(),d[118]=c.i64.of_int32(d[117].length),c.i64.neq(d[118],c.i64.cast([0,0]))?d[103].set(d[113],d[116]):0),d[114]="followup_prompt_text",d[109]=d[64].get(d[114]),d[64],d[109]!==void 0?d[103].set(d[114],d[109]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[89],d[100]):0),d[90]="gql_dark_test_qpl_join_id",d[66]=d[36].get(d[90]),d[36],d[66]!==void 0?d[54].set(d[90],d[66]):0,d[91]="gql_dark_test_client_start_time",d[67]=d[36].get(d[91]),d[36],d[67]!==void 0?d[54].set(d[91],d[67]):0,d[92]="prompt_context",d[68]=d[36].get(d[92]),d[36],d[68]?d[69]=!1:d[69]=!0,d[69]?0:(d[68]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[106]="context_token",d[104]=d[68].get(d[106]),d[68],d[104]!==void 0?d[103].set(d[106],d[104]):0,d[107]="context_token_type",d[105]=d[68].get(d[107]),d[68],c.i64.neq(d[105],void 0)?d[103].set(d[107],d[105]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[92],d[100]):0),d[93]="imagine_flash_extras",d[70]=d[36].get(d[93]),d[36],d[70]?d[71]=!1:d[71]=!0,d[71]?0:(d[70]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[106]="seed",d[104]=d[70].get(d[106]),d[70],c.i64.neq(d[104],void 0)?d[103].set(d[106],d[104]):0,d[107]="qpl_join_id",d[105]=d[70].get(d[107]),d[70],d[105]!==void 0?d[103].set(d[107],d[105]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[93],d[100]):0),d[94]="conversation_marker_id",d[72]=d[36].get(d[94]),d[36],d[72]!==void 0?d[54].set(d[94],d[72]):0,d[95]="multi_modal_extras",d[73]=d[36].get(d[95]),d[36],d[73]?d[74]=!1:d[74]=!0,d[74]?0:(d[73]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[107]="should_skip_genai_eval",d[104]=d[73].get(d[107]),d[73],d[104]!==void 0?d[103].set(d[107],d[104]):0,d[108]="associated_multimodal_message_id",d[105]=d[73].get(d[108]),d[73],d[105]!==void 0?d[103].set(d[108],d[105]):0,d[109]="qpl_join_id",d[106]=d[73].get(d[109]),d[73],d[106]!==void 0?d[103].set(d[109],d[106]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[95],d[100]):0),d[96]="ads_extras",d[75]=d[36].get(d[96]),d[36],d[75]?d[76]=!1:d[76]=!0,d[76]?0:(d[75]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[105]="context",d[104]=d[75].get(d[105]),d[75],d[104]!==void 0?d[103].set(d[105],d[104]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[96],d[100]):0),d[97]="suggested_prompt_extras",d[77]=d[36].get(d[97]),d[36],d[77]?d[78]=!1:d[78]=!0,d[78]?0:(d[77]?d[99]=!1:d[99]=!0,d[99]?d[100]=void 0:(d[103]=new c.Map(),d[106]="prompt_type",d[104]=d[77].get(d[106]),d[77],d[104]!==void 0?d[103].set(d[106],d[104]):0,d[107]="qpl_join_id",d[105]=d[77].get(d[107]),d[77],d[105]!==void 0?d[103].set(d[107],d[105]):0,d[100]=d[103]),d[101]=d[100].keys(),d[102]=c.i64.of_int32(d[101].length),c.i64.neq(d[102],c.i64.cast([0,0]))?d[54].set(d[97],d[100]):0),d[98]="disable_server_mqtt_typing_indicator",d[79]=d[36].get(d[98]),d[36],d[79]!==void 0?d[54].set(d[98],d[79]):0,d[53]=d[54]):(d[44]==="XMSGProductHighlightExtras"?(d[55]=new c.Map(),d[58]="product_highlight_type",d[56]=d[36].get(d[58]),d[36],d[56]!==void 0?d[55].set(d[58],d[56]):0,d[59]="conversation_marker",d[57]=d[36].get(d[59]),d[36],d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55]):(d[44]==="XMSGMagicMessengerExtras"?(d[56]=new c.Map(),d[58]="is_magic_thread",d[57]=d[36].get(d[58]),d[36],d[57]!==void 0?d[56].set(d[58],d[57]):0,d[55]=d[56]):(d[44]==="XMSGAdsAIExtras"?(d[57]=new c.Map(),d[59]="context",d[58]=d[36].get(d[59]),d[36],d[58]!==void 0?d[57].set(d[59],d[58]):0,d[56]=d[57]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGMessageSendProductExtrasUnion: ","",d[44]].join("")),d[56]=d[36]),d[55]=d[56]),d[54]=d[55]),d[53]=d[54]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[47]=d[48]),d[46]=d[47]),d[45]=d[46]),d[45].set("__typename",d[44]),d[41]=d[45]),d[42]=d[41].keys(),d[43]=c.i64.of_int32(d[42].length),c.i64.neq(d[43],c.i64.cast([0,0]))?d[34].set(d[39],d[41]):0),d[31]=d[34]),d[32]=d[31].keys(),d[33]=c.i64.of_int32(d[32].length),c.i64.neq(d[33],c.i64.cast([0,0]))?d[22].set(d[28],d[31]):0),d[29]="logging_metadata",d[25]=d[21].get(d[29]),d[21],d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[30]=!1:d[30]=!0,d[30]?c.resolve(d[31]=void 0):c.sequence([function(a){return d[34]=new c.Map(),d[39]="feature_tags",d[35]=d[25].get(d[39]),d[25],d[35]?d[36]=!1:d[36]=!0,d[36]?0:(d[41]=c.i64.of_int32(d[35].length),c.i64.neq(d[41],c.i64.cast([0,0]))?d[34].set(d[39],d[35]):0),d[40]="content_model",d[37]=d[25].get(d[40]),d[25],d[37]?d[38]=!1:d[38]=!0,d[38]?c.resolve():c.sequence([function(a){return d[37]?d[41]=!1:d[41]=!0,d[41]?c.resolve(d[42]=void 0):c.sequence([function(a){return d[45]=new c.Map(),d[50]="containing_post",d[46]=d[37].get(d[50]),d[37],d[46]?d[47]=!1:d[47]=!0,d[47]?c.resolve():c.sequence([function(a){return d[46]?d[52]=!1:d[52]=!0,d[52]?c.resolve(d[53]=void 0):c.sequence([function(a){return d[56]=new c.Map(),d[64]="key_type",d[57]=d[46].get(d[64]),d[46],d[57]!==void 0?d[56].set(d[64],d[57]):0,d[65]="fb_post_type",d[58]=d[46].get(d[65]),d[46],d[58]?d[59]=!1:d[59]=!0,d[59]?0:(d[68]=c.i64.of_int32(d[58].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[56].set(d[65],d[58]):0),d[66]="photos",d[60]=d[46].get(d[66]),d[46],d[60]?d[61]=!1:d[61]=!0,d[61]?c.resolve():c.sequence([function(a){return d[60]?d[68]=!1:d[68]=!0,d[68]?c.resolve(d[69]=void 0):c.sequence([function(a){return d[71]=c.createArray(),d[72]=c.i64.of_int32(d[60].length),c.i64.gt(d[72],c.i64.cast([0,0]))?c.loopAsync(d[72],function(a){return d[73]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[60],d[73]).then(function(a){return a=a,d[74]=a[0],d[75]=a[1],a})},function(a){return d[76]=new c.Map(),d[78]="key_type",d[77]=d[74].get(d[78]),d[74],d[77]!==void 0?d[76].set(d[78],d[77]):0,d[79]=(d[71].push(d[76]),d[71])}])}):c.resolve()},function(a){return d[69]=d[71]}])},function(a){return d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[56].set(d[66],d[69]):0}])},function(a){return d[67]="videos",d[62]=d[46].get(d[67]),d[46],d[62]?d[63]=!1:d[63]=!0,d[63]?c.resolve():c.sequence([function(a){return d[62]?d[68]=!1:d[68]=!0,d[68]?c.resolve(d[69]=void 0):c.sequence([function(a){return d[71]=c.createArray(),d[72]=c.i64.of_int32(d[62].length),c.i64.gt(d[72],c.i64.cast([0,0]))?c.loopAsync(d[72],function(a){return d[73]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[62],d[73]).then(function(a){return a=a,d[74]=a[0],d[75]=a[1],a})},function(a){return d[76]=new c.Map(),d[78]="key_type",d[77]=d[74].get(d[78]),d[74],d[77]!==void 0?d[76].set(d[78],d[77]):0,d[79]=(d[71].push(d[76]),d[71])}])}):c.resolve()},function(a){return d[69]=d[71]}])},function(a){return d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[56].set(d[67],d[69]):0}])},function(a){return d[53]=d[56]}])},function(a){return d[54]=d[53].keys(),d[55]=c.i64.of_int32(d[54].length),c.i64.neq(d[55],c.i64.cast([0,0]))?d[45].set(d[50],d[53]):0}])},function(a){return d[51]="metadata",d[48]=d[37].get(d[51]),d[37],d[48]?d[49]=!1:d[49]=!0,d[49]?0:(d[48]?d[52]=!1:d[52]=!0,d[52]?d[53]=void 0:(d[56]=d[48].get("__typename"),d[48],d[56]==="XMSGGroupsContentLoggingMetadata"?(d[58]=new c.Map(),d[60]="num_members",d[59]=d[48].get(d[60]),d[48],c.i64.neq(d[59],void 0)?d[58].set(d[60],d[59]):0,d[57]=d[58]):(d[56]==="XMSGStoriesContentLoggingMetadata"?(d[59]=new c.Map(),d[64]="author",d[60]=d[48].get(d[64]),d[48],d[60]?d[61]=!1:d[61]=!0,d[61]?0:(d[60]?d[67]=!1:d[67]=!0,d[67]?d[68]=void 0:(d[71]=new c.Map(),d[74]="profile",d[72]=d[60].get(d[74]),d[60],d[72]?d[73]=!1:d[73]=!0,d[73]?0:(d[72]?d[75]=!1:d[75]=!0,d[75]?d[76]=void 0:(d[79]=new c.Map(),d[81]="id",d[80]=d[72].get(d[81]),d[72],d[80]!==void 0?d[79].set(d[81],d[80]):0,d[76]=d[79]),d[77]=d[76].keys(),d[78]=c.i64.of_int32(d[77].length),c.i64.neq(d[78],c.i64.cast([0,0]))?d[71].set(d[74],d[76]):0),d[68]=d[71]),d[69]=d[68].keys(),d[70]=c.i64.of_int32(d[69].length),c.i64.neq(d[70],c.i64.cast([0,0]))?d[59].set(d[64],d[68]):0),d[65]="post_source",d[62]=d[48].get(d[65]),d[48],d[62]!==void 0?d[59].set(d[65],d[62]):0,d[66]="story_type",d[63]=d[48].get(d[66]),d[48],d[63]!==void 0?d[59].set(d[66],d[63]):0,d[58]=d[59]):(function(a){c.logger(a).warn(a)}(["Unknown subtype for LSXMSGContentLoggingMetadataUnion: ","",d[56]].join("")),d[58]=d[48]),d[57]=d[58]),d[57].set("__typename",d[56]),d[53]=d[57]),d[54]=d[53].keys(),d[55]=c.i64.of_int32(d[54].length),c.i64.neq(d[55],c.i64.cast([0,0]))?d[45].set(d[51],d[53]):0),d[42]=d[45]}])},function(a){return d[43]=d[42].keys(),d[44]=c.i64.of_int32(d[43].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[34].set(d[40],d[42]):0}])},function(a){return d[31]=d[34]}])},function(a){return d[32]=d[31].keys(),d[33]=c.i64.of_int32(d[32].length),c.i64.neq(d[33],c.i64.cast([0,0]))?d[22].set(d[29],d[31]):0}])},function(a){return d[27]=c.toJSON(d[22]),d[10]=d[27]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[13],d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.timestampMs;d[2]=b.messageId;d[3]=b.actorId;d[4]=b.reaction;d[5]=b.sendAttribution;d[6]=b.pluginType;return c("LSOptimisticUpsertReaction").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[18],d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[26]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[27]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[26],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,248]))?d[25]=!1:(c.i64.eq(d[26],c.i64.cast([0,0]))?d[28]=!c.i64.eq(c.i64.and_(d[27],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,1]))?d[29]=!c.i64.eq(c.i64.and_(d[27],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,2]))?d[30]=!c.i64.eq(c.i64.and_(d[27],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[26],c.i64.cast([0,3]))?d[31]=!c.i64.eq(c.i64.and_(d[27],d[24]),c.i64.cast([0,0])):d[31]=!1,d[30]=d[31]),d[29]=d[30]),d[28]=d[29]),d[25]=d[28]),d[20]===d[25]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[7],d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.actorId;d[1]=b.threadId;d[2]=b.messageId;d[3]=b.messageTimestamp;d[4]=b.reactionFbid;d[5]=b.currentCount;d[6]=b.viewerIsReactor;d[7]=b.reactionStyle;d[8]=b.operation;d[9]=b.reactionLiteral;return c("LSOptimisticUpsertReactionV2").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bot_feedback_kind",a[0]),d[0].set("bot_response_id",a[2]),d[0].set("feedback_kind_type",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",c.i64.cast([0,756]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(b){return c.db.table(315).fetch([[[a[2]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[2]=b.feedbackSubmissionStatus)})},function(b){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.db.table(315).add({botResponseId:a[2],feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]}):c.forEach(c.db.table(315).fetch([[[a[2]]]]),function(b){var d=b.update;b.item;return d({feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure";e.exports=a}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.botFeedbackKind;d[1]=b.feedbackKindType;d[2]=b.botResponseId;return c("LSSubmitGenAIBotFeedback").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LsMessageSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4190");b=d("FalcoLoggerInternal").create("ls_message_search_end",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchMsgImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4191");b=d("FalcoLoggerInternal").create("ls_message_search_msg_impression",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchMsgResultChosenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4231");b=d("FalcoLoggerInternal").create("ls_message_search_msg_result_chosen",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchSearchClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4464");b=d("FalcoLoggerInternal").create("ls_message_search_search_clicked",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4683");b=d("FalcoLoggerInternal").create("ls_message_search_start",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchThreadImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6727");b=d("FalcoLoggerInternal").create("ls_message_search_thread_impression",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchThreadListClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6293");b=d("FalcoLoggerInternal").create("ls_message_search_thread_list_click",a);e=b;g["default"]=e}),98);
__d("MAWAudioUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d=URL.createObjectURL(a);return new(h||(h=b("Promise")))(function(a,b){var e=new Audio();e.setAttribute("crossOrigin","anonymous");e.addEventListener("loadedmetadata",function(c){c=c.currentTarget;if(c instanceof HTMLAudioElement){c=c.duration;a(Math.ceil(c))}else b("EventTarget returned for event should be HTMLAudioElement")});e.src=d;e.onabort=function(){b(function(){throw c("err")("Error loading audio from provided URL")})};e.onerror=function(){b(function(){throw c("err")("Wrong blob type")})}})}g.getAudioDurationInSeconds=a}),98);
__d("MAWAudioPreProcess",["MAWAudioUtils","Promise","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic audio preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start audio preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWAudioPreProcess"]);function c(a){k.LOG(j());return d("MAWAudioUtils").getAudioDurationInSeconds(a).then(function(c){return(h||(h=b("Promise"))).resolve({durations:c,file:a,isPtt:!0,type:"audio"})})}function e(c){var e=a.URL.createObjectURL(c);k.LOG(i());return d("MAWAudioUtils").getAudioDurationInSeconds(c).then(function(a){return(h||(h=b("Promise"))).resolve({durations:a,file:c,isPtt:!0,type:"audio",url:e})})}g.audioPreprocess=c;g.optimisticAudioPreprocess=e}),98);
__d("MAWDeanonMessagesMetadataQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8027437630658405"}),null);
__d("MAWDeanonMessagesMetadataQuery.graphql",["MAWDeanonMessagesMetadataQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],c={alias:null,args:null,concreteType:"XFBEncryptedBackupMailbox",kind:"LinkedField",name:"mailbox",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"data",variableName:"data"}],concreteType:"XFBTDeanonMessagesResponse",kind:"LinkedField",name:"deanon_messages_metadata",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"offline_threading_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sort_order_ms",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MAWDeanonMessagesMetadataQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MAWDeanonMessagesMetadataQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MAWDeanonMessagesMetadataQuery_facebookRelayOperation"),metadata:{},name:"MAWDeanonMessagesMetadataQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWDeanonMessagesMetadataQuery",["CometRelay","FBLogger","I64","MAWDeanonMessagesMetadataQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h!==void 0?h:h=b("MAWDeanonMessagesMetadataQuery.graphql");function a(a,b,e,f,g,h){g===void 0&&(g=null);return d("CometRelay").fetchQuery(a,j,{data:{act_thread_id:b,direction:e,reference_timestamp:g,requested_messages:f}},h?{fetchPolicy:h}:void 0).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.encrypted_backup)==null?void 0:(a=a.mailbox)==null?void 0:a.deanon_messages_metadata;var b=new Set();return((a=a)!=null?a:[]).map(function(a){var e=a.offline_threading_id;e!=null&&(b.has(e)&&c("FBLogger")("labyrinth_web").warn("[MAWDeanonMessagesMetadataQuery] Duplicate message returned from server in the deanon API"),b.add(e));return{offline_threading_id:a.offline_threading_id,sort_order_ms:a.sort_order_ms!=null?(i||(i=d("I64"))).of_string(a.sort_order_ms):null}})})}g.fetchDeanonMsgsMetadata=a}),98);
__d("MAWEBDeanonFetch",["FBLogger","I64","MAWDeanonMessagesMetadataQuery","WAJids","WAResultOrError","XPlatRelayEnvironment","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.count,f=a.direction,g=a.fetchPolicy;a=a.timestampMs;try{b=(yield d("MAWDeanonMessagesMetadataQuery").fetchDeanonMsgsMetadata(d("XPlatRelayEnvironment").getRelayEnvironment(),d("WAJids").threadIdForChatJid(b),f,e,a,g));f=b.reduce(function(a,b){var c=b.offline_threading_id;b=b.sort_order_ms;b!=null&&c!=null&&a.push({externalId:c,msgType:"unknown-deanon",sortOrderMs:(h||(h=d("I64"))).to_float(b)});return a},[]);return d("WAResultOrError").makeResult(f)}catch(a){c("FBLogger")("messenger_web_missing_messages").catching(a).mustfix("Deanon GraphQL fails with error");return d("WAResultOrError").makeError("request-error",a.message)}});return i.apply(this,arguments)}g.fetchMessagesMetadataFromEBDeanon=a}),98);
__d("MAWEBFetch",["EBFormatUtils","FBLogger","LSMEBTaskCreationSource","MAWAsyncEBIssueRangeQuery","MWEncryptedBackUpEBNotEnabledError","WAResultOrError","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.count,f=a.db,g=a.direction,h=a.skipFullRestore;h=h===void 0?!1:h;var i=a.timestampMs;a=a.traceId;e=d("EBFormatUtils").adjustCount(e,g);var j=e[0];e=e[1];h=h?d("MAWAsyncEBIssueRangeQuery").issueQueryAsPromise:d("MAWAsyncEBIssueRangeQuery").issueQueryAndWaitForReStoreAsPromise;h=h(f,b,d("EBFormatUtils").adjustTs(i,g),j,e,c("LSMEBTaskCreationSource").MESSENGER_MESSAGE_LIST_PAGINATION,a);if(h==null)return d("WAResultOrError").makeResult({hasMoreAfter:!1,hasMoreBefore:!1,messages:[],restoreType:"none"});f=(yield h.then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)return d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED);c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[EBFetch] Failed to fetch");return d("WAResultOrError").makeError(null)}));if(f.success===!1)return f;b=f.value;i=b.hasMoreAfter;g=b.hasMoreBefore;j=b.messages;e=b.restoreType;return d("WAResultOrError").makeResult({hasMoreAfter:i,hasMoreBefore:g,messages:j,restoreType:e})});return h.apply(this,arguments)}g["default"]=a}),98);
__d("MAWSendVideoToWorker",["MAWMediaWorkerResource","Promise","WALogger","WebWorker"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clean up media worker"]);i=function(){return a};return a}var j=k();function a(a){var c;return new(h||(h=b("Promise")))(function(b){c=j&&l(j)?k():j,c.setMessageHandler(function(a){b(a)}).execute(),c.postMessage(a)})["finally"](function(){c&&(d("WALogger").LOG(i()),c.terminate(),(!j||!j.isCurrentState("constructed"))&&(j=k()))})}function k(){return new(c("WebWorker"))(c("MAWMediaWorkerResource")).setAllowCrossPageTransition(!0)}function l(a){return a.isCurrentState("preparing")||a.isCurrentState("executing")}g.sendVideoMessageToWorker=a}),98);
__d("MAWVideoPreProcess",["MAWMediaPreProcessQpl","MAWSendVideoToWorker","MAWVideoUtils","Promise","WAMediaWasmWorkerClient","WATagsLogger","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processVideoThroughWasm error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through wasm, file name: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got error! ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair rejected file (",")"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["trouble parsing file "," (fossil ",") ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through asm.js, file name: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to preprocess video: ",""]);p=function(){return a};return a}var q=["video/x-ms-wmv","video/x-msvideo","video/avi","video/x-flv","video/ogg","video/mpeg"],r=d("WATagsLogger").TAGS(["MAWVideoPreProcess"]),s=typeof self.BigInt==="function";function e(a,c){return u(a,c).then(function(a){return(h||(h=b("Promise"))).all([a,d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a)])}).then(function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).resolve({file:c,thumbnailUrlAndSpec:a,type:"video"})})}function f(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=(yield d("MAWVideoUtils").getVideoThumbnailSpec(c)),f=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,thumbnailSpec:e,type:"video",url:f})});return t.apply(this,arguments)}function u(a,b){var c=s,e=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("video",a);e.addAnnotations({bool:{wamedia_wasm_enabled:c},"int":{total_number_of_files:(b=b)!=null?b:1}});b=c?v(a,e):x(a);return b.then(function(a){e.endSuccess({"int":{compressed_file_size:a.size}});return a})["catch"](function(b){r.ERROR(p(),b.toString());e.endFail("unable_to_process_video",{string:{preprocessError:b.toString()}});return a})}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){r.DEV(j(),a.name);var e=(yield a.arrayBuffer());b=(yield d("WAMediaWasmWorkerClient").mp4CheckAndRepairInWorker({eventFlow:b,input:new Uint8Array(e)}));if(!b.success){r.ERROR(i(),b.error);throw c("err")("processVideoThroughWasm error: "+b.error)}e=new File([b.value],a.name,{type:"video/mp4"});return e});return w.apply(this,arguments)}function x(a){r.DEV(o(),a.name);return y(a).then(function(d){if(!d)throw c("err")("invalid file");d=new File([d.file],a.name,{type:d.file.type});return(h||(h=b("Promise"))).resolve(d)})}function y(a){return d("MAWSendVideoToWorker").sendVideoMessageToWorker({asGif:!1,file:a,type:"prep"}).then(function(a){var b=a.error,c=a.file,d=a.filename,e=a.result;a=a.type;switch(a){case"result":return e;case"parsingError":r.ERROR(n(),c,d,String(b));c&&r.ERROR(m(),String(b));r.ERROR(l(),String(b));return void 0}})["catch"](function(a){r.ERROR(k(),String(a));return void 0})}function z(a){return!d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!1:!q.includes(a)}g.videoPreprocess=e;g.optimisticVideoPreprocess=f;g.processVideoThroughWasm=v;g.processVideoThroughAsmJs=x;g.isSupportedVideoFileType=z}),98);
__d("MAWMediaPreprocess",["MAWAudioPreProcess","MAWDocumentPreProcess","MAWImagePreProcess","MAWSupportedDocumentTypes","MAWVideoPreProcess","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic mediaPreprocess, file name: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start mediaPreprocess, file name: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["MAWMediaPreprocess"]);function a(a,b){j.DEV(i(),a.name);return k(a,function(a){return d("MAWImagePreProcess").imagePreprocess(a,!1,b)},function(a){return d("MAWVideoPreProcess").videoPreprocess(a,b)},d("MAWAudioPreProcess").audioPreprocess,d("MAWDocumentPreProcess").documentPreprocess)}function b(a){j.DEV(h(),a.name);return k(a,d("MAWImagePreProcess").optimisticImagePreprocess,d("MAWVideoPreProcess").optimisticVideoPreprocess,d("MAWAudioPreProcess").optimisticAudioPreprocess,d("MAWDocumentPreProcess").optimisticDocumentPreprocess)}function k(a,b,c,e,f){if(a.size===0)return Promise.reject("Unsupported file type");if(d("MAWImagePreProcess").isSupportedImageFileType(a.type))return b(a);if(d("MAWVideoPreProcess").isSupportedVideoFileType(a.type))return c(a);if(a.type.startsWith("audio/"))return e(a);return d("MAWSupportedDocumentTypes").isAllowedType(a.name)?f(a):Promise.reject("Unsupported file type")}g.mediaPreprocess=a;g.optimisticMediaPreprocess=b}),98);
__d("MWMediaManagerTypes",["MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case"animated_image":return c("MessagingAttachmentType").ANIMATED_IMAGE;case"image":return c("MessagingAttachmentType").IMAGE;case"video":return c("MessagingAttachmentType").VIDEO;case"audio":return c("MessagingAttachmentType").AUDIO;case"document":return c("MessagingAttachmentType").FILE;default:return null}}g.getMessagingAttachmentTypeFromMediaMetadataAttachmentType=a}),98);
__d("MAWMediaManagerUtils",["FBLogger","MAWBridgeFireAndForget","MAWMediaPreprocess","MAWMediaUtils","MAWMiActOnActThreadReady","MWMediaManagerTypes","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a){return(h||(h=b("Promise"))).all(a.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c[0];c=c[1];var f=d("MAWMediaPreprocess").mediaPreprocess(e,a.length),g=(yield d("MAWMediaPreprocess").optimisticMediaPreprocess(e));i.set(c,{optimisticMedia:g,processedMediaPromise:f});f=d("MWMediaManagerTypes").getMessagingAttachmentTypeFromMediaMetadataAttachmentType(g.type);e={attachmentType:(f=f)!=null?f:void 0,file:e,offlineAttachmentId:c,previewHeight:(e=(f=g.imageSpec)==null?void 0:f.height)!=null?e:void 0,previewWidth:(f=(c=g.imageSpec)==null?void 0:c.width)!=null?f:void 0};return(h||(h=b("Promise"))).resolve(e)});return function(a){return c.apply(this,arguments)}}()))}function e(a,e,f){c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e,"MAWMediaManagerUtils",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=f.reduce(function(a,b){b=(b=i.get(b.offlineAttachmentId))==null?void 0:b.processedMediaPromise;b!=null&&a.push(b);return a},[]);a=(yield (h||(h=b("Promise"))).all(a));a.forEach(function(a){switch(a.type){case"image":case"animated_image":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"video":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"audio":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});case"document":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});default:c("FBLogger")("messenger_web_media").mustfix("MAW Optimistic upload media: unknown media attachment file type: "+a.type)}});return h.resolve()});return function(b,c){return a.apply(this,arguments)}}()))}g.MAWMediaManagerAttachmentsV2=i;g.preprocessV2=a;g.upload=e}),98);
__d("MAWMessageIntegrityChecker",["FBLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b){if(a.externalId===b.externalId)return 0;if(a.sortOrderMs>b.sortOrderMs)return 1;return a.sortOrderMs<b.sortOrderMs?-1:-1}function i(a){return function(b,c){if(b.sortOrderMs===c.sortOrderMs){var d,e;d=(d=b.externalId)!=null?d:"";e=(e=c.externalId)!=null?e:"";if(a!=null){d=a.has(d);e=a.has(e);if(d&&!e)return-1;else if(!d&&e)return 1}return((d=c.externalId)!=null?d:"").localeCompare((e=b.externalId)!=null?e:"")}return c.sortOrderMs-b.sortOrderMs}}var j=i();function k(a,b){var c=b.reduce(function(a,b){b.externalId!=null&&a.set(b.externalId,b.sortOrderMs);return a},new Map());return a.map(function(a){var b;return babelHelpers["extends"]({},a,{sortOrderMs:(b=a.externalId!=null?c.get(a.externalId):null)!=null?b:a.sortOrderMs})}).sort(j)}function l(a,b,c){a=new Set(a.map(function(a){return a.externalId}).filter(Boolean));return b.toSorted(i(a)).slice(0,c)}function a(a,b,d,e,f){var g=new Set(a.map(function(a){return a.externalId})),i=new Set(b.map(function(a){return a.externalId})),j=n(g,i);i=n(i,g);g=k(a,b);a=l(g,b,d);b=0;var m=0,o=0,p=0,q=[],r=null;while(b<g.length&&m<a.length){var s=g[b],t=a[m];if(r!=null&&h(t,r)===0){m+=1;r=t;c("FBLogger")("messenger_web_missing_messages").mustfix("Detected duplicate messages in reference. Target source: %s, reference source: %s",e,f);continue}var u=h(s,t);u===0?(b+=1,m+=1,r=t,q.push([s,{result:"consistent"}])):u<0?(m+=1,r=t,o+=1,q.push([t,{result:"missing_in_target"}])):(b+=1,p+=1,q.push([s,{result:"missing_in_reference"}]))}while(b<g.length){u=g[b];b+=1;a.length<d?(p+=1,q.push([u,{result:"missing_in_reference"}])):q.push([u,{result:"skipped"}])}while(m<a.length){t=a[m];m+=1;g.length<d?(o+=1,q.push([t,{result:"missing_in_target"}])):q.push([t,{result:"skipped"}])}if(o===0&&p===0)return{detailedResults:q,result:"consistent",setDifferenceInReference:i,setDifferenceInTarget:j};else if(o>0&&p===0)return{detailedResults:q,numOfMissingMessages:o,result:"missing_in_target",setDifferenceInReference:i,setDifferenceInTarget:j};else if(o===0&&p>0)return{detailedResults:q,numOfMissingMessages:p,result:"missing_in_reference",setDifferenceInReference:i,setDifferenceInTarget:j};else return{detailedResults:q,numOfMissingMessages:p+o,result:"missing_in_both",setDifferenceInReference:i,setDifferenceInTarget:j}}function d(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var d=b.filter(function(a){a[0];a=a[1];return a.result==="missing_in_target"}).map(function(a){var b=a[0];a[1];return b.externalId}),e=(yield a.fetchMessagesByExternalId(d,{admin:!1,editMsgHistory:!1,media:!1,reactions:!1,receiverFetch:!1,xma:!1})),f=new Set(e.map(function(a){return a.externalId}));return b.map(function(a){var b=a[0];a=a[1];if(f.has(b.externalId)){var d=e.find(function(a){return a.externalId===b.externalId});if(!d){c("FBLogger")("messenger_web_missing_messages").mustfix("Failed to find msg with external id: %s in MAW",b.externalId);return[b,{result:"missing_in_target_invalid_sortOrder"}]}d=d.sortOrderMs-b.sortOrderMs;return[b,{result:"missing_in_target_invalid_sortOrder",sortOrderSkewMs:d}]}return[b,a]})});return m.apply(this,arguments)}function n(a,b){var c=0;for(a of a)b.has(a)||(c+=1);return c}g.compareMessageMetadataForDescOrder=j;g.checkIntegrityforMessageList=a;g.checkMsgsExistenceInMAWAndDecomposeTargetConsistencyResult=d}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useIsReactionsV2Enabled",["LSMessagingThreadTypeUtil","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","useIsChatPreviewsEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),g=d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(e):d("ReQL").empty()},[b,e],f.id+":33");return(a=d("MWLSThread").useThread(a,function(a){return i(a,g==null?void 0:g.communityType)}))!=null?a:!1}function i(a,b){if(d("LSMessagingThreadTypeUtil").isOpenFnFThread(a))return!1;if(d("LSThreadBitOffset").has(139,a))return!0;a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return a?!0:!1}function b(a,b){var c=d("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(a.threadType)||d("LSMessagingThreadTypeUtil").isSocialChannelUnjoined(a.threadType);a=d("useIsChatPreviewsEnabled").isChatPreviewsEnabled(a,b);return c||a}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=i;g.isReactionsV2ReadOnly=b}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=c("useMWLSDefaultThreadSource")(),k=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var m=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(m!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!k||(j||(j=d("I64"))).equal(a.reactionFbid,m.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(e,g,a,m.reactionFbid,h);var o=(j||(j=d("I64"))).equal(b.reactionFbid,m.reactionFbid);(!k||o)&&(yield l(e,g,a,b.count,b.reactionFbid,h,k));o||(yield n(e,g,a,m.reactionFbid,h))}else c("FBLogger")("messenger_web_product").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return e.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:g,messageId:a.messageId,reaction:h,sendAttribution:i(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":226")})())},[e,a,k,g,i])}g["default"]=a}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","MAWODSProxy","MWPActor.react","WAOdsEnums","cr:9778","promiseDone","requireDeferred","useIsSecureMessage","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,k=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=(g=b("cr:9778")==null?void 0:b("cr:9778").useSendOrRemoveReaction(a.threadKey,(h||(h=d("I64"))).to_string(a.senderId)))!=null?g:null,n=c("useIsSecureMessage")(k,a,{fallbackIsSecure:e}),o=c("useMWPSendOrUnsendReaction")(a);return d("Int64Hooks").useMemoInt64(function(){return function(b,g,h){if(n&&m!==null)m(b,g),d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"post-cutover_msg"});else{e&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"pre-cutover_msg"});o((b=g)!=null?b:"")}j.onReady(function(b){return c("promiseDone")(b.log(k,a.messageId,a.threadKey,f,h,void 0,void 0,void 0,a.senderId,void 0,l))})}},[n,m,e,o,k,a.messageId,a.threadKey,a.senderId,f,l])}g.useSendOrRemoveReaction=a}),98);
__d("MWCMMentionsComposerPluginCreatorWithTypeaheadViewForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","I64","MWChatComposerMentionsViewItem.react","ReQL","ReQLSuspense","messengerMentionsLexicalCreateNodeStrategy","pageID","promiseDone","react","useCometTypeaheadViewListStrategy","useCommunityMembers","useMWCMMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useEffect,m={view:{minWidth:"x1jzhcrs",$$css:!0}};function a(a){var b=a.editor,e=a.fbGroupId,g=a.folderId;a=a.threadFBID;var j=(h||(h=c("useReStore")))(),n=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(j.tables.community_members.index("communitySource")).getKeyRange(e,(i||(i=d("I64"))).of_int32(8),c("pageID")).filter(function(a){a=a.isBlocked;return a!==!0}).take(6).map(function(a){var b,c;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(j.tables.contextual_profile_v1).getKeyRange(a.contactId,g),f.id+":60"))==null?void 0:b.profileName;return{key:(i||(i=d("I64"))).to_string(a.contactId),label:(c=b)!=null?c:a.name,rawData:{photoURI:a.profilePictureUrl,source:"all",subtitle:b!=null?a.name:a.subtitle},type:"entry"}})},[j,e,g],f.id+":48");a=c("useMWCMMentionsDataSourceResolverConfig")(e,(i||(i=d("I64"))).of_string(a),n);n=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:m.view});var o=d("useCommunityMembers").useClearMemberList(8);l(function(){return function(){c("promiseDone")(o(c("pageID")))}},[o]);return k.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:b,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:n})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMSubthreadChatTabContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=e({pushSubthreadViewPage:null});function a(){return j(l)}function b(a){var b=a.children,c=a.pushSubthreadViewPage;a=k(function(){return{pushSubthreadViewPage:c}},[c]);return i.jsx(l.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";g.useSubthreadChatTabContext=a;g.MWCMSubthreadChatTabContextProvider=b}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useMemo,l=c.useState,m=e({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function a(){return j(m)}function b(a){a=a.children;var b=l(!1),c=b[0],d=b[1];b=k(function(){return{isSubthreadFocused:c,setIsSubthreadFocused:d}},[c,d]);return i.jsx(m.Provider,{value:b,children:a})}b.displayName=b.name+" [from "+f.id+"]";g.useIsSubthreadFocusedContext=a;g.MWCMIsSubthreadFocusedContextProvider=b}),98);
__d("MWMessageActionButton.react",["BaseTheme.react","MWXCircleButton.react","MWXTooltip.react","MessengerWebUXLogger","gkx","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k={dark:{},light:{},type:"VARIABLES"},l={dark:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},light:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},type:"VARIABLES"};b=i.forwardRef(a);function a(a,b){var d=a.label,e=a.loggingEvent,f=a.onPress;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","loggingEvent","onPress"]);var g=c("MessengerWebUXLogger").useInteractionLogger(),h=j(function(a){f==null?void 0:f(a),e&&(g==null?void 0:g(e))},[g,e,f]),m=c("useMWPThreadTheme")(),n=m.backgroundGradientColors;m=m.threadTheme;m=c("gkx")("24125")&&(Boolean(m.backgroundUrl)||n.length>0);return i.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:d,children:i.jsx(c("BaseTheme.react"),{config:m?l:k,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({color:m?"primary":"secondary",label:d,onPress:h,ref:b,size:28,type:m?"overlay":"deemphasized"},a))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:9297","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9297")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatForwardAction.react",["MWMessageActionButton.react","MWXIconShare","ODS","emptyFunction","react","useMWChatForward"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","forward"),a==null?void 0:a.onClick()}function a(a){var b=a.dropToggle;b=b===void 0?!1:b;var d=a.forwardDialogType;d=d===void 0?"open_":d;var e=a.fromSecureThread,f=a.label,g=a.messageID;a=a.onForward;var h=c("useMWChatForward")({dropToggle:b,forwardDialogType:d,fromSecureThread:e,messageID:g,onClose:c("emptyFunction"),onSend:a});return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconShare"),label:f,loggingEvent:"open_forward_message_dialog",onPress:function(){return k(h)},testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatReactionsActionContainer.react",["JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","MWXLazyPopoverTrigger.react","MWXPopoverLoadingState.react","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useContext,l=b.useState,m={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}};function a(a){var b=a.align;b=b===void 0?"middle":b;var e=a.alwaysShowEmojiPicker;e=e===void 0?!1:e;var f=a.children,g=a.closeActionsMenu,h=a.disableCustomReactions;h=h===void 0?!1:h;var n=a.hasReactionsV2,o=a.isBroadcastChannel,p=a.isBroadcastThread,q=a.isSecure;q=q===void 0?!1:q;var r=a.messageID,s=a.onVisibilityChange,t=a.reactionsPopoverResource,u=a.selectedReactions,v=a.sendReaction,w=k(d("MWV2MessageRowIsRowFocusedContext.react").context);t=(a=t)!=null?a:c("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsActionContainer.react");a=l(!1);var x=a[0],y=a[1],z=u!=null&&u.length>0&&u[0]||void 0;a=e||x;e=j(function(a){var b=z!=null&&n!==!0&&z===a;v(a,b);return g()},[z,n,v,g]);x=j(function(a){a||y(!1),s(a),w.setFocused(a)},[w,s]);return i.jsx(c("MWXLazyPopoverTrigger.react"),{align:b==="end_"?"end":b,fallback:i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:m.popoverLoading}),onVisibilityChange:x,popoverProps:{closeActionsMenu:g,disableCustomReactions:h,isBroadcastChannel:o,isBroadcastThread:p,isSecure:q,messageID:r,onClose:c("emptyFunction"),onSelect:e,selectedReactions:u,setShowEmojiPicker:y,showEmojiPicker:a},popoverResource:t,popoverType:a?"dialog":"menu",position:a?"below":"above",children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerInCallReactionFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M26.5 5a1 1 0 1 1 2 0v2.25c0 .138.112.25.25.25H31a1 1 0 1 1 0 2h-2.25a.25.25 0 0 0-.25.25V12a1 1 0 1 1-2 0V9.75a.25.25 0 0 0-.25-.25H24a1 1 0 1 1 0-2h2.25a.25.25 0 0 0 .25-.25V5z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21 7.792a.485.485 0 0 0-.366-.475A11.027 11.027 0 0 0 18 7C11.925 7 7 11.925 7 18s4.925 11 11 11 11-4.925 11-11c0-.908-.11-1.79-.317-2.634a.485.485 0 0 0-.475-.366H27.5a3 3 0 0 1-3-3 .5.5 0 0 0-.5-.5 3 3 0 0 1-3-3v-.708zM14.25 14c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm7.5 0c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm1.75 7.5c0 2-2.5 4-5.5 4s-5.5-2-5.5-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWChatReactionsAddReactionIcon",["MWXSvgIcon","MessengerInCallReactionFilled.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(c("MessengerInCallReactionFilled.svg.react")),!0);g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext;e={current:c("emptyFunction")};var k={current:c("emptyFunction")},l={current:c("emptyFunction")};c={current:c("emptyFunction")};e={forwardMessage:e,openReactionsMenu:k,removeMessage:l,replyToMessage:c};var m=d(e);function a(){return j(m)}function b(a){var b=a.children;a=a.value;return i.jsx(m.Provider,{value:a,children:b})}b.displayName=b.name+" [from "+f.id+"]";g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWChatReactionsAction.react",["fbt","MWChatMessageId","MWChatReactionsActionContainer.react","MWChatReactionsAddReactionIcon","MWMessageActionButton.react","MWV2MessageRowActionsContext.react","MWXIconFaceHappyOutline","ODS","emptyFunction","react","useIsMultiReactionEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect;function a(a){var b=h._("__JHASH__czR8vxcW0mN__JHASH__"),e=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),f=e.openReactionsMenu,g=l(function(){f.current=c("emptyFunction");return},[f]);m(function(){return g},[g]);e=a.messageID;e=d("MWChatMessageId").getThreadId(e);var i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(e);return k.jsx(c("MWChatReactionsActionContainer.react"),babelHelpers["extends"]({},a,{children:function(a,e,g,h,l,m){g=function(){e(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")};f.current=g;return k.jsx(c("MWMessageActionButton.react"),{icon:i?c("MWChatReactionsAddReactionIcon"):c("MWXIconFaceHappyOutline"),label:b,loggingEvent:"click_react_to_message",onHoverIn:h,onHoverOut:l,onPress:g,onPressIn:m,ref:a,testid:void 0})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){c("gkx")("24170")&&c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:a,event_name:b,is_secured:d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),other_user_fbid:e!=null?(h||(h=d("I64"))).to_string(e):null,thread_fbid:(h||(h=d("I64"))).to_string(f)}})}g.logEvent=a}),98);
__d("MWPConversationSearchContext.react",["$InternalEnum","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useCallback,k=c.useMemo,l=c.useState;d=b("$InternalEnum")({NAVIGATING:1,NAVIGATED:2});var m=e();c=m;function a(a){a=a.children;var b=l(),c=b[0],d=b[1];b=l();var e=b[0],f=b[1];b=l(!1);var g=b[0],h=b[1];b=l(!1);var n=b[0],o=b[1],p=j(function(a){o(a),h(a)},[]);b=k(function(){return{isConversationSearchVisible:n,navigation:e,search:c,setIsConversationSearchVisible:p,setNavigation:f,setSearch:d,setShouldNavigateSidePanelToSearch:h,shouldNavigateSidePanelToSearch:g}},[n,e,c,p,g]);return i.jsx(m.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.SearchNavigationState=d;g.context=c;g.MWPConversationSearchContext=a}),98);
__d("MWPConversationSearchLogger",["I64","LSMessagingThreadTypeUtil","LsMessageSearchEndFalcoEvent","LsMessageSearchMsgImpressionFalcoEvent","LsMessageSearchMsgResultChosenFalcoEvent","LsMessageSearchSearchClickedFalcoEvent","LsMessageSearchStartFalcoEvent","LsMessageSearchThreadImpressionFalcoEvent","LsMessageSearchThreadListClickFalcoEvent","coerceMessagingThreadTypeToLSThreadType","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=void 0;function k(a,b,d){var e;e=a?(e=j)!=null?e:l():c("uuidv4")();b={instanceId:e,threadKey:b,threadType:d,universalSearchInstanceId:a?e:void 0};i=b;return b}function l(){var a=c("uuidv4")();j=a;return a}function a(){var a=l();c("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:2,message_search:{instance_id:a,surface_name:0,universal_search_instance_id:a}}})}function b(a,b){var d=j;if(d==null)return;k(!0,a,b);c("LsMessageSearchThreadListClickFalcoEvent").log(function(){return{message_search:{instance_id:d,universal_search_instance_id:d},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(b)}}})}function e(a){var b=j;if(b==null)return;c("LsMessageSearchThreadImpressionFalcoEvent").log(function(){return{message_search:{instance_id:b,msg_match_cnt:"0",surface_name:0,universal_search_instance_id:b},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(a)}}})}function m(){var a=i;if(a==null)return;c("LsMessageSearchEndFalcoEvent").log(function(){return{end_action:0,message_search:{instance_id:a.instanceId,universal_search_instance_id:a.universalSearchInstanceId}}});i=void 0}function f(a,b){m();var e=k(!1,a,b),f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);c("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:0,is_fts:f,message_search:{instance_id:e.instanceId,surface_name:1},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(b)}}})}function n(){var a=i;if(a==null)return;c("LsMessageSearchSearchClickedFalcoEvent").log(function(){return{message_search:{instance_id:a.instanceId,universal_search_instance_id:a.universalSearchInstanceId},thread:{type:a.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(a.threadType):void 0}}})}function o(a,b,e){var f=i;if(f==null)return;c("LsMessageSearchMsgResultChosenFalcoEvent").log(function(){return{click_surface_name:1,message:{sent_time:(e==null?void 0:e.messageTimestampMs)!=null?(h||(h=d("I64"))).to_float(e.messageTimestampMs):void 0},message_search:{instance_id:f.instanceId,universal_search_instance_id:f.universalSearchInstanceId},position:b.toString(),prev_or_next:a,thread:{type:f.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(f.threadType):void 0}}})}function p(a){var b=i;if(b==null)return;c("LsMessageSearchMsgImpressionFalcoEvent").log(function(){return{message:{sent_time:(a==null?void 0:a.messageTimestampMs)!=null?(h||(h=d("I64"))).to_float(a.messageTimestampMs):void 0},message_search:{instance_id:b.instanceId,surface_name:5,universal_search_instance_id:b.universalSearchInstanceId},thread:{type:b.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(b.threadType):void 0}}})}p={logMessageSearchEnd:m,logMessageSearchMsgImpression:p,logMessageSearchMsgResultChosen:o,logMessageSearchSearchClicked:n,logMessageSearchStart:f,logUniversalMessageSearch:a,logUniversalMessageSearchThreadClicked:b,logUniversalMessageSearchThreadImpression:e};g["default"]=p}),98);
__d("useMWPClearConversationSearch",["LSClearMessageSearchTableStoredProcedure","LSFactory","LSIntEnum","LSMessageSearchType","MWPConversationSearchContext.react","MWPVisibleMessageContext.react","asyncToGeneratorRuntime","nullthrows","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useCallback,l=e.useContext;function a(){var a=c("nullthrows")(l(d("MWPConversationSearchContext.react").context)),e=a.setNavigation,g=a.setSearch;a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var j=a.setVisibleMessage,m=(h||(h=c("useReStore")))();return k(function(a){var h;h=(h=a==null?void 0:a.shouldResetNavigation)!=null?h:!0;var k=(a=a==null?void 0:a.shouldClearThreadSearch)!=null?a:!0;g();h&&e();j(function(a){return(a==null?void 0:a.source)==="Search"?null:a});c("promiseDone")(m.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSFactory")(a);yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)});k&&(yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":51"))},[m,g,e,j])}g["default"]=a}),98);
__d("useMWPCloseConversationSearchSession",["MWPConversationSearchContext.react","MWPConversationSearchLogger","nullthrows","react","useMWPClearConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext;function a(){var a=c("useMWPClearConversationSearch")(),b=c("nullthrows")(j(d("MWPConversationSearchContext.react").context)),e=b.setIsConversationSearchVisible;return i(function(b){e(!1),a(b),c("MWPConversationSearchLogger").logMessageSearchEnd()},[e,a])}g["default"]=a}),98);
__d("MWInboxInfoPanelContext.react",["Int64Hooks","MWInboxPersistedUIState","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","cr:124","emptyFunction","gkx","react","useEmptyFunction","useMWPCloseConversationSearchSession"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.createContext,l=j.useCallback,m=j.useContext,n=j.useRef,o=j.useState,p=(j=b("cr:124"))!=null?j:c("useEmptyFunction"),q=k({currentSubthreadView:null,footerContentRef:{current:null},isOnMemberRequestsPageRef:{current:!1},pushMemberRequestsPage:c("emptyFunction"),setCurrentSubthreadView:c("emptyFunction"),setPushMemberRequestsPage:c("emptyFunction"),setShouldNavToMemberRequests:c("emptyFunction"),setShowSubthreadList:c("emptyFunction"),setSubthreadKey:c("emptyFunction"),setThreadInfoVisible:c("emptyFunction"),shouldNavToMemberRequests:!1,sourceIsSubthreadNav:{current:!1},subthreadKey:null,threadInfoVisible:!0});function a(){return m(q)}function e(a){a=a.children;var b=d("MWInboxPersistedUIState").usePersistedUIState(!0,"__MWInboxDetail.info__"),e=b[0],f=b[1],g=n(!1);b=o(null);var h=b[0],j=b[1],k=g.current,r=n(c("emptyFunction")),s=r.current,t=n(!1),u=n(null),v=n(!1);b=o(null);var w=b[0],x=b[1],y=c("useMWPCloseConversationSearchSession")();b=l(function(){f(!1),j(null),x(null)},[f]);p(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,b);b=m(c("MWResponsiveLayoutContext.react"));var z=b.popCard,A=b.pushCard,B=l(function(a){if(c("gkx")("24056")){a=Boolean(a)===!1?z:A;a(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)}},[A,z]),C=l(function(a){a?(x(null),j(null)):y({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),f(a),B(a)},[f,y,B]),D=l(function(a){f(!1),j(a),B(a)},[f,B]),E=l(function(a){g.current=a},[]),F=l(function(a,b){b===void 0&&(b=!1),a&&(f(!1),y({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),j(null)),x(a?"subthreadList":null),v.current=a&&b,B(a)},[f,B,y]),G=l(function(a){r.current=a},[]);b=d("Int64Hooks").useMemoInt64(function(){return{currentSubthreadView:w,footerContentRef:u,isOnMemberRequestsPageRef:t,pushMemberRequestsPage:s,setCurrentSubthreadView:x,setPushMemberRequestsPage:G,setShouldNavToMemberRequests:E,setShowSubthreadList:F,setSubthreadKey:D,setThreadInfoVisible:C,shouldNavToMemberRequests:k,sourceIsSubthreadNav:v,subthreadKey:h,threadInfoVisible:e}},[e,G,E,F,D,s,C,k,w,h]);return i.jsx(q.Provider,{value:b,children:a})}e.displayName=e.name+" [from "+f.id+"]";g.useMWInboxInfoPanelContext=a;g.MWInboxInfoPanelProvider=e}),98);
__d("MWMessageListLoggingContext",["react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));d=h;var j=d.createContext,k=d.useContext,l=d.useRef,m=j({current:""});function a(a){var b=a.children;a=a.flowInstanceId;a=l(a);return i.jsx(m.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return k(m)}function e(){var a=k(m);(a.current===null||a.current==="")&&(a.current=c("uuidv4")());return a}g.MWMessageListLoggingContext=a;g.useFlowInstanceIdContext=b;g.useFlowInstanceId=e}),98);
__d("MWPBaseMessageListRowActions.react",["XPlatReactEnvironment","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k=d("XPlatReactEnvironment").isWeb(),l={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",width:"x1mqs8db",$$css:!0},rootNative:{rowGap:"xzgd20w",columnGap:"xl5lk40",$$css:!0},rootWeb:{columnGap:"xl5lk40",$$css:!0}},m=i.createContext("full");function a(){return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[l.root,k?l.rootWeb:l.rootNative]})}a.displayName=a.name+" [from "+f.id+"]";function n(a){var b=a.children;a=a.outgoing;return i.jsx(d("react-strict-dom").html.div,{role:"none",style:[l.root,k?l.rootWeb:l.rootNative,a?l.outgoing:l.incoming],children:b})}n.displayName=n.name+" [from "+f.id+"]";function b(a){var b=a.children;a=a.showWith;a=a===void 0?"full":a;var c=j(m);c=c==="partial"&&a!=="partial";return i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,style:c&&l.hidden,children:b})}b.displayName=b.name+" [from "+f.id+"]";function c(a){var b=a.ariaHidden,c=a.children,e=a.onMouseEnter,f=a.onMouseLeave,g=a.outgoing,h=a.visibility;h=h===void 0?"full":h;a=a.xstyle;return i.jsx(m.Provider,{value:h,children:i.jsx(d("react-strict-dom").html.div,{"aria-hidden":(h=b)!=null?h:!1,onMouseEnter:e,onMouseLeave:f,style:[o.root,g?o.outgoing:o.incoming,a],children:i.jsx(n,{outgoing:g,children:c})})})}c.displayName=c.name+" [from "+f.id+"]";var o={incoming:{paddingStart:"x1t2a60a",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsEmptyList=a;g.MWPBaseMessageListRowActionsList=n;g.MWPBaseMessageListRowActionsListItem=b;g.MWPBaseMessageListRowActionsContainer=c}),98);
__d("MWPMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};g["default"]=a}),98);
__d("MWXIconDots3Vertical",["MWXSvgIcon","SVGIcon","cr:9121","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9121")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWPThreadCapabilitiesContext"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),e=b.canUnsendMessage;b=b.isPaused;a=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return e&&a&&!b}g["default"]=a}),98);
__d("useIsRollcallEnabled",["LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=Boolean(d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(152,a)}));return a}g["default"]=a}),98);
__d("useShouldAllowRollCallForMessage",["I64","LSIntEnum","MessagingAttachmentType","gkx","isStringNullOrEmpty","useIsRollcallEnabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=[c("MessagingAttachmentType").IMAGE,c("MessagingAttachmentType").VIDEO];function a(a,b){var e=c("useIsRollcallEnabled")(a.threadKey);if(!e)return!1;return c("gkx")("23420")&&!c("isStringNullOrEmpty")(a.text)?!0:b.some(function(a){var b=(a=a.attachmentType)!=null?a:(h||(h=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").NONE);return j.some(function(a){return(i||(i=d("I64"))).equal(b,(h||(h=d("LSIntEnum"))).ofNumber(a))})})}g.ATTACHMENT_TYPES_THAT_ALLOW_PROMPTS=j;g.useShouldAllowRollCallForMessage=a}),98);
__d("MWV2ContextualActionsButton.react",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWMessageActionButton.react","MWPActor.react","MWPThreadCapabilitiesContext","MWV2LogMessageClick","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXDeferredPopoverTrigger.react","MWXIconDots3Vertical","MessagingAttachmentType","MetaConfig","ReQL","ReQLSuspense","emptyFunction","gkx","isFeatureLimitEnabled","react","requireDeferred","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWPCanRemoveMessageGlobally","useMWXEntryPointDialog","useMWXLazyDialog","useReStore","useShouldAllowRollCallForMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var n=b.useCallback,o=b.useContext,p=b.useEffect,q=c("requireDeferred")("MWV2ContextualActionsMenu.react").__setRef("MWV2ContextualActionsButton.react");function a(a){var b=a.attachment,e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,l=a.containerThreadKey,r=a.extraActions,s=a.isSubthreadParentMessage;s=s===void 0?!1:s;var t=a.isUnavailableMessage;t=t===void 0?!1:t;var u=a.learnMoreDialogType,v=a.learnMoreOnMessageRemove,w=a.message,x=a.onRemoveMessageLogger,y=a.removeMessageDialogTitle,aa=a.setMoreMenuOpen,z=a.showBusinessMessageFeedbackOptionsInContextualMenu,A=a.showCreateSubthread;A=A===void 0?!1:A;var B=a.showFeedbackOptionsInContextualMenu,C=a.showForwardActionInContextualMenu,D=a.showLearnMoreInContextualMenu,E=a.showReactionInContextualMenu,F=a.showReplyActionInContextualMenu,G=a.threadType,H=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(H.tables.threads,["parentThreadKey","threadKey","threadType","cannotUnsendReason","threadSubtype"]).getKeyRange(w.threadKey)},[H,w.threadKey],f.id+":89");var I=a==null?void 0:a.parentThreadKey,ba=h._("__JHASH__I1DdCdLzOkz__JHASH__"),J=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),K=J.localDeleteMessageEnabled,L=J.modifyPinnedMessageV2Enabled;J=J.reportMessageToAdminEnabled;var M=c("useMWPCanRemoveMessageGlobally")(w),N=d("LSMessagingThreadTypeUtil").isArmadilloSecure(G),O=c("useIsSecureMessage")(H,w,{fallbackThreadType:G}),P=d("MWCMThreadTypes.react").isJoinedCMThread(G),Q=c("useIsReadOnlyFeatureLimitedWithThreadType")(G),R=d("ReQLSuspense").useFirst(function(){if(d("LSMessagingThreadTypeUtil").isCMSubthread(G))if(I==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(H.tables.participants).getKeyRange(I,w.senderId);else if(P)return d("ReQL").fromTableAscending(H.tables.participants).getKeyRange(w.threadKey,w.senderId);return d("ReQL").empty()},[P,G,I,H,w.senderId,w.threadKey],f.id+":122"),S=d("ReQLSuspense").useFirst(function(){return P?d("ReQL").fromTableAscending(H.tables.contacts,["capabilities","capabilities2"]).getKeyRange(w.senderId):d("ReQL").empty()},[H,P,w.senderId],f.id+":149");Q=(!N||c("isFeatureLimitEnabled")())&&Q;var T=!Q,U=d("MWPActor.react").useActor();S=S!=null&&((S=d("LSContactBitOffset").has(77,S))!=null?S:!1);var V=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(G);O=N&&!O;var W=(b==null?void 0:b.attachmentType)!=null&&((j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO)));L=L&&!t&&!w.isUnsent&&!O&&!s&&!d("LSMessagingThreadTypeUtil").isCMSubthread(G)&&(!V||V&&d("MWPActor.react").isAPPlus()&&c("MetaConfig")._("107"))&&(!N||c("gkx")("4552"))&&!W;t=w.isUnsent;O=!1;P||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G)?O=!t&&M:N?O=!Q:O=K&&T;s=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),{});var X=s[0];V=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2ContextualActionsButton.react"));var Y=V[0];W=(R==null?void 0:R.isAdmin)===!0;t=(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G))&&J&&!W&&!(j||(j=d("I64"))).equal(U,w.senderId)&&!w.isUnsent&&!S;N=(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isCMSubthread(G))&&!(j||(j=d("I64"))).equal(U,w.senderId)&&!w.isUnsent;Q=d("useShouldAllowRollCallForMessage").useShouldAllowRollCallForMessage(w,[b].filter(Boolean));K=d("Int64Hooks").useCallbackInt64(function(){var a={canRemoveMessageGlobally:M,message:w,removeLogger:x,threadType:G},b={learnMoreOnMessageRemove:v,message:w},e=(j||(j=d("I64"))).equal(w.senderId,U);if(d("MWCMThreadTypes.react").isJoinedCMThread(G)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(G)||e&&!c("gkx")("24140")&&!w.isUnsent)return X(b);else return Y(a,c("emptyFunction"))},[U,v,w,x,Y,X,G,M]);T=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var Z=T.removeMessage;O?Z.current=K:Z.current=c("emptyFunction");var $=n(function(){if(c("gkx")("24096")){Z.current=c("emptyFunction");return}},[Z]);p(function(){return $},[$]);var ca=o(d("MWV2MessageRowIsRowFocusedContext.react").context);if(a==null||!(C||F||E||L||B||z||O||t||N||Q||D||r!=null||c("gkx")("731")))return null;s=function(a){aa(function(){return a});return ca.setFocused(function(){return a})};var da={eventName:"click_message_contextual_action_button",threadKey:w.threadKey,threadType:G};return m.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:s,popoverProps:{attachment:b,canRemoveMessageGlobally:e&&M,closeActionsMenu:g,containerThreadKey:l,extraActions:r,learnMoreDialogType:u,learnMoreOnMessageRemove:v,message:w,onRemoveMessageLogger:x,removeMessageDialogTitle:y,showBusinessMessageFeedbackOptionsInContextualMenu:z,showCreatePrompt:Q,showCreateSubthread:A,showFeedbackOptionsInContextualMenu:B,showForwardActionInContextualMenu:C,showLearnMoreInContextualMenu:D,showPinMessageActionInContextualMenu:L,showReactionInContextualMenu:E,showReplyActionInContextualMenu:F,showReportCommunityMessageToAdmin:t,showReportCommunityMessageToFacebook:N,showUnsendInContextualMenu:O,thread:a},popoverResource:q,popoverType:"menu",position:"above",children:function(a,b){var e=function(){b();return d("MWV2LogMessageClick").log(H,w,48)};return m.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconDots3Vertical"),label:ba,loggingEvent:da,onPress:e,ref:a,testid:void 0})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ForwardMessageButton.react",["fbt","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","MWChatForwardAction.react","MWChatMessageId","promiseDone","qex","react","useMWV2ForwardMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){var b=a.mediaGroupInfo,e=a.message,f=a.threadType,g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f),i=c("qex")._("205")===!0;i=g?i?"cross_transport":"secure":i?"cross_transport":"open_";var m=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(e.threadKey),e.messageId,j.to_string(e.timestampMs)),n=e.stickerId,o=d("useMWV2ForwardMessage").useMWV2ForwardMessage(e,f,void 0,b);b=!d("LSMessagingThreadTypeUtil").isArmadilloSecure(f);f=d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(1),e.displayedContentTypes)&&!e.textHasLinks||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(16384),e.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(2),e.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(4),e.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(512),e.displayedContentTypes)||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239263222822"))||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239343222814"))||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239383222810"));e=b&&!f||a.dropForwardE2eeToggle===!0;return l.jsx(c("MWChatForwardAction.react"),{dropToggle:e,forwardDialogType:i,fromSecureThread:g,label:h._("__JHASH__GvPr2MwluxY__JHASH__"),messageID:m,onForward:function(a){return c("promiseDone")(o(a))}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){return a.map(function(a,b){b=d("EmojiRenderer").parse(a).map(function(a){return a.emoji});return b.length!==1?"":b[0].join("")}).filter(function(a){return a!==""})}function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.reactions).getKeyRange(a.threadKey,a.messageId,e)},[e,b,a.messageId,a.threadKey],f.id+":33");if(g!=null)return g.reaction}function b(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor&&(h||(h=d("I64"))).gt(a.count,(h||(h=d("I64"))).zero)}).map(function(a){a=d("ReQLSuspense").first(d("ReQL").fromTableAscending(b.tables.reaction_v2_types).getKeyRange(a.reactionFbid),f.id+":59");return[a==null?void 0:a.reactionLiteral,a==null?void 0:a.reactionLiteralVariant16].filter(Boolean)})},[b,a.threadKey,a.messageId],f.id+":50").flat();e=j(e);return e}function e(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return a.viewerIsReactor})},[b,a.messageId,a.threadKey],f.id+":79");return d("ReQLSuspense").useFirst(function(){return e?d("ReQL").fromTableAscending(b.tables.reaction_v2_types).getKeyRange(e.reactionFbid).map(function(a){return a.reactionLiteral}):d("ReQL").empty()},[b,e],f.id+":87")}a={useSelectedReaction:a,useSelectedReactionsV2:b,useSelectedReactionV2:e};g.MWV2MessageReactionHooks=a}),98);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","MWV2MessageReactionHooks","cr:10102","gkx","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=h||d("react");var j=e.useCallback,k=e.useMemo;function a(a,e,f,g,h,l){var m=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f),n=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReaction(a),o=b("cr:10102")(a);o=m&&c("gkx")("5831")?o:n;n=d("MWV2MessageReactionHooks").MWV2MessageReactionHooks.useSelectedReactionsV2(a);var p=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(a,m,"reaction_tray"),q=d("MWCMThreadTypes.react").isBroadcastThread(f);f=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(f);var r=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),s=(i||(i=d("I64"))).to_string(a.threadKey),t=i.to_string(a.timestampMs),u=k(function(){return d("MWChatMessageId").makeSent(s,a.messageId,t)},[s,a.messageId,t]),v=j(function(b,c){g&&g();return p(a.messageId,c?void 0:b,c?"remove_reaction":"reaction")},[g,p,a.messageId]),w=r&&q;return{closeActionsMenu:e,disableCustomReactions:w,hasReactionsV2:r,isBroadcastChannel:f,isBroadcastThread:q,isSecure:m,messageID:u,onVisibilityChange:h,reactionsPopoverResource:l,selectedReactions:r?(e=n)!=null?e:void 0:o!=null?[o]:void 0,sendReaction:v}}g["default"]=a}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);a=c("useIsReadOnlyFeatureLimitedWithThreadType")(a);e=(!e||c("isFeatureLimitEnabled")())&&a;a=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(b);var g=(h||(h=c("useReStore")))();b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.reaction_v2_types)},[g],f.id+":38")!=null;return e||a&&!b}g["default"]=a}),98);
__d("MWV2MessageReactionButton.react",["MWChatReactionsAction.react","react","useMWChatReactionsActionContainerProps.react","useMWV2ShouldDisableReactions.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.closeActionsMenu,d=a.message,e=a.onReactionsSendLogger,f=a.reactionsPopoverResource,g=a.setReactionsMenuOpen;a=a.threadType;var h=c("useMWV2ShouldDisableReactions.react")(a,d.threadKey);d=c("useMWChatReactionsActionContainerProps.react")(d,b,a,e,g,f);return h?null:i.jsx(c("MWChatReactionsAction.react"),babelHelpers["extends"]({},d))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2MessageListIsRowModalContext.react",["emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;d=e.createContext;var j=e.useContext,k=d(c("emptyFunction"));function a(a){var b=a.children;a=a.value;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWV2MessageListIsRowModalContext=k;g.MWV2MessageListIsRowModalContextProvider=a;g.useMWV2MessageListIsRowModal=b}),98);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:9275","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9275")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2SetReply.react",["MWPReplyContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("MWPReplyContext.react").MWPReplyContext);a=a.setReply;return a}g["default"]=a}),98);
__d("MWV2ReplyButton.react",["fbt","MAWEditMessageContext.react","MWMessageActionButton.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWXIconReply","emptyFunction","gkx","react","useMWV2SetReply.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=b.useEffect;function a(a){var b=a.message;a=h._("__JHASH__xFCj85w6vra__JHASH__");var e=c("useMWV2SetReply.react")(),f=l(d("MAWEditMessageContext.react").Context),g=f.editMessageData,i=f.setEditMessageData,n=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal();f=function(){g!=null&&i(null),e({messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,threadKey:b.threadKey,timestampMs:b.timestampMs},b.threadKey),n("")};var o=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),p=o.replyToMessage;p.current=f;var q=k(function(){if(c("gkx")("24096")){p.current=c("emptyFunction");return}},[p]);m(function(){return q},[q]);return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconReply"),label:a,loggingEvent:"message_reply",onPress:f,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useEnableBusinessMessageFeedbackOptions",["I64","MWPActor.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor();b=(h||(h=d("I64"))).equal(a.senderId,b);if(a.metadataDataclass==null)return!1;a=JSON.parse(a.metadataDataclass);return a&&a.business_thread_response_feedback&&a.business_thread_response_feedback.is_feedback_button_enabled_for_message===!0?!b:!1}g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var e;return d("ReQL").fromTableDescending(b.tables.ai_bot_feedback_submission_status).getKeyRange((e=a)!=null?e:"").filter(function(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(a){return a.feedbackSubmissionStatus})},[b,a],f.id+":25");return e}g["default"]=a}),98);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("MWPContactContext.react").useMWPContactStableContext();e=e.contact;if(a==null)return!1;return!b?!1:e!=null&&(h||(h=d("I64"))).equal(e.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT))}g["default"]=a}),98);
__d("useIsMessageIDInNewFormat",["justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j="mid.$g",k="mid.$m",l="mid.$c",m="mid.$o";function a(a,b,d){var e=i(function(){return a.startsWith(k)||a.startsWith(j)||a.startsWith(m)||a.startsWith(l)},[a]);if(!c("justknobx")._("2481"))return!0;return b&&d?!0:e}g["default"]=a}),98);
__d("MWMessageRowActions.react",["$InternalEnum","AdsAIMessengerUtils","CometErrorBoundary.react","I64","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingMessageTypeUtil","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MWBlockingProtectionContext.react","MWCMIsAnyCMThread","MWCMIsSubthreadContext.react","MWCMThreadTypes.react","MWGroupBlockingProtectionUtils","MWLSThreadDisplayContext","MWPBaseMessageListRowActions.react","MWPMessageHasAttachment","MWPThreadCapabilitiesContext","MWV2ContextualActionsButton.react","MWV2ForwardMessageButton.react","MWV2MessageReactionButton.react","MWV2MessageRowActionsContext.react","MWV2OneToOneThreadBlockedContext.react","MWV2ReplyButton.react","MWXTooltipGroup.react","MessagingAttachmentType","MetaConfig","ReQL","ReQLSuspense","cr:1669","cr:1670","cr:3463","cr:6325","cr:895","emptyFunction","gkx","isFeatureLimitEnabled","isMWBumpMessage","react","useEmptyFunction","useEnableBusinessMessageFeedbackOptions","useGenAIFeedbackSubmissionStatus","useGetMediaGroupInformation","useIsGenAiFeedbackEnabled","useIsMessageIDInNewFormat","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWGetOtherUserContact","useMWHasForwardAction","useMWIsContactRestricted","useMWV2MessageForwardAction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useEffect,o=e.useState,p=(e=b("cr:895"))!=null?e:c("useEmptyFunction"),aa=c("gkx")("26372"),q=c("gkx")("1241"),r={shrinkSpaceForFeedbackActions:{maxWidth:"x1x67gh",$$css:!0}},s=b("$InternalEnum").Mirrored(["AI_STICKERS"]);function t(a){var e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,k=a.containerThreadKey,o=a.dropForwardE2eeToggle,p=a.extraActions,r=a.learnMoreOnMessageRemove,t=a.mediaGroupInfo,u=a.message,v=a.onReactionsSendLogger,w=a.onRemoveMessageLogger,x=a.outgoing,y=a.reactionsPopoverResource,z=a.removeMessageDialogTitle,A=a.setMoreMenuOpen,B=a.setReactionsMenuOpen,C=a.shouldHideForwardOption,D=a.shouldHideHoverMenuReact,E=a.shouldShowAdsAIFeedbackButtons;E=E===void 0?!1:E;a=a.threadType;var F=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();F=F.isSubthread;var G=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),H=(h||(h=c("useReStore")))();F=F&&u.subthreadKey!=null;var I=c("useMWGetOtherUserContact")(u.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);I=c("useMWIsContactRestricted")(I);var J=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),K=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),L=c("useIsSecureMessage")(H,u,{fallbackThreadType:a}),M=!(i||(i=d("I64"))).equal(u.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(1)),N=d("LSMessagingMessageTypeUtil").isUnavailableMessage(u.displayedContentTypes),O=c("MWCMIsAnyCMThread")(a)&&(i||(i=d("I64"))).equal(u.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4)),P=d("ReQLSuspense").useFirst(function(){return M?d("ReQL").fromTableAscending(H.tables.attachments).getKeyRange(u.threadKey,u.messageId):d("ReQL").empty()},[H,u.messageId,u.threadKey,M],f.id+":157"),Q=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();Q=Q.blurMediaEnabled;Q=c("gkx")("24098")&&Q;var R=P!=null?(i||(i=d("I64"))).equal(P.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):!1,S=P!=null?(i||(i=d("I64"))).equal(P.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):!1;Q=Q&&(R||S);S=i.equal((R=u.displayedContentTypes)!=null?R:(i||(i=d("I64"))).zero,j.ofNumber(128));R=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();var ba=R.isPaused,T=R.reactEnabled,U=R.reactionsV2WriteEnabled,ca=R.replyEnabled;R=R.subThreadCreationEnabled;var V=(P==null?void 0:P.xmaLayoutType)!=null&&(i||(i=d("I64"))).equal(P.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),W=(P==null?void 0:P.mustacheText)!=null&&u.stickerId!=null;W=W?s.AI_STICKERS:null;V=c("gkx")("24095")&&!V&&!u.isUnsent||!M||S;S=c("useMWHasForwardAction")(a,u,P,C,t);C=S.hasForwardAction;S=S.shouldShowForwardAction;var da=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!K||c("isFeatureLimitEnabled")());T=!G&&!I&&!u.isUnsent&&!O&&(T||U);U=c("useIsGenAiFeedbackEnabled")(u.botResponseId,aa);var X=c("useGenAIFeedbackSubmissionStatus")(u.botResponseId),Y=U&&X==null;U=U&&X!=null;X=c("useEnableBusinessMessageFeedbackOptions")(u)&&q;var Z=c("isMWBumpMessage")(u)&&u.replySourceId==null,$=c("useIsMessageIDInNewFormat")(u.messageId,K,L);L=K&&!L;L=!L||c("gkx")("4054");G=!G&&!N&&!I&&!O&&ca&&!u.isUnsent&&!F&&!da&&!E&&!Z&&$&&L;I=G&&!S&&!Y;O=!N&&T&&!D&&!E;ca=O&&!Y;da=O&&Y;Z=d("MWCMThreadTypes.react").isJoinedCMThread(a)&&!ba&&R&&!F&&V;$=Z&&J==="Inbox";L=c("useMWV2MessageForwardAction")(K,u,a);T=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var ea=T.forwardMessage;C&&(ea.current=L);var fa=m(function(){if(c("gkx")("24096")){ea.current=c("emptyFunction");return}},[ea]);n(function(){return fa},[fa]);D=u.messageId;O=u.offlineThreadingId;ba=u.sendStatusV2;R=u.threadKey;V=u.timestampMs;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:x,children:[S&&!Q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(c("MWV2ForwardMessageButton.react"),{dropForwardE2eeToggle:o,mediaGroupInfo:t,message:u,threadType:a})}):null,ca?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2MessageReactionButton.react"),{closeActionsMenu:g,message:u,onReactionsSendLogger:v,reactionsPopoverResource:y,setReactionsMenuOpen:B,threadType:a})}):null,I&&!Q?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ReplyButton.react"),{message:{messageId:D,offlineThreadingId:O,sendStatusV2:ba,threadKey:R,timestampMs:V}})}):null,$&&b("cr:6325")!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(b("cr:6325"),{message:u})}):null,Y&&b("cr:1670")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1670"),{message:u})}):null,Y&&b("cr:1669")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1669"),{message:u})}):null,E&&b("cr:3463")!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:3463"),{message:u})}):null,l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ContextualActionsButton.react"),{attachment:P,canRemoveMessageGlobally:e,closeActionsMenu:g,containerThreadKey:k,extraActions:p,isSubthreadParentMessage:F,isUnavailableMessage:N,learnMoreDialogType:W,learnMoreOnMessageRemove:r,message:u,onRemoveMessageLogger:w,removeMessageDialogTitle:z,setMoreMenuOpen:A,showBusinessMessageFeedbackOptionsInContextualMenu:X,showCreateSubthread:Z&&!$,showFeedbackOptionsInContextualMenu:U,showForwardActionInContextualMenu:!S&&C,showLearnMoreInContextualMenu:W!==null&&c("gkx")("485"),showReactionInContextualMenu:da,showReplyActionInContextualMenu:!I&&G,threadType:a})})]})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var b,e=a.ariaHidden,f=a.canRemoveMessageGlobally,g=a.containerThreadKey,h=a.dropForwardE2eeToggle,k=a.extraActions,m=a.focused,n=a.hidden;n=n===void 0?!1:n;var q=a.hovered,s=a.isLastMessage;s=s===void 0?!1:s;var u=a.isSecureMessage,v=a.learnMoreOnMessageRemove,w=a.message,x=a.onMouseEnter,y=a.onMouseLeave,z=a.onReactionsSendLogger,A=a.onRemoveMessageLogger,B=a.outgoing,C=a.reactionsPopoverResource,D=a.removeMessageDialogTitle,E=a.shouldHideForwardOption;E=E===void 0?!1:E;var F=a.shouldHideHoverMenuReact;F=F===void 0?!1:F;var G=a.showPersistentGenAiFeedbackActionButtons;G=G===void 0?!1:G;a=a.threadType;var H=o(!1),I=H[0];H=H[1];var J=o(!1),K=J[0];J=J[1];var L=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),w.displayedContentTypes);b=(b=p(w.threadKey,w.botResponseId,aa))!=null?b:!1;var M=d("AdsAIMessengerUtils").isMessageFromAdsAI(w);s=s&&M;u=d("useGetMediaGroupInformation").useGetMediaGroupInformation(w,u===!0);var N=u!=null&&(u==null?void 0:u.hasAllMessagesSent)===!1;q=q||m||K||I;m=!n&&!N&&(q||b||L||s);K=c("MWBlockingProtectionContext.react").useHook();I=K.findMessageId;n=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(w.senderId,w.threadKey);if(n&&!I(w.messageId))return null;N=(i||(i=d("I64"))).to_string(w.threadKey)===c("MetaConfig")._("83")&&!B&&c("MWPMessageHasAttachment")(w)&&c("gkx")("5131");return N?null:l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:l.jsx(c("MWXTooltipGroup.react"),{children:l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:(b=e)!=null?b:!1,onMouseEnter:x,onMouseLeave:y,outgoing:B,visibility:q===!0?"full":"partial",xstyle:G?r.shrinkSpaceForFeedbackActions:void 0,children:m?l.jsx(t,{canRemoveMessageGlobally:(L=f)!=null?L:!0,closeActionsMenu:c("emptyFunction"),containerThreadKey:g,dropForwardE2eeToggle:h,extraActions:(s=k)!=null?s:null,learnMoreOnMessageRemove:v,mediaGroupInfo:u,message:w,onReactionsSendLogger:z,onRemoveMessageLogger:A,outgoing:B,reactionsPopoverResource:C,removeMessageDialogTitle:D,setMoreMenuOpen:J,setReactionsMenuOpen:H,shouldHideForwardOption:E,shouldHideHoverMenuReact:F,shouldShowAdsAIFeedbackButtons:M,threadType:a}):null})})})}a.displayName=a.name+" [from "+f.id+"]";g.LearnMoreDialogType=s;g.MWMessageRowActions=a}),98);
__d("MwbActorExperienceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3231");b=d("FalcoLoggerInternal").create("mwb_actor_experience_event",a);e=b;g["default"]=e}),98);
__d("SubthreadCreationStrings.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._("__JHASH___O5rdp7xXii__JHASH__");b=h._("__JHASH__q-3Q4t45N1___JHASH__");g.createSubthreadLabel=a;g.viewSubthreadLabel=b}),226);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=d("LSMessagingThreadTypeUtil").isOneToOne(e);if(!f)return null;f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);if(!f)return c;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(c).filter(function(a){a=a.contactId;return!(h||(h=d("I64"))).equal(a,b)}).take(1)));return e==null?void 0:e.contactId});return i.apply(this,arguments)}g.getMWOtherUserFBID=a}),98);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return(h||(h=d("I64"))).equal(a.creationStatus,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.creationStatusEquals=a}),98);
__d("useLogMAWEditMessage",["I64","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsMessageActionFalcoEvent","MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useCallback;function a(){var a=c("MessengerWebUXLogger").useInteractionLogger();return j(function(b,e,f,g,h){d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?a==null?void 0:a({eventName:k(h)}):c("LsMessageActionFalcoEvent").log(function(){return{action:{type:l(h)},error:{message:void 0},extra:{is_community_chats:d("LSMessagingThreadTypeUtil").isPublicCMThread(b)?"1":"0"},message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:f,recipient_id:(i||(i=d("I64"))).to_string(g)},thread:{group_size:i.to_string(i.zero),id:e!=null?(i||(i=d("I64"))).to_string(e):void 0,type:d("LSMessagingThreadTypeUtil").isGroup(b)?2:1}}})},[a])}function k(a){switch(a){case"EDIT_MESSAGE":return"edit_message";case"EDIT_MESSAGE_CANCEL":return"edit_message_cancel";case"EDIT_MESSAGE_TAP":return"edit_message_tap"}}function l(a){switch(a){case"EDIT_MESSAGE":return 90;case"EDIT_MESSAGE_CANCEL":return 92;case"EDIT_MESSAGE_TAP":return 89}}g["default"]=a}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),b=a.setCurrentSubthreadView,c=a.setSubthreadKey;a=(a=d("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?a:{};var e=a.pushSubthreadViewPage;a=d("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext();var f=a.setIsSubthreadFocused;return function(a,g){g===void 0&&(g=!1),d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:e!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:g===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(h||(h=d("I64"))).to_string(a)}),e!=null?e==null?void 0:e(a):(b("subthreadView"),c(a),f(!0))}}g["default"]=a}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");var k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var e=(i||(i=c("useReStore")))(),g=d("MWLSThread").useThreadExn(a.threadKey),j=c("useCommunityFolder")(g),n=l(c("emptyFunction")),o=c("useMWXPushErrorToast")(),p=m(!1),q=p[0],r=p[1],s=c("useOpenSubthreadView")(),t=d("LSThreadBitOffset").has(206,g);k(function(){return function(){n==null?void 0:n.current()}},[]);p=d("Int64Hooks").useCallbackInt64(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null)return;var b=(yield e.runInTransaction(function(b){return c("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"readwrite",void 0,void 0,f.id+":65"));b=b[0];s(b,!0)}),[e,j,a.messageId,a.threadKey,s]);g=d("Int64Hooks").useCallbackInt64(function(){if(t)return;var b=function(a){a=a[0];if(a==null)return g();var b=d("ReQL").fromTableAscending(e.tables.thread_creation_status).getKeyRange(a);a=d("ReQLSuspense").first(b,f.id+":97");a==null||d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING)?h():i(a);function h(){n.current=b.subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING))return;n.current();i(a)})}function i(a){r(!1);try{var b=a.threadId;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").FAILURE)||b==null)throw c("FBLogger")("cm_web").warn("sidechat creation failed");s(b,!0)}catch(a){g()}}},g=function(){r(!1),o({title:h._("__JHASH__aLKnhppCDUk__JHASH__")})};if(j==null)return;r(!0);c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(e,function(b){return c("LSCreateCommunitySubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"createSocialChannel"),function(a){return b(a)},g)},[e,j,t,a.messageId,a.threadKey,s,o]);return[t?p:g,q]}g["default"]=a}),226);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(a,b){var e=(h||(h=c("useReStore")))(),f=d("MWPActor.react").useActor();return j(function(c,g){d("getMWOtherUserFBID").getMWOtherUserFBID(e,f,a,b).then(function(e){d("MWFalcoFeatureEventLogger").logEvent(c,g,e,a,b)})["catch"](function(){})},[e,f,a,b])}g["default"]=a}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","gkx","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDeferredValue;function a(a){var b=(h||(h=c("useReStore")))(),e=!!d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(b.tables.msg_pinned_messages_v2).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},[b,a],f.id+":29"),g=!!d("ReQLSuspense").useFirst(function(){return a!=null&&!a.isUnsent?d("ReQL").fromTableAscending(b.tables.client_web_pinned_messages).getKeyRange(a.threadKey,a.offlineThreadingId):d("ReQL").empty()},[b,a],f.id+":39");return j(e||g&&c("gkx")("4552"))}g["default"]=a}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(a,b){var e=(h||(h=c("useReStore")))();return k(function(g){c("promiseDone")(e.runInTransaction(function(b){return c("LSSubmitGenAIBotFeedbackStoredProcedure")(c("LSFactory")(b),{botFeedbackKind:(i||(i=d("LSIntEnum"))).ofNumber(g),botResponseId:a||"",feedbackKindType:i.ofNumber(g)})},"readwrite",void 0,void 0,f.id+":30"),b)},[e,a,b])}g["default"]=a}),98);