;/*FB_PKG_DELIM*/

__d("CautionCircleFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"m456.998 1077.072-.25 2.99a.75.75 0 0 1-1.495 0l-.25-2.99a.87.87 0 0 1-.003-.062c0-.497.374-1.01 1-1.01s1 .513 1 1.01a.87.87 0 0 1-.002.062M456 1083a1.001 1.001 0 0 1 0-2c.551 0 1 .449 1 1 0 .551-.449 1-1 1m0-9.5a6 6 0 1 0 .001 12 6 6 0 0 0 0-12"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWMessageSeenCountTooltip.react",["fbt","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWClickedMessageContext.react","MWLSThread","MWLogBroadcastChannelFalcoEvent","MWMessageDeliveryStatus","MWMessageUnsentTimestampText.react","MWXTooltip.react","ReQL","ReQLSuspense","getMessengerPreciseTimestamp","gkx","react","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useMemo,n=c("gkx")("23219")?3:11;function o(a){var b,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.community_chat_message_seen_count).getKeyRange(a.threadKey,a.messageId)},[e,a.threadKey,a.messageId],f.id+":45"),k=(b=d("MWLSThread").useThread(a.threadKey,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1,o=g?(j||(j=d("I64"))).to_int32(g.seenCount):null;b=d("Int64Hooks").useCallbackInt64(function(){if(!k)return;d("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({action:2,event:16,parentSurface:n,source:15,surface:7,threadFbid:a.threadKey})},[k,a.threadKey]);var p=c("useSinglePartialViewImpression")({onImpressionStart:b});return m(function(){var b=a.isUnsent,e=a.timestampMs,f=a.unsentTimestampMs;if(f!=null&&b)return[l.jsx(c("MWMessageUnsentTimestampText.react"),{timestampMs:a.timestampMs,unsentTimestampMs:f},"first"),h._("__JHASH__8eZEd_EeDsx__JHASH__")];b=o!=null?d("MWMessageDeliveryStatus").getSeenCount(o):d("MWMessageDeliveryStatus").Titles.loading;return[l.jsxs("div",{children:[l.jsx("div",{children:h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(e)))])}),l.jsx("div",{ref:p,children:b})]},"first"),b]},[a,p,o])}function a(a){var b=a.children,d=a.message;a=c("MWClickedMessageContext.react").useHook();var e=a.fetchMessageSeenCount;a=o(d);var f=a[0];a=a[1];return l.jsx(c("MWXTooltip.react"),{align:"middle",label:a,onVisibilityChange:function(a){a&&e(d.threadKey,d.messageId)},position:"start",tooltip:f,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconExclamationMarkCircle",["MWXSvgIcon","SVGIcon","cr:9129","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9129")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconRefreshAlt",["MWXSvgIcon","SVGIcon","cr:9272","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9272")),c("gkx")("23219"));g["default"]=a}),98);
__d("MessageForIntegrityCheck",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.isAdminMessage?null:{displayedContentTypes:a.displayedContentTypes,messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,primarySortKey:a.primarySortKey}}f.prepMessageForIntegrityCheck=a}),66);
__d("RefreshRightFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{fillRule:"nonzero",children:[i.jsx("path",{d:"M103.5 918.5a5.5 5.5 0 1 0 3.248 1.061.75.75 0 1 0-.887 1.21A4 4 0 1 1 103.5 920a.75.75 0 1 0 0-1.5z",transform:"translate(352.5 156)"}),i.jsx("path",{d:"M102.47 919.97a.75.75 0 0 0 1.06 1.06l1.25-1.25a.75.75 0 0 0 0-1.06l-1.25-1.25a.75.75 0 0 0-1.06 1.06l.72.72-.72.72z",transform:"translate(352.5 156)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("useObserveMessagePageLoad",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;c=h||d("react");var j=c.useEffect,k=c.useRef;function l(a,b){return b?[a.slice(0,a.length-1),a[a.length-1]]:[[].concat(a),null]}function m(a,b,c){if(b==null)return l(a,c);else{var d=a.findIndex(function(a){return a.messageId===b});if(d===-1)return l(a,c);else return[a.slice(0,d),a.at(d)]}}var n=function(a,b){return a.some(function(a){return b.findIndex(function(b){return b.offlineThreadingId===a.offlineThreadingId})>-1})};function o(a,b,c,e,f,g){var h=k([]),l=k(null),o=k(0);j(function(){var j;g?(h.current.length>0&&!n(h.current,a)&&(h.current=[],l.current=null,o.current=f?999:0),h.current=[].concat(h.current,a).reduce(function(a,b){var c=a.find(function(a){return a.offlineThreadingId===b.offlineThreadingId});if(c==null)a.push(b);else if(c.offlineThreadingId===c.messageId&&b.messageId!==b.offlineThreadingId){c=a.indexOf(c);a[c]=b}return a},[]).sort(function(a,b){var c=(i||(i=d("I64"))).compare(a.primarySortKey,b.primarySortKey);return c!==0?c:a.offlineThreadingId.localeCompare(b.offlineThreadingId)}),j=h.current):j=a;if(e)return;if(j.length===0){l.current=null;return}j=m(j,l.current,f);var k=j[0];j=j[1];if(k.length<b)return;k=k.reverse();j=j;while(k.length>=b){var p=k.splice(0,b);c(j==null?null:j,p.map(function(a){return a}),b,o.current);o.current+=1;j=p[p.length-1]}l.current=(p=j)==null?void 0:p.messageId},[c,b,a,e,f,g])}function a(a,b,c,d,e){return o(a,b,c,d,e,!1)}function b(a,b,c,d,e){return o(a,b,c,d,e,!0)}g.useObserveMessagePageLoad=a;g.useObserveMessagePageLoadWithAggregation=b}),98);